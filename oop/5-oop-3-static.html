<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java静态成员详解</title>

    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/animation.css">
    <link rel="stylesheet" href="../prism/prism.css">
    <link rel="stylesheet" href="./css/5-oop-static.css">
</head>

<body>

    <main id="presentation">
        <section class="slide title-slide active">
            <h1>Java Static关键字详解</h1>
            <p>Java Static Keyword - Complete Guide</p>
            <strong>深入理解静态成员与类级别编程</strong>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>静态变量</h2>
                <p>静态的内容可以理解为是属于类的，是所有对象共享的。我们使用<code>static</code>关键字来声明。</p>
                <pre><code class="language-java">public class Person {
    String name;
    int age;
    static String info; // 静态变量
}</code></pre>
                <p>一个对象改变了静态变量的值，其他对象读取的就是被改变的值。</p>
                <pre><code class="language-java">public static void main(String[] args) {
    Person p1 = new Person();
    Person p2 = new Person();
    p1.info = "info:1";
    System.out.println(p2.info); // 输出: info:1
}</code></pre>
                <p>通常，我们通过类名来访问静态成员：</p>
                <pre><code class="language-java">public static void main(String[] args) {
    Person.info = "info:2";
    System.out.println(Person.info);
}</code></pre>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>静态方法</h2>
                <p>静态方法同样属于类，而不是具体的某个对象。</p>
                <pre><code class="language-java">static void test(){
    System.out.println("我是静态方法");
}</code></pre>
                <p>在静态方法中，无法直接访问非静态的成员变量或使用<code>this</code>关键字，因为它们都与具体对象相关。但是，静态方法可以访问静态变量。</p>
                <pre><code class="language-java">static String info;

static void test(){
    System.out.println("静态变量的值为："+info);
}</code></pre>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>静态(有static) vs 非静态(无static)对比</h2>
                <p>理解静态成员和非静态成员的根本区别是掌握Java面向对象编程的关键。</p>

                <div class="comparison-container">
                    <div class="comparison-table">
                        <div class="table-header">
                            <div class="header-cell">特性</div>
                            <div class="header-cell static-header">静态成员 (static)</div>
                            <div class="header-cell instance-header">非静态成员 (实例成员)</div>
                        </div>

                        <div class="table-row">
                            <div class="feature-cell">归属关系</div>
                            <div class="static-cell">属于类，所有对象共享</div>
                            <div class="instance-cell">属于具体对象实例</div>
                        </div>

                        <div class="table-row">
                            <div class="feature-cell">内存分配</div>
                            <div class="static-cell">方法区/元空间，类加载时分配</div>
                            <div class="instance-cell">堆内存，对象创建时分配</div>
                        </div>

                        <div class="table-row">
                            <div class="feature-cell">访问方式</div>
                            <div class="static-cell">类名.成员名 (推荐)<br>对象.成员名 (不推荐)</div>
                            <div class="instance-cell">必须通过对象实例访问</div>
                        </div>

                        <div class="table-row">
                            <div class="feature-cell">生命周期</div>
                            <div class="static-cell">类加载到程序结束</div>
                            <div class="instance-cell">对象创建到垃圾回收</div>
                        </div>

                        <div class="table-row">
                            <div class="feature-cell">初始化时机</div>
                            <div class="static-cell">类首次使用时</div>
                            <div class="instance-cell">每次创建对象时</div>
                        </div>
                    </div>
                </div>

                <div class="code-comparison">
                    <h3>对比</h3>
                    <pre><code class="language-java">public class Student {
    // 静态成员 - 属于类
    static int totalCount = 0;         // 静态变量
    static String schoolName = "浙大城市学院"; // 静态变量
    
    // 非静态成员 - 属于对象实例
    String name;                       // 实例变量
    int age;                           // 实例变量
    
    // 静态方法 - 属于类
    static void printSchoolInfo() {
        System.out.println("学校：" + schoolName);
        System.out.println("总学生数：" + totalCount);
        // 错误：不能直接访问实例变量
        // System.out.println(name); // 编译错误！
    }
    
    // 非静态方法 - 属于对象实例
    void printStudentInfo() {
        System.out.println("姓名：" + name);
        System.out.println("年龄：" + age);
        // 可以访问静态变量
        System.out.println("学校：" + schoolName);
        System.out.println("总学生数：" + totalCount);
    }
    
    // 构造方法
    Student(String name, int age) {
        this.name = name;
        this.age = age;
        totalCount++; // 每创建一个学生，总数+1
    }
}</code></pre>
                </div>

                <div class="usage-example">
                    <h3>使用示例</h3>
                    <pre><code class="language-java">public class TestStudent {
    public static void main(String[] args) {
        // 访问静态成员 - 不需要创建对象
        System.out.println("初始学生总数：" + Student.totalCount); // 输出：0
        Student.printSchoolInfo(); // 直接通过类名调用
        
        // 创建对象实例
        Student s1 = new Student("张三", 20);
        Student s2 = new Student("李四", 21);
        
        // 访问实例成员 - 必须通过对象
        s1.printStudentInfo();
        s2.printStudentInfo();
        
        // 静态成员被所有对象共享
        System.out.println("当前学生总数：" + Student.totalCount); // 输出：2
        System.out.println("通过s1访问：" + s1.totalCount);       // 输出：2 (不推荐)
        System.out.println("通过s2访问：" + s2.totalCount);       // 输出：2 (不推荐)
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>静态变量动画演示</h2>
                <p>静态变量属于类，被所有对象实例共享。让我们通过动画来理解这个概念：</p>

                <div class="static-variable-animation">
                    <div class="animation-container">
                        <div class="class-template">
                            <div class="class-title">Student 类</div>
                            <div class="class-content">
                                <div class="static-variable">
                                    <span class="var-label">static int count = 0;</span>
                                    <div class="static-counter" id="staticCounter">0</div>
                                </div>
                                <div class="instance-variables">
                                    <div class="var-item">String name;</div>
                                    <div class="var-item">int age;</div>
                                </div>
                            </div>
                        </div>

                        <div class="objects-container">
                            <div class="object-instance" id="student1">
                                <div class="object-title">student1</div>
                                <div class="object-values">
                                    <div>name: "张三"</div>
                                    <div>age: 20</div>
                                </div>
                                <div class="static-reference">
                                    <span class="reference-arrow">count → </span>
                                    <span class="shared-value" id="sharedValue1">0</span>
                                </div>
                            </div>

                            <div class="object-instance" id="student2">
                                <div class="object-title">student2</div>
                                <div class="object-values">
                                    <div>name: "李四"</div>
                                    <div>age: 21</div>
                                </div>
                                <div class="static-reference">
                                    <span class="reference-arrow">count → </span>
                                    <span class="shared-value" id="sharedValue2">0</span>
                                </div>
                            </div>

                            <div class="object-instance" id="student3">
                                <div class="object-title">student3</div>
                                <div class="object-values">
                                    <div>name: "王五"</div>
                                    <div>age: 19</div>
                                </div>
                                <div class="static-reference">
                                    <span class="reference-arrow">count → </span>
                                    <span class="shared-value" id="sharedValue3">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="animation-controls">
                        <button class="control-btn" onclick="createStudent()">创建新学生对象</button>
                        <button class="control-btn" onclick="incrementCount()">修改 count++</button>
                        <button class="control-btn" onclick="resetDemo()">重置演示</button>
                    </div>

                    <div class="explanation-text">
                        <p><strong>观察要点：</strong></p>
                        <ul>
                            <li>当创建新对象时，static变量count会自动增加</li>
                            <li>所有对象实例都共享同一个static变量</li>
                            <li>修改static变量会影响所有对象的访问结果</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>静态代码块和初始化顺序</h2>
                <p>静态代码块可用于初始化静态变量，它在类加载时执行。</p>
                <pre><code class="language-java">public class Person {
    String name = test();

    {
        System.out.println("我是普通代码块");
    }

    Person() {
        System.out.println("我是构造方法");
    }

    String test() {
        System.out.println("我是成员变量初始化");
        return "小明";
    }

    static String info = init();

    static {
        System.out.println("我是静态代码块");
    }

    static String init() {
        System.out.println("我是静态变量初始化");
        return "test";
    }
}</code></pre>
                <p>当创建一个对象时，执行顺序如下：</p>
                <ol>
                    <li>我是静态变量初始化</li>
                    <li>我是静态代码块</li>
                    <li>我是成员变量初始化</li>
                    <li>我是普通代码块</li>
                    <li>我是构造方法</li>
                </ol>
                <p>如果只访问静态成员（如<code>Person.info</code>），则只会执行静态部分的初始化。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>static成员的完整生命周期</h2>
                <p>从类加载到程序结束，理解static成员在内存中的完整生命历程。</p>

                <!-- 完整生命周期时间线 -->
                <div class="lifecycle-timeline">
                    <h3>🕐 生命周期时间线</h3>
                    <div class="timeline-container">
                        <div class="timeline-stage" data-stage="loading">
                            <div class="stage-marker">1</div>
                            <div class="stage-label">类加载</div>
                        </div>
                        <div class="timeline-arrow">→</div>
                        <div class="timeline-stage" data-stage="linking">
                            <div class="stage-marker">2</div>
                            <div class="stage-label">链接</div>
                        </div>
                        <div class="timeline-arrow">→</div>
                        <div class="timeline-stage" data-stage="initialization">
                            <div class="stage-marker">3</div>
                            <div class="stage-label">初始化</div>
                        </div>
                        <div class="timeline-arrow">→</div>
                        <div class="timeline-stage" data-stage="runtime">
                            <div class="stage-marker">4</div>
                            <div class="stage-label">运行时使用</div>
                        </div>
                        <div class="timeline-arrow">→</div>
                        <div class="timeline-stage" data-stage="unloading">
                            <div class="stage-marker">5</div>
                            <div class="stage-label">类卸载</div>
                        </div>
                    </div>
                </div>

                <!-- 详细阶段说明 -->
                <div class="lifecycle-details">
                    <div class="stage-details">
                        <div class="detail-section" data-stage="loading">
                            <h4>🔄 1. 类加载阶段</h4>
                            <div class="detail-content">
                                <div class="detail-item">
                                    <strong>加载（Loading）</strong>
                                    <ul>
                                        <li>将.class文件读入内存</li>
                                        <li>在方法区创建Class对象</li>
                                        <li>为static变量分配内存空间</li>
                                    </ul>
                                </div>
                                <div class="trigger-conditions">
                                    <strong>触发条件：</strong>
                                    <span class="condition">创建实例</span>
                                    <span class="condition">访问static成员</span>
                                    <span class="condition">反射调用</span>
                                    <span class="condition">子类初始化</span>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section" data-stage="linking">
                            <h4>🔗 2. 链接阶段</h4>
                            <div class="detail-content">
                                <div class="detail-item">
                                    <strong>验证 → 准备 → 解析</strong>
                                    <ul>
                                        <li>验证：检查字节码格式和安全性</li>
                                        <li>准备：在<span class="highlight">方法区/元空间</span>为static变量分配内存并设置默认值</li>
                                        <li>解析：符号引用转为直接引用</li>
                                    </ul>
                                </div>
                                <div class="memory-allocation">
                                    <strong>内存分配：</strong>
                                    <span class="memory-location">JDK 8之前：永久代</span>
                                    <span class="memory-location">JDK 8+：元空间</span>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section" data-stage="initialization">
                            <h4>⚡ 3. 初始化阶段</h4>
                            <div class="detail-content">
                                <div class="detail-item">
                                    <strong>执行static代码</strong>
                                    <ul>
                                        <li>执行static变量的显式初始化</li>
                                        <li>执行static代码块</li>
                                        <li>严格按照代码中的声明顺序执行</li>
                                        <li>JVM保证线程安全性</li>
                                    </ul>
                                </div>
                                <div class="initialization-note">
                                    <strong>重要：</strong>每个类只初始化一次，父类先于子类初始化
                                </div>
                            </div>
                        </div>

                        <div class="detail-section" data-stage="runtime">
                            <h4>🏃 4. 运行时阶段</h4>
                            <div class="detail-content">
                                <div class="runtime-features">
                                    <div class="feature-group">
                                        <strong>访问特性</strong>
                                        <ul>
                                            <li>全局唯一：所有实例共享同一份</li>
                                            <li>类级访问：通过类名直接访问</li>
                                            <li>内存位置固定在方法区/元空间</li>
                                        </ul>
                                    </div>
                                    <div class="feature-group">
                                        <strong>内存管理</strong>
                                        <ul>
                                            <li>不受普通GC直接管理</li>
                                            <li>随类的生命周期存在</li>
                                            <li>与堆内存分离，生命周期独立</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section" data-stage="unloading">
                            <h4>🗑️ 5. 类卸载阶段</h4>
                            <div class="detail-content">
                                <div class="unload-conditions">
                                    <strong>卸载条件（需同时满足）：</strong>
                                    <ul>
                                        <li>该类所有实例都已被回收</li>
                                        <li>加载该类的ClassLoader已被回收</li>
                                        <li>该类的Class对象没有被引用</li>
                                        <li>无法通过反射访问该类</li>
                                    </ul>
                                </div>
                                <div class="unload-reality">
                                    <strong>实际情况：</strong>
                                    <span class="reality-note">系统类通常不卸载</span>
                                    <span class="reality-note">Web应用重部署时卸载</span>
                                    <span class="reality-note">自定义ClassLoader的类可能卸载</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>static成员的完整生命周期（续）</h2>
                <p>通过执行输出分析和类加载触发时机，深入理解static成员的行为特点。</p>

                <div class="lifecycle-example">
                    <h3>生命周期演示代码</h3>
                    <pre><code class="language-java">public class LifecycleDemo {
    // 静态变量 - 在类加载时初始化
    static String staticVar = initStaticVar();
    
    // 静态代码块 - 在类加载时执行
    static {
        System.out.println("3. 静态代码块执行");
    }
    
    // 实例变量 - 在对象创建时初始化
    String instanceVar = initInstanceVar();
    
    // 实例代码块 - 在对象创建时执行
    {
        System.out.println("6. 实例代码块执行");
    }
    
    // 静态方法 - 用于初始化静态变量
    static String initStaticVar() {
        System.out.println("2. 静态变量初始化");
        return "静态变量值";
    }
    
    // 实例方法 - 用于初始化实例变量
    String initInstanceVar() {
        System.out.println("5. 实例变量初始化");
        return "实例变量值";
    }
    
    // 构造方法
    public LifecycleDemo() {
        System.out.println("7. 构造方法执行");
    }
    
    public static void main(String[] args) {
        System.out.println("1. 开始执行main方法");
        
        System.out.println("4. 准备创建第一个对象");
        LifecycleDemo obj1 = new LifecycleDemo();
        
        System.out.println("8. 准备创建第二个对象");
        LifecycleDemo obj2 = new LifecycleDemo();
        
        System.out.println("9. 程序结束");
    }
}</code></pre>
                </div>

                <div class="lifecycle-analysis">
                    <div class="execution-output">
                        <h3>执行输出分析</h3>
                        <div class="output-box">
                            <div class="output-line">1. 开始执行main方法</div>
                            <div class="output-line static-line">2. 静态变量初始化</div>
                            <div class="output-line static-line">3. 静态代码块执行</div>
                            <div class="output-line">4. 准备创建第一个对象</div>
                            <div class="output-line instance-line">5. 实例变量初始化</div>
                            <div class="output-line instance-line">6. 实例代码块执行</div>
                            <div class="output-line instance-line">7. 构造方法执行</div>
                            <div class="output-line">8. 准备创建第二个对象</div>
                            <div class="output-line instance-line">5. 实例变量初始化</div>
                            <div class="output-line instance-line">6. 实例代码块执行</div>
                            <div class="output-line instance-line">7. 构造方法执行</div>
                            <div class="output-line">9. 程序结束</div>
                        </div>

                        <div class="analysis-notes">
                            <h4>关键观察点：</h4>
                            <ul>
                                <li><span class="static-highlight">静态初始化</span>只在类首次使用时执行一次</li>
                                <li><span class="instance-highlight">实例初始化</span>每次创建对象时都会执行</li>
                                <li>静态成员的生命周期从类加载开始，直到程序结束或类被卸载</li>
                            </ul>
                        </div>
                    </div>

                    <div class="class-loading-triggers">
                        <h3>类加载触发时机详解</h3>

                        <div class="trigger-examples">
                            <div class="trigger-item">
                                <h4>🔥 主动引用（会触发类加载）</h4>
                                <pre><code class="language-java">// 1. 创建类的实例
MyClass obj = new MyClass();

// 2. 访问或设置类的静态变量（非final常量）
int value = MyClass.staticVar;
MyClass.staticVar = 100;

// 3. 调用类的静态方法
MyClass.staticMethod();

// 4. 使用反射
Class.forName("com.example.MyClass");

// 5. 初始化子类时，ParentClass会先被加载
ChildClass child = new ChildClass(); </code></pre>
                            </div>

                            <div class="trigger-item">
                                <h4>❄️ 被动引用（不会触发类加载）</h4>
                                <pre><code class="language-java">// 1. 访问静态final常量
String constant = MyClass.STATIC_FINAL_STRING; 

// 2. 通过数组定义引用类
MyClass[] array = new MyClass[10]; 

// 3. 访问父类的静态成员，只加载父类
String parentVar = ChildClass.parentStaticVar; </code></pre>
                            </div>
                        </div>

                        <div class="loading-comparison">
                            <h4>类加载时机对比</h4>
                            <div class="comparison-grid">
                                <div class="comparison-item active-ref">
                                    <h5>主动引用特点</h5>
                                    <ul>
                                        <li>立即触发类的初始化</li>
                                        <li>执行静态代码块</li>
                                        <li>初始化静态变量</li>
                                        <li>可能触发父类加载</li>
                                    </ul>
                                </div>
                                <div class="comparison-item passive-ref">
                                    <h5>被动引用特点</h5>
                                    <ul>
                                        <li>不触发类的初始化</li>
                                        <li>可能只加载类结构</li>
                                        <li>编译时常量直接替换</li>
                                        <li>延迟实际的类初始化</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>JVM内存模型与Static成员存储</h2>
                <p>从虚拟机角度深入理解static成员与类的关联，以及非静态成员与对象的关联。</p>

                <div class="jvm-memory-model">
                    <div class="memory-overview">
                        <h3>JVM内存结构概览</h3>

                        <div class="jvm-diagram">
                            <div class="memory-area method-area-section">
                                <div class="area-header">
                                    <h4>方法区 (Method Area)</h4>
                                    <span class="jvm-version">&lt;=JDK 7</span>
                                </div>
                                <div class="area-content">
                                    <div class="memory-component">
                                        <div class="component-icon">🏛️</div>
                                        <div class="component-info">
                                            <strong>永久代 (PermGen)</strong>
                                            <p>存储类的元数据信息</p>
                                        </div>
                                    </div>
                                    <div class="stored-items">
                                        <div class="item">类的字节码</div>
                                        <div class="item">静态变量</div>
                                        <div class="item">静态方法</div>
                                        <div class="item">常量池</div>
                                        <div class="item">方法信息</div>
                                    </div>
                                </div>
                            </div>

                            <div class="memory-area metaspace-section">
                                <div class="area-header">
                                    <h4>元空间 (Metaspace)</h4>
                                    <span class="jvm-version"> >=JDK 8</span>
                                </div>
                                <div class="area-content">
                                    <div class="memory-component">
                                        <div class="component-icon">🌌</div>
                                        <div class="component-info">
                                            <strong>本地内存</strong>
                                            <p>使用操作系统本地内存</p>
                                        </div>
                                    </div>
                                    <div class="stored-items">
                                        <div class="item">类的元数据</div>
                                        <div class="item">方法信息</div>
                                        <div class="item">字段信息</div>
                                        <div class="item">常量池引用</div>
                                    </div>
                                    <div class="improvement-note">
                                        <strong>改进：</strong>避免了PermGen的内存溢出
                                    </div>
                                </div>
                            </div>

                            <div class="memory-area heap-section">
                                <div class="area-header">
                                    <h4>堆内存 (Heap)</h4>
                                    <span class="jvm-version">所有版本</span>
                                </div>
                                <div class="area-content">
                                    <div class="heap-regions">
                                        <div class="heap-region young-gen">
                                            <h5>年轻代</h5>
                                            <div class="region-parts">
                                                <div class="part">Eden</div>
                                                <div class="part">S0</div>
                                                <div class="part">S1</div>
                                            </div>
                                        </div>
                                        <div class="heap-region old-gen">
                                            <h5>老年代</h5>
                                            <div class="region-content">
                                                <div class="item">长期存活的对象</div>
                                                <div class="item">大对象</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="stored-items">
                                        <div class="item">对象实例</div>
                                        <div class="item">实例变量</div>
                                        <div class="item">数组</div>
                                        <div class="item">静态变量的值（JDK 8+）</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>注：<code>方法区</code>是Java虚拟机规范中定义的一个逻辑概念，是所有线程共享的一块内存区域。</p>
                    <p><code>永久代</code>是HotSpot虚拟机（Oracle JDK用的）在JDK 7及之前，对“方法区”这个规范的在<strong>堆内存</strong>里的具体实现。</p>
                    <div class="static-storage-evolution">
                        <h3>Static变量存储位置的演进</h3>

                        <div class="evolution-timeline">
                            <div class="evolution-item jdk7">
                                <div class="version-badge">JDK 7及之前</div>
                                <div class="storage-info">
                                    <h4>永久代存储</h4>
                                    <div class="storage-details">
                                        <div class="storage-location">
                                            <strong>位置：</strong>方法区的永久代
                                        </div>
                                        <div class="storage-characteristics">
                                            <strong>特点：</strong>
                                            <ul>
                                                <li>固定大小，容易OutOfMemoryError</li>
                                                <li>垃圾回收效率低</li>
                                                <li>与堆内存分离</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-item jdk8">
                                <div class="version-badge">JDK 8及之后</div>
                                <div class="storage-info">
                                    <h4>堆内存存储</h4>
                                    <div class="storage-details">
                                        <div class="storage-location">
                                            <strong>位置：</strong>堆内存 + 元空间
                                        </div>
                                        <div class="storage-split">
                                            <div class="split-item">
                                                <strong>静态变量的值：</strong>堆内存
                                            </div>
                                            <div class="split-item">
                                                <strong>静态变量的元数据（类型信息、名称信息等）：</strong>元空间
                                            </div>
                                        </div>
                                        <div class="storage-characteristics">
                                            <strong>优势：</strong>
                                            <ul>
                                                <li>更好的垃圾回收管理</li>
                                                <li>避免永久代内存溢出</li>
                                                <li>动态调整元空间大小</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>交互式内存分配演示</h2>
                <p>通过动画直观理解static成员与实例成员在JVM内存中的分配过程。</p>

                <div class="interactive-demo">
                    <div class="demo-controls">
                        <button id="startDemo" class="demo-btn primary">开始演示</button>
                        <button id="resetDemo" class="demo-btn secondary">重置</button>
                        <button id="stepDemo" class="demo-btn">单步执行</button>
                        <div class="demo-speed">
                            <label>速度：</label>
                            <input type="range" id="speedControl" min="1" max="5" value="3">
                        </div>
                    </div>

                    <div class="memory-animation-container">
                        <div class="code-execution-panel">
                            <h3>代码执行</h3>
                            <div class="code-display">
                                <pre id="animationCode"><code class="language-java">public class AnimationDemo {
    static String staticVar = "静态变量";
    static int counter = 0;
    
    String instanceVar;
    int id;
    
    public AnimationDemo(String name) {
        this.instanceVar = name;
        this.id = ++counter;
    }
    
    public static void main(String[] args) {
        AnimationDemo obj1 = new AnimationDemo("对象1");
        AnimationDemo obj2 = new AnimationDemo("对象2");
    }
}</code></pre>
                            </div>
                            <div class="execution-pointer" id="executionPointer"></div>
                            <div class="execution-log" id="executionLog"></div>
                        </div>

                        <div class="memory-visualization-panel">
                            <h3>内存状态</h3>

                            <div class="memory-areas">
                                <div class="memory-area metaspace-area">
                                    <h4>元空间 (Metaspace)</h4>
                                    <div class="memory-content" id="metaspaceContent">
                                        <div class="memory-placeholder">等待类加载...</div>
                                    </div>
                                </div>

                                <div class="memory-area heap-area">
                                    <h4>堆内存 (Heap)</h4>

                                    <div class="heap-section static-section">
                                        <h5>静态变量区</h5>
                                        <div class="memory-content" id="staticContent">
                                            <div class="memory-placeholder">等待静态初始化...</div>
                                        </div>
                                    </div>

                                    <div class="heap-section instance-section">
                                        <h5>实例对象区</h5>
                                        <div class="memory-content" id="instanceContent">
                                            <div class="memory-placeholder">等待对象创建...</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="animation-timeline">
                        <h3>执行时间线</h3>
                        <div class="timeline-track" id="timelineTrack">
                            <div class="timeline-progress" id="timelineProgress"></div>
                            <div class="timeline-step" data-step="1">
                                <div class="step-marker"></div>
                                <div class="step-label">类加载</div>
                            </div>
                            <div class="timeline-step" data-step="2">
                                <div class="step-marker"></div>
                                <div class="step-label">静态初始化</div>
                            </div>
                            <div class="timeline-step" data-step="3">
                                <div class="step-marker"></div>
                                <div class="step-label">main方法执行</div>
                            </div>
                            <div class="timeline-step" data-step="4">
                                <div class="step-marker"></div>
                                <div class="step-label">创建对象1</div>
                            </div>
                            <div class="timeline-step" data-step="5">
                                <div class="step-marker"></div>
                                <div class="step-label">创建对象2</div>
                            </div>
                        </div>
                    </div>

                    <div class="memory-stats">
                        <h3>内存统计</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-label">静态变量数量</div>
                                <div class="stat-value" id="staticCount">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">对象实例数量</div>
                                <div class="stat-value" id="instanceCount">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">总内存使用</div>
                                <div class="stat-value" id="memoryUsage">0 B</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">共享内存节省</div>
                                <div class="stat-value" id="memorySaved">0 B</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div class="controls">
            <button id="prevBtn">上一页</button>
            <span id="slide-counter">1 / X</span>
            <button id="nextBtn">下一页</button>
        </div>
    </main>

    <script src="./js/animation.js"></script>
    <script src="./js/5-oop-static.js"></script>
    <script src="./js/ppt.js"></script>
    <script src="../prism/prism.js"></script>
    <script src="../prism/prism-autoloader.min.js"></script>
    <script src="./js/nav.js"></script>
</body>

</html>