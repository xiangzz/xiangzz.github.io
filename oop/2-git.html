<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git 版本控制教程</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="../prism/prism.css">
</head>
<body>

    <main id="presentation">
        <!-- Slide 1: Title -->
        <section class="slide title-slide active">
            <h1>Git 版本控制教程</h1>
            <p>从入门到协作，掌握现代开发的核心技能</p>
            <img src="./images/2-git-cover.jpg" alt="Git Cover" style="max-width: 60%; display: block; margin: 20px auto;">
        </section>

        <!-- Intro Slides -->
        <section class="slide">
            <div class="slide-content">
                <h2>开始之前</h2>
                <div class="warning">
                    <strong>注意：</strong>确保你的网络可以畅通地连接 Gitee：<a href="https://gitee.com" target="_blank">https://gitee.com</a>
                </div>
                <p>这是一个国内版本的GitHub，有着和Github类似的使用体验，但是更方便访问。</p>
                <blockquote style="border-left: 4px solid var(--accent-color); padding-left: 15px; font-style: italic;">
                    <p>总有一天，我会聚集一群不输给这些人的伙伴，并找到世界第一的财宝，我要成为海贼王！</p>
                    <footer style="text-align: right;">—— 蒙奇·D·路飞 《海贼王》</footer>
                </blockquote>
                <img src="./images/2-onepiece.png" alt="One Piece" style="max-width: 90%; display: block; margin: 20px auto;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>为什么需要版本控制？</h2>
                <p>版本控制在日常学术和工作中至关重要。以学术写作为例，你可能会面临：</p>
                <ul>
                    <li><strong>论文的多次迭代</strong>：产生许多不同版本，需要从中挑选最终稿。</li>
                    <li><strong>多方参与协作</strong>：多位作者需要同时编辑不同部分，并有效整合。</li>
                </ul>
                <p>版本控制工具能帮我们记录历史、随时回退（时间回溯）、同步进度并解决冲突。</p>
            </div>
        </section>

        <!-- Git Principles -->
        <section class="slide">
            <div class="slide-content">
                <h2>Git 的原理</h2>
                <p>Git 是一个为应对大型项目而生的分布式版本控制系统。它的包含四个工作区：</p>
                <img src="./images/2-git-space.png" alt="Git workflow" style="max-width: 100%; border-radius: 8px; margin: 15px 0;">
                <ol>
                    <li><strong>工作区 (Workspace)</strong>：你当前编写代码的地方。</li>
                    <li><strong>暂存区 (Stage/Index)</strong>：临时存放你准备提交的改动。</li>
                    <li><strong>本地仓库 (Repository)</strong>：存储在你电脑上的项目所有版本的历史记录。</li>
                    <li><strong>远程仓库 (Remote)</strong>：托管在服务器上，用于团队协作和代码备份。</li>
                </ol>
                <p>Git 的核心是<strong>分布式</strong>，每个人的电脑上都有一个完整的本地仓库，可以独立工作，然后将更新推送到远程仓库进行同步。</p>

            </div>
        </section>

        <!-- Installation -->
        <section class="slide">
            <div class="slide-content">
                <h2>安装 Git</h2>
                <h3>1. 下载与安装</h3>
                <p>前往Git官网下载最新的Windows安装包：<a href="https://git-scm.com/download/win" target="_blank">https://git-scm.com/download/win</a></p>
                <img src="./images/2-Download Git.png" alt="Download Git" style="max-width: 70%; border: 1px solid var(--border-color);">
                <p>下载后双击安装包，选择合适的安装路径，然后一路点击 "Next" 即可完成安装。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>安装 Git</h2>
                <h3>2. 验证安装成功</h3>
                <p>在桌面或任意文件夹内点击鼠标右键，如果菜单中出现 "Git Bash Here" 和 "Git GUI Here" 选项，证明安装成功。</p>
                <img src="./images/2-Verify installation.png" alt="Verify installation" style="max-width: 50%; border: 1px solid var(--border-color);">
                <h3>3. 初步配置</h3>
                <p>安装后，需要设置你的用户名和邮箱，这是你提交代码时的身份标识。</p>
                <pre><code>git config --global user.name "Your Name"
git config --global user.email "email@example.com"</code></pre>
            </div>
        </section>

        <!-- Basic Commands -->
        <section class="slide">
            <div class="slide-content">
                <h2>基本命令：创建本地仓库</h2>
                <p>我们可以将任意一个文件夹初始化为Git本地仓库。</p>
                <ol>
                    <li>进入目标文件夹。</li>
                    <li>右键点击 "Git Bash Here" 打开命令行。</li>
                    <li>输入初始化命令：</li>
                </ol>
                <pre><code>git init</code></pre>
                <p>这会在当前目录下创建一个隐藏的 <code>.git</code> 文件夹。然后，使用 <code>git status</code> 查看仓库状态。</p>
                <pre><code>git status</code></pre>
                <p>初次会显示 "No commits yet"，表示这是一个空的仓库。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>基本命令：添加与提交 (1/2)</h2>
                <p>我们创建一个 <code>hello.txt</code> 文件，并查看状态。</p>
                <pre><code>touch hello.txt
git status</code></pre>
                <p>Git会提示有一个 "Untracked file" (未追踪文件)。这意味着Git发现了这个新文件，但尚未开始管理它。</p>
                <img src="./images/2-Untracked files.png" alt="Untracked files" style="max-width: 100%;">
                <p>使用 <code>git add</code> 将文件添加到暂存区，使其变为被追踪状态。</p>
                <pre><code>git add hello.txt</code></pre>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>基本命令：添加与提交 (2/2)</h2>
                <p>再次使用 <code>git status</code> 查看，文件已变为绿色，并位于 "Changes to be committed" 下方，表示已成功进入暂存区。</p>
                <img src="./images/2-Staged files.png" alt="Staged files" style="max-width: 100%;">
                <p>现在，使用 <code>git commit</code> 将暂存区的改动提交到本地仓库，形成一个新版本。<code>-m</code> 参数用于添加本次提交的描述信息。</p>
                <pre><code>git commit -m "Initial commit with hello.txt"</code></pre>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>基本命令：忽略文件 (.gitignore)</h2>
                <p>并非所有文件都需要版本控制（如编译产物、日志文件）。我们可以在项目根目录创建一个名为 <code>.gitignore</code> 的文件，列出需要忽略的文件或目录模式。</p>
                <p><strong>常用规则示例：</strong></p>
                <pre><code># 忽略所有 .log 文件
*.log

# 忽略 build 目录下的所有内容
build/

# 忽略 node_modules 目录
node_modules/

# 但不忽略 keep.txt 文件，即使它在 build 目录中
!build/keep.txt</code></pre>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>.gitignore 练习题</h2>
                <div class="practice-container">
                    <div class="practice-step" style="padding: 15px;">
                        <h3 style="font-size: 1.2em;">题目</h3>
                        <ol style="font-size: 0.9em; padding-left: 20px;">
                            <li>忽略名为 <code>build</code> 的文件夹。</li>
                            <li>忽略所有的 <code>.log</code> 文件。</li>
                            <li>已忽略 <code>build/</code>，但需跟踪 <code>build/deploy.txt</code>。</li>
                            <li>忽略 <code>src</code> 目录下所有 <code>.tmp</code> 文件。</li>
                            <li>忽略 <code>docs</code> 目录下所有以 <code>~</code> 结尾的文件。</li>
                            <li>忽略 <code>test</code> 目录下所有 <code>.pyc</code> 和 <code>test/results</code> 目录。</li>
                            <li>规则 <code>*.log</code> 和 <code>!app.log</code> 会怎样？</li>
                            <li>忽略 <code>.min.js</code>, <code>.env</code>, <code>.db</code>, <code>node_modules/</code>, <code>*.swp</code> 文件。</li>
                        </ol>
                    </div>
                    <div class="practice-step answer-section" style="padding: 15px;">
                        <h3 style="font-size: 1.2em;">答案</h3>
                        <ol style="font-size: 0.9em; padding-left: 20px;">
                            <li><code>build/</code></li>
                            <li><code>*.log</code></li>
                            <li><code>build/</code><br><code>!build/deploy.txt</code></li>
                            <li><code>src/*.tmp</code></li>
                            <li><code>docs/*~</code></li>
                            <li><code>test/*.pyc</code><br><code>test/results/</code></li>
                            <li>除 <code>app.log</code> 外所有 <code>.log</code> 文件被忽略。</li>
                            <li><pre style="font-size: 0.9em; padding: 10px;"><code>*.min.js
.env
*.db
node_modules/
*.swp</code></pre></li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>基本命令：回滚版本</h2>
                <p>如果提交了错误的代码或想回到之前的某个版本，可以使用 <code>git reset</code>。</p>
                <pre><code># 回滚到指定的 commit ID
git reset --hard &lt;commitID&gt;</code></pre>
                <p><code>--hard</code> 参数会使工作区、暂存区和版本库都回退到指定状态，之后的提交记录会丢失。</p>
                <h3>如何找回“丢失”的提交？</h3>
                <p>如果回滚后又后悔了，可以使用 <code>git reflog</code> 查看所有HEAD的移动记录，找到回滚前的commit ID，再次使用 <code>git reset --hard</code> 即可恢复。</p>
                <pre><code>git reflog</code></pre>
            </div>
        </section>

        <!-- Branches -->
        <section class="slide">
            <div class="slide-content">
                <h2>分支 (Branches)</h2>
                <p>分支是Git的“杀手锏”功能。它允许你从主开发线上分离出来，创建一条独立的开发路线，用于开发新功能或修复bug，而不会影响主线的稳定性。</p>
                <img src="./images/2-git-brance.svg" alt="Branch" style="max-width: 80%;">
                <p>在Git内部，分支仅仅是一个指向特定提交的轻量级指针。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>分支操作：创建与切换</h2>
                <p>查看所有分支 (<code>*</code> 表示当前所在分支)：</p>
                <pre><code>git branch</code></pre>
                <p>基于当前分支创建一个名为 `test` 的新分支：</p>
                <pre><code>git branch test</code></pre>
                <p>切换到 `test` 分支进行工作：</p>
                <pre><code>git checkout test
# 或者使用新命令: git switch test</code></pre>
                <p>在 `test` 分支上的所有提交都与 `master` 分支隔离，互不影响。切换回 `master` 分支后，文件内容会恢复到 `master` 分支的状态。</p>
                <img src="./images/2-Branch divergence.png" alt="Branch divergence" style="max-width: 80%;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>分支操作：合并与冲突</h2>
                <p>当 `test` 分支的功能开发完成后，我们希望将其合并回 `master` 主分支。</p>
                <pre><code># 1. 首先切换回主分支
git checkout master

# 2. 执行合并命令
git merge test</code></pre>
                
                <h3><strong>示例：</strong>合并冲突的具体场景</h3>
                <p>假设我们有一个 `hello.txt` 文件，在不同分支中被修改：</p>
                
                <pre><code># 在 master 分支中，hello.txt 的内容是：
234

# 在 test 分支中，hello.txt 被修改为：
123-test

# 当我们在 master 分支执行 git merge test 时：
git checkout master
git merge test</code></pre>
                
                <h3>解决冲突</h3>
                <p>在上面的示例中，由于 `master` 和 `test` 分支都修改了 `hello.txt` 文件的同一部分，合并时就会产生冲突 (Conflict)。Git会暂停合并，并在冲突文件中用特殊标记标出冲突区域：</p>
                
                <pre><code># Git 会在 hello.txt 中显示冲突标记：
<<<<<<< HEAD
234
=======
123-test
>>>>>>> test</code></pre>
                
                <p>其中 `<<<<<<< HEAD` 到 `=======` 之间是当前分支（master）的内容，`=======` 到 `>>>>>>> test` 之间是要合并分支（test）的内容。</p>
                <img src="./images/2-Conflict markers.png" alt="Conflict markers" style="max-width: 80%;">
                <p>手动编辑文件，保留需要的内容并删除冲突标记，然后再次 `git add` 和 `git commit` 即可完成合并(<a href="2-git-merge-demo.html">点击查看演示</a>)</p>
            </div>
        </section>
        
        <section class="slide">
            <div class="slide-content">
                <h2>分支操作：变基 (Rebase)</h2>
                <p>除了合并，还可以使用 `rebase` (变基) 来整合分支。变基会提取当前分支的修改，然后将它们在目标分支的最新提交之后“重放”一遍，形成一条线性的提交历史。</p>
                <img src="./images/2-Rebase.png" alt="Rebase" style="max-width: 100%;">
                <pre><code>git checkout test
git rebase master</code></pre>
                <p><strong>Merge vs. Rebase</strong>: Merge保留了真实的分支历史，而Rebase创建了更整洁的线性历史。</p>
                <p>选择哪种方式取决于团队的协作规范(<a href="2-git-rebase-demo.html">查看演示</a>)。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>分支操作：优选 (Cherry-pick)</h2>
                <p>有时我们不需要合并整个分支，只想将另一个分支的某一个或几个特定的提交应用到当前分支。这时可以使用 <code>cherry-pick</code>。</p>
                <pre><code># 将指定的 commit 应用到当前分支
git cherry-pick &lt;commit_id&gt;</code></pre>
                <img src="./images/2-Cherry-pick.png" alt="Cherry-pick" style="max-width: 80%;">
                <p>这是一种非常灵活的分支内容整合方式(<a href="2-git-cherry-pick-demo.html">查看演示</a>)。</p>
            </div>
        </section>

        <!-- IDEA Section -->
        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (1/6)</h2>
                <h3>创建项目</h3>
                <p>虽然命令行很强大，但图形化界面（GUI）更直观。我们以IDEA为例。在创建新项目时，记得勾选“创建Git仓库”。</p>
                <img src="./images/2-IDEA create Git repository.png" alt="IDEA create Git repository" style="max-width: 100%;">
                <p>项目创建后，点击左下角的“版本控制”或“Git”标签，可以查看版本状态。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (2/6)</h2>
                <h3>添加文件到暂存区</h3>
                <p>新建一个 <code>hello.txt</code> 文件。此时文件名会显示为<span style="color: #D9534F;">红色</span>，表示它是一个未追踪的文件。</p>
                <img src="./images/2-Untracked files.png" alt="Untracked files (red)" style="max-width: 60%;">
                <p>右键点击文件 -> Git -> 添加 (Add)。</p>
                <img src="./images/2-Add files.png" alt="Add files" style="max-width: 80%;">
                <p>添加后，文件名变为<span style="color: #5CB85C;">绿色</span>，表示已进入暂存区。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (3/6)</h2>
                <h3>提交更改</h3>
                <p>点击工具栏上的提交按钮（通常是一个绿色的勾），打开提交窗口。</p>
                <img src="./images/2-Commit button.png" alt="Commit button" style="max-width: 100%;">
                <p>在窗口中输入提交信息，然后点击“提交”按钮。提交后，可以在Git日志中看到新的提交记录。</p>
                <img src="./images/2-Commit log.png" alt="Commit log" style="max-width: 100%;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (4/6)</h2>
                <h3>分支操作</h3>
                <p>点击IDEA右下角的分支名称（如 `master`），可以方便地进行分支操作。</p>
                <img src="./images/2-Branch menu.png" alt="Branch menu" style="max-width: 80%;">
                <p>选择“新建分支”，输入分支名（如 `dev`）即可创建并切换到新分支。在 `dev` 分支修改并提交后，Git日志图会清晰地展示出分支的演进。</p>
                <img src="./images/2-Branch graph.png" alt="Branch graph" style="max-width: 100%;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (5/6)</h2>
                <h3>合并与冲突解决</h3>
                <p>假设我们在 `master` 和 `dev` 分支上都修改了 `hello.txt`，现在要将 `dev` 合并到 `master`。</p>
                <ol>
                    <li>切换到 `master` 分支。</li>
                    <li>在分支菜单中选择 `dev` 分支，然后点击“合并到当前分支”。</li>
                </ol>
                <p>如果出现冲突，IDEA会弹出一个冲突解决窗口。</p>
                <img src="./images/2-Conflict resolution window.png" alt="Conflict resolution window" style="max-width: 100%;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>使用IDEA进行版本控制 (6/6)</h2>
                <h3>合并与冲突解决 (续)</h3>
                <p>在三栏视图中，左侧是你的更改，右侧是对方的更改，中间是最终合并结果。你可以点击箭头按钮选择接受哪个版本的更改，或者直接在中间一栏手动编辑。</p>
                <img src="./images/2-Three-column view.png" alt="Three-column view" style="max-width: 100%;">
                <p>解决所有冲突后，点击“应用”，然后完成合并提交。Git日志图会显示一个清晰的合并节点。</p>
                <img src="./images/2-Log after merge.png" alt="Log after merge" style="max-width: 100%;">
            </div>
        </section>

        <!-- Remote -->
        <section class="slide">
            <div class="slide-content">
                <h2>远程仓库</h2>
                <p>远程仓库是托管在服务器上的Git仓库，用于团队协作和代码备份。常见的平台有 GitHub, Gitee, GitLab 等。</p>
                <h3>远程账户认证 (SSH)</h3>
                <p>为了让远程仓库识别你的身份，通常使用SSH密钥进行认证。</p>
                <ol>
                    <li>生成SSH密钥对：<br><code>ssh-keygen -t rsa -C "your_email@example.com"</code></li>
                    <li>查看并复制公钥：<br><code>cat ~/.ssh/id_rsa.pub</code></li>
                    <li>将复制的公钥添加到Gitee或GitHub的 "SSH公钥" 设置中。</li>
                </ol>
                <p>这样，当你通过SSH协议与远程仓库交互时，服务器就能验证你的身份。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>远程操作：推送 (Push)</h2>
                <p>将本地仓库的提交推送到远程仓库。</p>
                <ol>
                    <li>在Gitee上创建一个新的空仓库。</li>
                    <li>将远程仓库地址关联到本地仓库，并命名为 `origin`：<br>
                    <pre><code>git remote add origin git@gitee.com:username/repo.git</code></pre>
                    </li>
                    <li>将本地 `master` 分支的提交推送到 `origin`：<br>
                    <pre><code>git push -u origin master</code></pre>
                    <small><code>-u</code> 选项会建立本地分支与远程分支的跟踪关系，之后可以直接使用 <code>git push</code>。</small>
                    </li>
                </ol>
                <img src="./images/2-Push successful.png" alt="Push successful" style="max-width: 100%;">
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>远程操作：克隆 (Clone)</h2>
                <p>从远程仓库复制一个完整的项目到本地，包括所有历史记录。</p>
                <pre><code>git clone git@gitee.com:username/repo.git</code></pre>
                <img src="./images/2-Clone principle.png" alt="Clone principle" style="max-width: 100%;">
                <p>克隆操作会自动将远程仓库设置为 `origin`，并建立本地 `master` 分支对远程 `master` 分支的跟踪。</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>远程操作：拉取 (Pull) & 抓取 (Fetch)</h2>
                <p>当团队其他成员向远程仓库推送了新的提交后，你需要更新你的本地仓库。</p>
                <h3><code>git fetch</code> (抓取)</h3>
                <p>从远程仓库下载最新的历史记录，但**不**会自动合并到你当前的工作分支。这让你有机会在合并前查看更改。</p>
                <pre><code>git fetch origin
# 查看抓取下来的分支
git branch -r
# 手动合并
git merge origin/master</code></pre>
                <h3><code>git pull</code> (拉取)</h3>
                <p>这是一个复合命令，相当于 <code>git fetch</code> + <code>git merge</code>。它会抓取最新内容并立即尝试合并到当前分支。</p>
                <pre><code>git pull origin master</code></pre>
            </div>
        </section>
        
        <section class="slide">
            <div class="slide-content">
                <h2>贡献开源社区</h2>
                <p>掌握了Git，你就可以参与到全球的开源项目中！通常的流程 (Fork & Pull Request) 如下：</p>
                <ol>
                    <li><strong>Fork</strong>: 在GitHub/Gitee上，将你感兴趣的项目“复刻”一份到你自己的账户下。</li>
                    <li><strong>Clone</strong>: 将你自己账户下的项目克隆到本地。</li>
                    <li><strong>Branch</strong>: 创建一个新的分支来开发你的新功能或修复bug。</li>
                    <li><strong>Commit & Push</strong>: 完成修改后，提交并推送到你自己远程仓库的新分支上。</li>
                    <li><strong>Pull Request (PR)</strong>: 在GitHub/Gitee上，向原始项目发起一个“拉取请求”，请求项目维护者将你的修改合并到主项目中。</li>
                </ol>
                <p>参考视频：<a href="https://player.bilibili.com/player.html?bvid=BV1p7411d7Fv&t=73&autoplay=0" target="_blank">如何向开源社区贡献代码</a></p>
            </div>
        </section>
        
        <section class="slide">
            <div class="slide-content">
                <h2>教程结束</h2>
                <p>恭喜你！你已经掌握了Git的核心概念和常用命令。</p>
                <p>版本控制是一项实践技能，请务必在你的项目中多多使用，熟能生巧。</p>
                <h3 style="margin-top: 40px;">接下来做什么？</h3>
                <ul>
                    <li>请通关这个<a href="https://learngitbranching.js.org/?locale=zh_CN">游戏</a>！！</li>
                    <li>尝试在自己的项目中使用Git进行版本管理。</li>
                    <li>学习使用图形化Git工具，如 SourceTree 或 VS Code 的 Git 插件。</li>
                    <li>参与一个简单的开源项目，提交你的第一个Pull Request！</li>
                </ul>
            </div>
        </section>

        <!-- UI Elements -->
        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div class="controls">
            <button id="prevBtn">上一页</button>
            <span id="slide-counter">1 / X</span>
            <button id="nextBtn">下一页</button>
        </div>
    </main>

    <script src="./js/ppt.js"></script>
    <script src="../prism/prism.js"></script>
    <script src="../prism/prism-autoloader.min.js"></script>
</body>
</html>