<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Stream APIè¯¦è§£</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/hacker-cmd.css">
    <link rel="stylesheet" href="./css/stream-style.css">
    <link rel="stylesheet" href="../prism/prism.css">
</head>
<body>

    <main id="presentation">
        <!-- Slide 1: Title -->
        <section class="slide title-slide active">
            <h1>Stream API</h1>
            <p>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆJavaï¼‰</p>
            <strong>å‘Šåˆ«ç¹ççš„å¾ªç¯ï¼Œæ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹</strong>
        </section>

        <!-- Slide 2: Traditional Collection Processing Pain Points -->
        <section class="slide">
            <div class="slide-content">
                <h2>ä¼ ç»Ÿé›†åˆå¤„ç†çš„ç—›ç‚¹</h2>
                <p><strong>åœºæ™¯ï¼š</strong>å¤„ç†ä¸€ä¸ªå­¦ç”Ÿåˆ—è¡¨ï¼Œæ‰¾å‡ºå¹´é¾„>18çš„å¥³ç”Ÿï¼ŒæŒ‰å§“åæ’åºï¼Œæå–å§“ååˆ—è¡¨</p>

                <h3>ğŸ”´ ä¼ ç»Ÿå†™æ³•çš„é—®é¢˜ï¼š</h3>
                <pre><code class="language-java">// éœ€è¦å¤šä¸ªä¸­é—´å˜é‡å’Œå¾ªç¯
List&lt;Student&gt; adults = new ArrayList&lt;&gt;();
for (Student s : students) {
    if (s.getAge() &gt; 18 &amp;&amp; s.getGender() == FEMALE) {
        adults.add(s);
    }
}

// è¿˜éœ€è¦æ‰‹åŠ¨æ’åº
adults.sort(Comparator.comparing(Student::getName));

// è¿˜éœ€è¦å†æå–å§“å
List&lt;String&gt; names = new ArrayList&lt;&gt;();
for (Student s : adults) {
    names.add(s.getName());
}</code></pre>

                <h3>ğŸ˜¤ ç—›ç‚¹æ€»ç»“ï¼š</h3>
                <ul>
                    <li><strong>ä»£ç å†—é•¿</strong>ï¼šéœ€è¦å¤šä¸ªä¸´æ—¶é›†åˆå’Œå¤šå±‚å¾ªç¯</li>
                    <li><strong>å‘½ä»¤å¼æ€ç»´</strong>ï¼šéœ€è¦å‘Šè¯‰è®¡ç®—æœº"å¦‚ä½•åš"ï¼Œè€Œé"åšä»€ä¹ˆ"</li>
                    <li><strong>å®¹æ˜“å‡ºé”™</strong>ï¼šæ‰‹åŠ¨ç®¡ç†çŠ¶æ€ï¼Œè¾¹ç•Œæ¡ä»¶å¤„ç†å¤æ‚</li>
                    <li><strong>å¯è¯»æ€§å·®</strong>ï¼šä¸šåŠ¡é€»è¾‘è¢«å¾ªç¯è¯­æ³•æ·¹æ²¡</li>
                    <li><strong>éš¾ä»¥å¹¶è¡ŒåŒ–</strong>ï¼šä¼ ç»Ÿå¾ªç¯éœ€è¦é‡å†™æ‰èƒ½å¹¶è¡Œå¤„ç†</li>
                </ul>
            </div>
        </section>

        <!-- Slide 3: "è¦æ˜¯èƒ½è¿™æ ·åšå°±å¥½äº†ï¼" - Introducing Stream -->
        <section class="slide">
            <div class="slide-content">
                <h2>"è¦æ˜¯èƒ½è¿™æ ·åšå°±å¥½äº†ï¼"</h2>
                <p>å¦‚æœæˆ‘ä»¬èƒ½ç”¨ç±»ä¼¼ä¸‹é¢çš„ä¼ªä»£ç æ¥è¡¨è¾¾æ•°æ®å¤„ç†é€»è¾‘ï¼Œé‚£è¯¥å¤šå¥½å•Šï¼</p>

                <h3>ğŸ’­ ç†æƒ³çš„ä¼ªä»£ç è¡¨è¾¾ï¼š</h3>
                <pre><code class="language-java">// ğŸ¯ ç†æƒ³æ–¹å¼ï¼šå£°æ˜å¼è¡¨è¾¾
æˆå¹´å¥³ç”Ÿå§“å = ä»(students)
    ä¸­ç­›é€‰(å¹´é¾„ >= 18 ä¸” æ€§åˆ« == "å¥³")
    æŒ‰å§“åæ’åº()
    æå–å§“å()
    æ”¶é›†åˆ°åˆ—è¡¨();

// ğŸ¯ ç¨å¾®è§„èŒƒåŒ–ä¸€ç‚¹ï¼šé“¾å¼è°ƒç”¨
result = students
    .filter(å¹´é¾„ >= 18)
    .filter(æ€§åˆ« == "å¥³")
    .sortBy(å§“å)
    .map(æå–å§“å)
    .collect(è½¬æˆåˆ—è¡¨);
</code></pre>

                <h3>âœ¨ ä¼ªä»£ç çš„ä¼˜åŠ¿ï¼š</h3>
                <ul>
                    <li><strong>æ¥è¿‘è‡ªç„¶è¯­è¨€</strong>ï¼šåƒè¯´è¯ä¸€æ ·æè¿°æ•°æ®å¤„ç†é€»è¾‘</li>
                    <li><strong>å…³æ³¨æ„å›¾</strong>ï¼šå…³å¿ƒ"åšä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"</li>
                    <li><strong>æ— ä¸­é—´å˜é‡</strong>ï¼šä¸éœ€è¦ä¸´æ—¶çš„é›†åˆå’Œè®¡æ•°å™¨</li>
                    <li><strong>é“¾å¼è°ƒç”¨</strong>ï¼šå¤šä¸ªæ“ä½œå¯ä»¥ä¸€æ°”å‘µæˆ</li>
                    <li><strong>ç®€æ´ä¼˜é›…</strong>ï¼šåŒæ ·çš„é€»è¾‘ï¼Œä»£ç é‡å‡å°‘70%</li>
                </ul>

                <h3>ğŸš€ ä¼ªä»£ç å¯¹åº”çš„å®é™…Streamä»£ç ï¼š</h3>
                <pre><code class="language-java">// Java Stream API - ç†æƒ³ç…§è¿›ç°å®ï¼
List&lt;String&gt; names = students.stream()
    .filter(student -> student.getAge() >= 18)      // ç­›é€‰ï¼šå¹´é¾„ >= 18
    .filter(student -> student.getGender() == FEMALE) // ç­›é€‰ï¼šæ€§åˆ« == å¥³
    .sorted(Comparator.comparing(Student::getName))   // æ’åºï¼šæŒ‰å§“å
    .map(Student::getName)                          // æå–ï¼šå§“å
    .collect(Collectors.toList());                    // æ”¶é›†ï¼šè½¬æˆåˆ—è¡¨

// ç­‰ä»·äºä¸€è¡Œè¡¨è¾¾å¼çš„å†™æ³•
List&lt;String&gt; names = students.stream()
    .filter(s -> s.getAge() >= 18 && s.getGender() == FEMALE)
    .sorted(Comparator.comparing(Student::getName))
    .map(Student::getName)
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ’¡ å…³é”®æ€ç»´è½¬å˜ï¼š</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="border: 1px solid #ddd; padding: 0.8rem; text-align: left;">ä¼ ç»Ÿæ€ç»´</th>
                            <th style="border: 1px solid #ddd; padding: 0.8rem; text-align: left;">Streamæ€ç»´</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">å‘Šè¯‰è®¡ç®—æœº<strong>å¦‚ä½•åš</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">å‘Šè¯‰è®¡ç®—æœº<strong>åšä»€ä¹ˆ</strong></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">å…³æ³¨<strong>è¿‡ç¨‹</strong>å’Œ<strong>æ­¥éª¤</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">å…³æ³¨<strong>ç»“æœ</strong>å’Œ<strong>è½¬æ¢</strong></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">éœ€è¦<strong>æ˜¾å¼ç®¡ç†</strong>ä¸­é—´çŠ¶æ€</td>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">æ¡†æ¶<strong>è‡ªåŠ¨ç®¡ç†</strong>æ•°æ®æµ</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">ä¿®æ”¹<strong>åŸæ•°æ®</strong>æˆ–åˆ›å»ºä¸´æ—¶å˜é‡</td>
                            <td style="border: 1px solid #ddd; padding: 0.8rem;">é€šè¿‡<strong>ä¸å¯å˜é“¾</strong>ç”Ÿæˆæ–°ç»“æœ</td>
                        </tr>
                    </tbody>
                </table>

                <p class="conclusion"><strong>Stream API å°±æ˜¯æŠŠè¿™äº›ç†æƒ³ä¼ªä»£ç å˜æˆäº†ç°å®ï¼<br>
                è®©æ•°æ®å¤„ç†å˜å¾—åƒå†™SQLæŸ¥è¯¢ä¸€æ ·ä¼˜é›…ç®€æ´ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 4: Stream API Overview and Operation Categories -->
        <section class="slide">
            <div class="slide-content">
                <h2>Stream API æ“ä½œåˆ†ç±»ä½“ç³»</h2>
                <p>Stream API æä¾›äº†ä¸°å¯Œçš„æ“ä½œæ–¹æ³•ï¼ŒæŒ‰åŠŸèƒ½å¯åˆ†ä¸ºä»¥ä¸‹10å¤§ç±»åˆ«ï¼š</p>

                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="border: 1px solid #ddd; padding: 0.6rem; text-align: left; font-size: 0.9rem;">æ“ä½œç±»åˆ«</th>
                            <th style="border: 1px solid #ddd; padding: 0.6rem; text-align: left; font-size: 0.9rem;">æ ¸å¿ƒæ–¹æ³•</th>
                            <th style="border: 1px solid #ddd; padding: 0.6rem; text-align: left; font-size: 0.9rem;">ä¸»è¦ç”¨é€”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>éå†æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">forEach()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">å¤„ç†æ¯ä¸ªå…ƒç´ </td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>ç­›é€‰æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">filter(), distinct()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">æ¡ä»¶è¿‡æ»¤å’Œå»é‡</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>æ˜ å°„æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">map(), flatMap()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">ç±»å‹è½¬æ¢å’Œæ‰å¹³åŒ–</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>æ’åºæ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">sorted()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">å…ƒç´ æ’åº</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>æå–æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">limit(), skip(), findFirst()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">é™åˆ¶æ•°é‡å’Œæå–å…ƒç´ </td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>ç»Ÿè®¡æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">count(), min(), max(), sum()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">ç»Ÿè®¡è®¡ç®—</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>è§„çº¦æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">reduce()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">è‡ªå®šä¹‰èšåˆé€»è¾‘</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>æ”¶é›†æ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">collect()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">é›†åˆè½¬æ¢ã€åˆ†ç»„ã€åˆ†åŒº</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>ç»„åˆæ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">concat()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">æµåˆå¹¶</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;"><strong>å¹¶è¡Œæ“ä½œ</strong></td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">parallel(), sequential()</td>
                            <td style="border: 1px solid #ddd; padding: 0.6rem;">å¹¶è¡Œå¤„ç†</td>
                        </tr>
                    </tbody>
                </table>

                <p class="conclusion"><strong>æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€ä¸€å­¦ä¹ æ¯ä¸ªæ“ä½œç±»åˆ«ï¼ŒæŒæ¡Stream APIçš„å¼ºå¤§åŠŸèƒ½ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 5: Traversal Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>éå†æ“ä½œ - forEach()</h2>
                <p><code>forEach()</code> ç”¨äºéå†Streamä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæ˜¯Streamä¸­æœ€åŸºæœ¬çš„æ“ä½œã€‚</p>

                <h3>ğŸ”´ ä¼ ç»Ÿå†™æ³•çš„ç—›ç‚¹ï¼š</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿçš„for-eachå¾ªç¯
for (Student student : students) {
    System.out.println("å­¦ç”Ÿå§“å: " + student.getName());
    System.out.println("å­¦ç”Ÿå¹´é¾„: " + student.getAge());
}

// ä¼ ç»Ÿforå¾ªç¯ï¼ˆéœ€è¦å¤„ç†ç´¢å¼•ï¼‰
for (int i = 0; i < students.size(); i++) {
    Student student = students.get(i);
    System.out.println("ç¬¬" + (i + 1) + "ä¸ªå­¦ç”Ÿ: " + student.getName());
}</code></pre>

                <h3>ğŸŸ¢ Stream forEach() è§£å†³æ–¹æ¡ˆï¼š</h3>
                <pre><code class="language-java">// ç®€æ´çš„forEach
students.stream()
    .forEach(student -> {
        System.out.println("å­¦ç”Ÿå§“å: " + student.getName());
        System.out.println("å­¦ç”Ÿå¹´é¾„: " + student.getAge());
    });

// ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼ˆæ›´ç®€æ´ï¼‰
students.stream()
    .forEach(System.out::println);

// å¸¦ç´¢å¼•çš„éå†ï¼ˆéœ€è¦é¢å¤–å¤„ç†ï¼‰
AtomicInteger index = new AtomicInteger(0);
students.stream()
    .forEach(student -> {
        System.out.println("ç¬¬" + (index.incrementAndGet()) + "ä¸ªå­¦ç”Ÿ: " + student.getName());
    });</code></pre>

                <h3>ğŸ’¡ ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼š</h3>
                <ul>
                    <li><strong>éå†å¤„ç†</strong>ï¼šéœ€è¦å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŒæ“ä½œæ—¶</li>
                    <li><strong>ç»ˆç«¯æ“ä½œ</strong>ï¼šforEachæ˜¯ç»ˆç«¯æ“ä½œï¼Œè°ƒç”¨åStreamç»“æŸ</li>
                    <li><strong>æ— è¿”å›å€¼</strong>ï¼šä¸èƒ½åœ¨forEachä¸­è¿”å›ç»“æœï¼Œé€‚åˆå‰¯ä½œç”¨æ“ä½œ</li>
                    <li><strong>å¹¶è¡Œå®‰å…¨</strong>ï¼šåœ¨å¹¶è¡ŒStreamä¸­è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜</li>
                </ul>

                <p class="conclusion"><strong>forEach() è®©éå†æ“ä½œæ›´åŠ ç®€æ´ï¼Œä½†è¦æ³¨æ„å®ƒæ˜¯ç»ˆç«¯æ“ä½œä¸”ä¸èƒ½æ”¹å˜Streamä¸­çš„å…ƒç´ ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 6: forEach() Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>forEach() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ forEach() å¦‚ä½•éå†Streamä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚ç‚¹å‡»"ä¸‹ä¸€æ­¥"æŒ‰é’®æ‰‹åŠ¨æ‰§è¡Œéå†æ“ä½œã€‚</p>

                <div id="forEach-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†forEach()å¦‚ä½•å¯¹Streamä¸­çš„æ¯ä¸ªå­¦ç”Ÿå¯¹è±¡æ‰§è¡Œéå†æ“ä½œï¼</strong></p>
            </div>
        </section>

        <!-- Slide 7: Filtering Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>ç­›é€‰æ“ä½œ - filter() å’Œ distinct()</h2>
                <p>ç­›é€‰æ“ä½œç”¨äºæ ¹æ®æ¡ä»¶è¿‡æ»¤å…ƒç´ ï¼Œæ˜¯Streamä¸­æœ€å¸¸ç”¨çš„æ“ä½œä¹‹ä¸€ã€‚</p>

                <h3>ğŸ” filter() - æ¡ä»¶è¿‡æ»¤</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - ç¹ç
List&lt;Student&gt; adults = new ArrayList&lt;&gt;();
for (Student s : students) {
    if (s.getAge() >= 18) {
        adults.add(s);
    }
}

// Streamå†™æ³• - ç®€æ´
List&lt;Student&gt; adults = students.stream()
    .filter(student -> student.getAge() >= 18)
    .collect(Collectors.toList());

// å¤æ‚æ¡ä»¶ç­›é€‰
List&lt;Student&gt; qualifiedStudents = students.stream()
    .filter(s -> s.getAge() >= 18 && s.getScore() > 80 && s.isActive())
    .collect(Collectors.toList());

// å¤šæ¬¡filteré“¾å¼è°ƒç”¨ï¼ˆå¯è¯»æ€§æ›´å¥½ï¼‰
List&lt;Student&gt; result = students.stream()
    .filter(s -> s.getAge() >= 18)           // å¹´é¾„ç­›é€‰
    .filter(s -> s.getScore() > 80)          // æˆç»©ç­›é€‰
    .filter(Student::isActive)                 // çŠ¶æ€ç­›é€‰
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ”„ distinct() - å»é‡ç­›é€‰</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦Setè¾…åŠ©
Set&lt;String&gt; uniqueNames = new HashSet&lt;&gt;();
List&lt;String&gt; uniqueNameList = new ArrayList&lt;&gt;();
for (Student s : students) {
    String name = s.getName();
    if (uniqueNames.add(name)) {  // Set.add()è¿”å›trueè¡¨ç¤ºå…ƒç´ ä¸å­˜åœ¨
        uniqueNameList.add(name);
    }
}

// Streamå†™æ³• - ä¼˜é›…
List&lt;String&gt; uniqueNames = students.stream()
    .map(Student::getName)
    .distinct()
    .collect(Collectors.toList());

// å¯¹è‡ªå®šä¹‰å¯¹è±¡å»é‡ï¼ˆéœ€è¦é‡å†™equalså’ŒhashCodeï¼‰
List&lt;Student&gt; uniqueStudents = students.stream()
    .distinct()
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ¯ å®é™…åº”ç”¨åœºæ™¯ï¼š</h3>
                <ul>
                    <li><strong>æ•°æ®æ¸…æ´—</strong>ï¼šè¿‡æ»¤æ— æ•ˆæ•°æ®ã€å»é™¤é‡å¤é¡¹</li>
                    <li><strong>æƒé™éªŒè¯</strong>ï¼šç­›é€‰ç¬¦åˆæƒé™çš„ç”¨æˆ·</li>
                    <li><strong>ä¸šåŠ¡è§„åˆ™</strong>ï¼šæ ¹æ®ä¸šåŠ¡æ¡ä»¶ç­›é€‰æ•°æ®</li>
                    <li><strong>èŒƒå›´ç­›é€‰</strong>ï¼šæ•°å€¼èŒƒå›´ã€æ—¥æœŸèŒƒå›´ç­‰</li>
                </ul>

              </div>
        </section>

        <!-- Slide 8: filter() and distinct() Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>filter() å’Œ distinct() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ filter() å¦‚ä½•æ ¹æ®æ¡ä»¶è¿‡æ»¤å…ƒç´ ï¼Œä»¥åŠ distinct() å¦‚ä½•å»é‡ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.filterDemo()">å¼€å§‹ç­›é€‰æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetFilter()">é‡ç½®</button>
                </div>

                <div id="filter-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†filter()çš„æ¡ä»¶è¿‡æ»¤å’Œdistinct()çš„å»é‡æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 9: Mapping Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>æ˜ å°„æ“ä½œ - map() å’Œ flatMap()</h2>
                <p>æ˜ å°„æ“ä½œç”¨äºè½¬æ¢Streamä¸­çš„å…ƒç´ ç±»å‹æˆ–ç»“æ„ï¼Œæ˜¯Stream APIçš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>

                <h3>ğŸ”„ map() - ç±»å‹è½¬æ¢</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦æ˜¾å¼å¾ªç¯
List&lt;String&gt; names = new ArrayList&lt;&gt;();
for (Student student : students) {
    names.add(student.getName());
}

// Streamå†™æ³• - ç®€æ´
List&lt;String&gt; names = students.stream()
    .map(Student::getName)
    .collect(Collectors.toList());

// å¤æ‚è½¬æ¢
List&lt;StudentDTO&gt; dtos = students.stream()
    .map(student -> {
        StudentDTO dto = new StudentDTO();
        dto.setName(student.getName());
        dto.setAge(student.getAge());
        return dto;
    })
    .collect(Collectors.toList());

// å¤šæ­¥è½¬æ¢
List&lt;Integer&gt; nameLengths = students.stream()
    .map(Student::getName)        // Student -> String
    .map(String::length)         // String -> Integer
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ“¦ flatMap() - æ‰å¹³åŒ–æ˜ å°„</h3>
                <pre><code class="language-java">// åœºæ™¯ï¼šå­¦ç”Ÿé€‰è¯¾åˆ—è¡¨ï¼Œè·å–æ‰€æœ‰è¯¾ç¨‹åç§°
List&lt;Student&gt; students = getStudents();

// ä¼ ç»Ÿå†™æ³• - åµŒå¥—å¾ªç¯
List&lt;String&gt; allCourses = new ArrayList&lt;&gt;();
for (Student student : students) {
    for (Course course : student.getCourses()) {
        allCourses.add(course.getName());
    }
}

// Streamå†™æ³• - ä½¿ç”¨flatMapæ‰å¹³åŒ–
List&lt;String&gt; allCourses = students.stream()
    .flatMap(student -> student.getCourses().stream())  // å°†List&lt;Course&gt;æ‰å¹³åŒ–ä¸ºStream&lt;Course&gt;
    .map(Course::getName)
    .distinct()
    .collect(Collectors.toList());

// å­—ç¬¦ä¸²åˆ†å‰²å¹¶æ‰å¹³åŒ–
List&lt;String&gt; words = Arrays.asList("hello world", "java stream", "functional programming")
    .stream()
    .flatMap(sentence -> Arrays.stream(sentence.split(" ")))
    .distinct()
    .collect(Collectors.toList());
// ç»“æœ: ["hello", "world", "java", "stream", "functional", "programming"]</code></pre>

                <h3>ğŸ”¢ åŸºæœ¬ç±»å‹æ˜ å°„ï¼š</h3>
                <pre><code class="language-java">// åŸºæœ¬ç±»å‹æ˜ å°„ - é¿å…è‡ªåŠ¨è£…ç®±
IntStream ages = students.stream()
    .mapToInt(Student::getAge);

DoubleStream scores = students.stream()
    .mapToDouble(Student::getScore);

LongStream ids = students.stream()
    .mapToLong(Student::getId);

// åŸºæœ¬ç±»å‹Streamçš„ä¼˜åŠ¿
double averageAge = students.stream()
    .mapToInt(Student::getAge)
    .average()
    .orElse(0.0);  // æ— éœ€Optionalå¤„ç†</code></pre>

                <p class="conclusion"><strong>æ˜ å°„æ“ä½œæ˜¯Streamçš„æ ¸å¿ƒï¼Œmap()ç”¨äºä¸€å¯¹ä¸€è½¬æ¢ï¼ŒflatMap()ç”¨äºä¸€å¯¹å¤šæ‰å¹³åŒ–ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 10: map() and flatMap() Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>map() å’Œ flatMap() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ map() å¦‚ä½•è½¬æ¢å…ƒç´ ç±»å‹ï¼Œä»¥åŠ flatMap() å¦‚ä½•æ‰å¹³åŒ–åµŒå¥—ç»“æ„ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.mapDemo()">å¼€å§‹æ˜ å°„æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetMap()">é‡ç½®</button>
                </div>

                <div id="map-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†map()çš„ç±»å‹è½¬æ¢å’ŒflatMap()çš„æ‰å¹³åŒ–æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 11: Sorting Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>æ’åºæ“ä½œ - sorted()</h2>
                <p>æ’åºæ“ä½œç”¨äºå¯¹Streamä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œæ”¯æŒè‡ªç„¶æ’åºå’Œè‡ªå®šä¹‰æ’åºã€‚</p>

                <h3>ğŸ“Š sorted() - åŸºç¡€æ’åº</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - ä¿®æ”¹åŸé›†åˆ
List&lt;Student&gt; students = new ArrayList&lt;&gt;(originalStudents);
Collections.sort(students);

// æˆ–è€…ä½¿ç”¨Comparator
students.sort(Comparator.comparing(Student::getScore));

// Streamå†™æ³• - ä¸ä¿®æ”¹åŸé›†åˆ
List&lt;Student&gt; sortedStudents = students.stream()
    .sorted()  // è‡ªç„¶æ’åºï¼ˆéœ€è¦å®ç°Comparableï¼‰
    .collect(Collectors.toList());

// ä½¿ç”¨Comparatoræ’åº
List&lt;Student&gt; sortedByScore = students.stream()
    .sorted(Comparator.comparing(Student::getScore))
    .collect(Collectors.toList());

// é™åºæ’åº
List&lt;Student&gt; sortedByScoreDesc = students.stream()
    .sorted(Comparator.comparing(Student::getScore).reversed())
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ¯ å¤æ‚æ’åºè§„åˆ™ï¼š</h3>
                <pre><code class="language-java">// å¤šçº§æ’åºï¼šå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰æˆç»©ï¼Œæœ€åæŒ‰å§“å
List&lt;Student&gt; multiSort = students.stream()
    .sorted(Comparator
        .comparing(Student::getAge)           // ä¸€çº§æ’åºï¼šå¹´é¾„
        .thenComparing(Student::getScore)     // äºŒçº§æ’åºï¼šæˆç»©
        .thenComparing(Student::getName))      // ä¸‰çº§æ’åºï¼šå§“å
    .collect(Collectors.toList());

// è‡ªå®šä¹‰æ’åºè§„åˆ™
List&lt;Student&gt; customSort = students.stream()
    .sorted((s1, s2) -> {
        // è‡ªå®šä¹‰å¤æ‚æ’åºé€»è¾‘
        int scoreCompare = Double.compare(s2.getScore(), s1.getScore());  // æˆç»©é™åº
        if (scoreCompare != 0) return scoreCompare;
        return s1.getName().compareTo(s2.getName());  // å§“åå‡åº
    })
    .collect(Collectors.toList());</code></pre>

                <h3>âš¡ æ’åºæ€§èƒ½è€ƒè™‘ï¼š</h3>
                <pre><code class="language-java">// æ’åºåä½¿ç”¨limit()è·å–å‰Nå - æ€§èƒ½ä¼˜åŒ–
List&lt;Student&gt; top3Students = students.stream()
    .sorted(Comparator.comparing(Student::getScore).reversed())
    .limit(3)  // åªå–å‰3åï¼Œå‡å°‘æ’åºå¼€é”€
    .collect(Collectors.toList());

// æ³¨æ„ï¼šåœ¨å¹¶è¡ŒStreamä¸­ä½¿ç”¨sorted()å¯èƒ½å½±å“æ€§èƒ½
List&lt;Student&gt; sortedResult = students.parallelStream()
    .sorted(Comparator.comparing(Student::getScore))
    .collect(Collectors.toList());  // å¹¶è¡Œæ’åºå¼€é”€è¾ƒå¤§</code></pre>

                <h3>ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯ï¼š</h3>
                <ul>
                    <li><strong>æ’è¡Œæ¦œ</strong>ï¼šæŒ‰æˆç»©ã€åˆ†æ•°ç­‰æ’åº</li>
                    <li><strong>æ•°æ®å±•ç¤º</strong>ï¼šæŒ‰æ—¶é—´ã€å­—æ¯é¡ºåºå±•ç¤º</li>
                    <li><strong>ä¼˜å…ˆçº§å¤„ç†</strong>ï¼šæŒ‰é‡è¦æ€§ã€ç´§æ€¥ç¨‹åº¦æ’åº</li>
                    <li><strong>æ•°æ®åˆ†æ</strong>ï¼šæœ‰åºçš„æ•°æ®å¤„ç†</li>
                </ul>
            </div>
        </section>

        <!-- Slide 12: sorted() Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>sorted() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ sorted() å¦‚ä½•å¯¹Streamä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.sortedDemo()">å¼€å§‹æ’åºæ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetSorted()">é‡ç½®</button>
                </div>

                <div id="sorted-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†sorted()å¦‚ä½•é‡æ–°æ’åˆ—Streamä¸­å…ƒç´ çš„é¡ºåºï¼</strong></p>
            </div>
        </section>

        <!-- Slide 13: Extraction Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>æå–æ“ä½œ - limit(), skip(), findFirst(), findAny()</h2>
                <p>æå–æ“ä½œç”¨äºä»Streamä¸­è·å–ç‰¹å®šæ•°é‡æˆ–ç‰¹å®šä½ç½®çš„å…ƒç´ ã€‚</p>

                <h3>âœ‚ï¸ limit() å’Œ skip() - æ•°é‡æ§åˆ¶</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦ç´¢å¼•æ§åˆ¶
List&lt;Student&gt; first5Students = new ArrayList&lt;&gt;();
for (int i = 0; i < Math.min(5, students.size()); i++) {
    first5Students.add(students.get(i));
}

// Streamå†™æ³• - ç®€æ´
List&lt;Student&gt; first5Students = students.stream()
    .limit(5)  // åªå–å‰5ä¸ªå…ƒç´ 
    .collect(Collectors.toList());

// åˆ†é¡µæ“ä½œ
int pageSize = 10;
int pageNumber = 2;  // ç¬¬2é¡µ
List&lt;Student&gt; pageData = students.stream()
    .skip((pageNumber - 1) * pageSize)  // è·³è¿‡å‰é¢çš„å…ƒç´ 
    .limit(pageSize)                     // å–å½“å‰é¡µçš„å…ƒç´ 
    .collect(Collectors.toList());

// è·å–ä¸­é—´éƒ¨åˆ†
List&lt;Student&gt; middlePart = students.stream()
    .skip(5)      // è·³è¿‡å‰5ä¸ª
    .limit(10)    // å–æ¥ä¸‹æ¥çš„10ä¸ª
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ¯ findFirst() å’Œ findAny() - å…ƒç´ æå–</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦å¾ªç¯å’Œåˆ¤æ–­
Student firstAdult = null;
for (Student student : students) {
    if (student.getAge() >= 18) {
        firstAdult = student;
        break;
    }
}

// Streamå†™æ³• - ä¼˜é›…
Optional&lt;Student&gt; firstAdult = students.stream()
    .filter(student -> student.getAge() >= 18)
    .findFirst();

// findAny() - åœ¨å¹¶è¡ŒStreamä¸­æ€§èƒ½æ›´å¥½
Optional&lt;Student&gt; anyAdult = students.parallelStream()
    .filter(student -> student.getAge() >= 18)
    .findAny();

// å¤„ç†Optionalç»“æœ
String name = firstAdult
    .map(Student::getName)
    .orElse("æœªæ‰¾åˆ°æˆå¹´å­¦ç”Ÿ");</code></pre>

                <h3>ğŸš€ çŸ­è·¯æ“ä½œä¼˜åŠ¿ï¼š</h3>
                <pre><code class="language-java">// çŸ­è·¯æ“ä½œ - æé«˜æ€§èƒ½
boolean hasHighScorer = students.stream()
    .anyMatch(student -> student.getScore() > 95);  // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°±è¿”å›

// vs ä¼ ç»Ÿå†™æ³• - éœ€è¦éå†æ‰€æœ‰å…ƒç´ 
boolean hasHighScorer2 = false;
for (Student student : students) {
    if (student.getScore() > 95) {
        hasHighScorer2 = true;
        break;
    }
}</code></pre>

                <h3>ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯ï¼š</h3>
                <ul>
                    <li><strong>åˆ†é¡µåŠŸèƒ½</strong>ï¼šskip() + limit() å®ç°åˆ†é¡µ</li>
                    <li><strong>æ•°æ®é‡‡æ ·</strong>ï¼šlimit() è·å–æ ·æœ¬æ•°æ®</li>
                    <li><strong>å¿«é€ŸæŸ¥æ‰¾</strong>ï¼šfindFirst() æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹</li>
                    <li><strong>æ¡ä»¶æ£€æŸ¥</strong>ï¼šanyMatch() æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </li>
                </ul>
            </div>
        </section>

        <!-- Slide 14: limit/skip Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>limit() å’Œ skip() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ limit() å¦‚ä½•é™åˆ¶æ•°é‡ï¼Œä»¥åŠ skip() å¦‚ä½•è·³è¿‡å…ƒç´ ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.skipLimitDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetSkipLimit()">é‡ç½®</button>
                </div>

                <div id="skipLimit-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†limit()å’Œskip()çš„æ•°é‡æ§åˆ¶æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 15: Statistical Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>ç»Ÿè®¡æ“ä½œ - count(), min(), max(), sum(), average()</h2>
                <p>ç»Ÿè®¡æ“ä½œç”¨äºå¯¹Streamä¸­çš„å…ƒç´ è¿›è¡Œæ•°é‡ç»Ÿè®¡å’Œæ•°å€¼è®¡ç®—ã€‚</p>

                <h3>ğŸ”¢ count() - è®¡æ•°æ“ä½œ</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦è®¡æ•°å™¨
int adultCount = 0;
for (Student student : students) {
    if (student.getAge() >= 18) {
        adultCount++;
    }
}

// Streamå†™æ³• - ç®€æ´
long adultCount = students.stream()
    .filter(student -> student.getAge() >= 18)
    .count();

// ç»Ÿè®¡ä¸åŒæ¡ä»¶ä¸‹çš„æ•°é‡
Map&lt;String, Long&gt; countByGender = students.stream()
    .collect(Collectors.groupingBy(
        Student::getGender,
        Collectors.counting()
    ));</code></pre>

                <h3>ğŸ“Š min() å’Œ max() - æœ€å€¼æŸ¥æ‰¾</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦æ‰‹åŠ¨æ¯”è¾ƒ
Student oldestStudent = null;
int maxAge = Integer.MIN_VALUE;
for (Student student : students) {
    if (student.getAge() > maxAge) {
        maxAge = student.getAge();
        oldestStudent = student;
    }
}

// Streamå†™æ³• - ä¼˜é›…
Optional&lt;Student&gt; oldestStudent = students.stream()
    .max(Comparator.comparing(Student::getAge));

Optional&lt;Student&gt; youngestStudent = students.stream()
    .min(Comparator.comparing(Student::getAge));

// è·å–æœ€å€¼çš„å…·ä½“å±æ€§
int maxAge = students.stream()
    .mapToInt(Student::getAge)
    .max()
    .orElse(0);

// åŒé‡æœ€å€¼ï¼šå¹´é¾„æœ€å¤§çš„å­¦ç”Ÿä¸­æˆç»©æœ€é«˜çš„
Optional&lt;Student&gt; bestInOldest = students.stream()
    .filter(s -> s.getAge() == students.stream()
        .mapToInt(Student::getAge)
        .max()
        .orElse(0))
    .max(Comparator.comparing(Student::getScore));</code></pre>

                <h3>â• sum(), average() - èšåˆè®¡ç®—</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦ç´¯åŠ å™¨
double totalScore = 0;
int validCount = 0;
for (Student student : students) {
    if (student.getScore() > 0) {
        totalScore += student.getScore();
        validCount++;
    }
}
double averageScore = validCount > 0 ? totalScore / validCount : 0;

// Streamå†™æ³• - ç®€æ´å®‰å…¨
double totalScore = students.stream()
    .mapToDouble(Student::getScore)
    .sum();

double averageScore = students.stream()
    .mapToDouble(Student::getScore)
    .average()
    .orElse(0.0);

// å¤æ‚ç»Ÿè®¡
IntSummaryStatistics stats = students.stream()
    .mapToInt(Student::getAge)
    .summaryStatistics();

System.out.println("å¹´é¾„ç»Ÿè®¡:");
System.out.println("äººæ•°: " + stats.getCount());
System.out.println("å¹³å‡å¹´é¾„: " + stats.getAverage());
System.out.println("æœ€å°å¹´é¾„: " + stats.getMin());
System.out.println("æœ€å¤§å¹´é¾„: " + stats.getMax());
System.out.println("å¹´é¾„æ€»å’Œ: " + stats.getSum());</code></pre>

                <h3>ğŸ¯ é«˜çº§ç»Ÿè®¡æ“ä½œï¼š</h3>
                <pre><code class="language-java">// æŒ‰ç»„ç»Ÿè®¡
Map&lt;String, Double&gt; averageScoreByMajor = students.stream()
    .collect(Collectors.groupingBy(
        Student::getMajor,
        Collectors.averagingDouble(Student::getScore)
    ));

// å¤šé‡ç»Ÿè®¡
Map&lt;String, IntSummaryStatistics&gt; detailedStats = students.stream()
    .collect(Collectors.groupingBy(
        Student::getMajor,
        Collectors.summarizingInt(Student::getAge)
    ));</code></pre>

                <p class="conclusion"><strong>ç»Ÿè®¡æ“ä½œè®©æ•°æ®èšåˆå˜å¾—ç®€å•ï¼Œç‰¹åˆ«æ˜¯é…åˆåŸºæœ¬ç±»å‹Streamä½¿ç”¨æ•ˆæœæ›´ä½³ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 16: max/min Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>max() å’Œ min() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ max() å¦‚ä½•æŸ¥æ‰¾æœ€å¤§å€¼ï¼Œä»¥åŠ min() å¦‚ä½•æŸ¥æ‰¾æœ€å°å€¼ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.maxMinDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetMaxMin()">é‡ç½®</button>
                </div>

                <div id="maxMin-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†max()å’Œmin()çš„æœ€å€¼æŸ¥æ‰¾æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 17: Reduction Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>è§„çº¦æ“ä½œ - reduce()</h2>
                <p>reduce() æ“ä½œç”¨äºå°†Streamä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™"è§„çº¦"æˆä¸€ä¸ªå€¼ï¼Œæ˜¯æœ€çµæ´»çš„èšåˆæ“ä½œã€‚</p>

                <h3>ğŸ”„ åŸºç¡€reduce() - æ±‚å’Œç¤ºä¾‹</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - æ˜¾å¼ç´¯åŠ 
double totalScore = 0;
for (Student student : students) {
    totalScore += student.getScore();
}

// Streamå†™æ³• - reduce()è§„çº¦
Optional&lt;Double&gt; totalScore = students.stream()
    .map(Student::getScore)
    .reduce((score1, score2) -> score1 + score2);

// å¸¦åˆå§‹å€¼çš„reduce() - é¿å…Optional
double totalScoreWithInit = students.stream()
    .map(Student::getScore)
    .reduce(0.0, Double::sum);

// ä½¿ç”¨æ–¹æ³•å¼•ç”¨æ›´ç®€æ´
double totalScoreMethodRef = students.stream()
    .map(Student::getScore)
    .reduce(0.0, Double::sum);</code></pre>

                <h3>âš™ï¸ è‡ªå®šä¹‰è§„çº¦é€»è¾‘</h3>
                <pre><code class="language-java">// æ‰¾å‡ºæœ€é«˜åˆ†çš„å­¦ç”Ÿ
Optional&lt;Student&gt; topStudent = students.stream()
    .reduce((s1, s2) -> s1.getScore() > s2.getScore() ? s1 : s2);

// å­—ç¬¦ä¸²æ‹¼æ¥ - ä¼ ç»Ÿæ–¹å¼
String allNames1 = students.stream()
    .map(Student::getName)
    .reduce("", (name1, name2) -> name1 + ", " + name2);

// å­—ç¬¦ä¸²æ‹¼æ¥ - æ›´ä¼˜é›…çš„æ–¹å¼
String allNames2 = students.stream()
    .map(Student::getName)
    .collect(Collectors.joining(", "));

// å¤æ‚å¯¹è±¡è§„çº¦ - è®¡ç®—åŠ æƒå¹³å‡
WeightedAverageResult weightedAvg = students.stream()
    .reduce(
        new WeightedAverageResult(0.0, 0.0),  // åˆå§‹å€¼
        (result, student) -> new WeightedAverageResult(
            result.totalScore + student.getScore() * student.getCredit(),
            result.totalCredit + student.getCredit()
        ),
        (result1, result2) -> new WeightedAverageResult(
            result1.totalScore + result2.totalScore,
            result1.totalCredit + result2.totalCredit
        )
    );</code></pre>

                <h3>ğŸ¯ reduce() vs collect() çš„é€‰æ‹©</h3>
                <pre><code class="language-java">// reduce() - è¿”å›å•ä¸€å€¼ï¼Œé€‚åˆèšåˆæ“ä½œ
Integer maxValue = numbers.stream()
    .reduce(Integer::max)
    .orElse(0);

// collect() - è¿”å›é›†åˆï¼Œé€‚åˆæ”¶é›†æ“ä½œ
List&lt;Integer&gt; positiveNumbers = numbers.stream()
    .filter(n -> n > 0)
    .collect(Collectors.toList());

// reduce() - è‡ªå®šä¹‰èšåˆé€»è¾‘
String concatenated = words.stream()
    .reduce("", String::concat);

// collect() - æ ‡å‡†æ”¶é›†æ“ä½œ
List&lt;String&gt; wordList = words.stream()
    .collect(Collectors.toList());</code></pre>

                <h3>âš¡ æ€§èƒ½è€ƒè™‘ï¼š</h3>
                <ul>
                    <li><strong>å¹¶è¡Œå®‰å…¨</strong>ï¼šreduce()éœ€è¦æ»¡è¶³ç»“åˆå¾‹æ‰èƒ½å®‰å…¨å¹¶è¡Œæ‰§è¡Œ</li>
                    <li><strong>åˆå§‹å€¼é€‰æ‹©</strong>ï¼šå¸¦åˆå§‹å€¼çš„reduce()å¯ä»¥é¿å…Optionalå¤„ç†</li>
                    <li><strong>èº«ä»½å…ƒç´ </strong>ï¼šåˆå§‹å€¼åº”è¯¥æ˜¯æ“ä½œçš„èº«ä»½å…ƒç´ ï¼ˆå¦‚åŠ æ³•çš„0ã€ä¹˜æ³•çš„1ï¼‰</li>
                    <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºç®€å•èšåˆï¼Œä¼˜å…ˆä½¿ç”¨ä¸“é—¨çš„ç»Ÿè®¡æ–¹æ³•ï¼ˆsumã€countç­‰ï¼‰</li>
                </ul>

                <p class="conclusion"><strong>reduce() æ˜¯Streamä¸­æœ€å¼ºå¤§çš„èšåˆæ“ä½œï¼Œå¯ä»¥å®ç°ä»»ä½•è‡ªå®šä¹‰çš„èšåˆé€»è¾‘ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 18: reduce Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>reduce() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ reduce() å¦‚ä½•å°†Streamä¸­çš„å…ƒç´ è§„çº¦æˆå•ä¸ªå€¼ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.reduceDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetReduce()">é‡ç½®</button>
                </div>

                <div id="reduce-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†reduce()çš„è§„çº¦æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 19: Collection Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>æ”¶é›†æ“ä½œ - collect()</h2>
                <p>collect() æ˜¯Streamçš„ç»ˆç«¯æ“ä½œï¼Œç”¨äºå°†Streamä¸­çš„å…ƒç´ æ”¶é›†åˆ°å®¹å™¨ä¸­ï¼Œæ˜¯æœ€çµæ´»çš„ç»“æœæ”¶é›†æ–¹å¼ã€‚</p>

                <h3>ğŸ“¦ åŸºç¡€æ”¶é›†æ“ä½œ</h3>
                <pre><code class="language-java">// æ”¶é›†åˆ°List
List&lt;Student&gt; studentList = students.stream()
    .filter(s -> s.getAge() >= 18)
    .collect(Collectors.toList());

// æ”¶é›†åˆ°Setï¼ˆè‡ªåŠ¨å»é‡ï¼‰
Set&lt;String&gt; uniqueNames = students.stream()
    .map(Student::getName)
    .collect(Collectors.toSet());

// æ”¶é›†åˆ°å…·ä½“é›†åˆç±»å‹
ArrayList&lt;Student&gt; arrayList = students.stream()
    .filter(s -> s.getScore() > 80)
    .collect(Collectors.toCollection(ArrayList::new));

// æ”¶é›†åˆ°Map - ç®€å•æ˜ å°„
Map&lt;Integer, Student&gt; studentMap = students.stream()
    .collect(Collectors.toMap(
        Student::getId,      // key mapper
        student -> student   // value mapper
    ));

// æ”¶é›†åˆ°Map - å¤„ç†é‡å¤é”®
Map&lt;String, Student&gt; nameToStudent = students.stream()
    .collect(Collectors.toMap(
        Student::getName,           // key mapper
        student -> student,         // value mapper
        (existing, replacement) -> existing  // åˆå¹¶å‡½æ•°ï¼šä¿ç•™ç°æœ‰å€¼
    ));</code></pre>

                <h3>ğŸ“Š åˆ†ç»„æ“ä½œ - groupingBy()</h3>
                <pre><code class="language-java">// æŒ‰ä¸“ä¸šåˆ†ç»„
Map&lt;String, List&lt;Student&gt;&gt; studentsByMajor = students.stream()
    .collect(Collectors.groupingBy(Student::getMajor));

// åˆ†ç»„å¹¶ç»Ÿè®¡æ¯ç»„æ•°é‡
Map&lt;String, Long&gt; countByMajor = students.stream()
    .collect(Collectors.groupingBy(
        Student::getMajor,
        Collectors.counting()
    ));

// åˆ†ç»„å¹¶è®¡ç®—å¹³å‡æˆç»©
Map&lt;String, Double&gt; avgScoreByMajor = students.stream()
    .collect(Collectors.groupingBy(
        Student::getMajor,
        Collectors.averagingDouble(Student::getScore)
    ));

// å¤šçº§åˆ†ç»„
Map&lt;String, Map&lt;String, List&lt;Student&gt;&gt;&gt; multiLevelGroup = students.stream()
    .collect(Collectors.groupingBy(
        Student::getMajor,                    // ä¸€çº§åˆ†ç»„ï¼šä¸“ä¸š
        Collectors.groupingBy(student -> {   // äºŒçº§åˆ†ç»„ï¼šå¹´é¾„æ®µ
            int age = student.getAge();
            if (age < 18) return "æœªæˆå¹´";
            else if (age < 25) return "é’å¹´";
            else return "æˆå¹´";
        })
    ));</code></pre>

                <h3>âœ‚ï¸ åˆ†åŒºæ“ä½œ - partitioningBy()</h3>
                <pre><code class="language-java">// æŒ‰æ˜¯å¦æˆå¹´åˆ†åŒºï¼ˆåªè¿”å›true/falseä¸¤ä¸ªç»„ï¼‰
Map&lt;Boolean, List&lt;Student&gt;&gt; byAdult = students.stream()
    .collect(Collectors.partitioningBy(
        student -> student.getAge() >= 18
    ));

// åˆ†åŒºå¹¶è¿›è¡Œè¿›ä¸€æ­¥æ”¶é›†
Map&lt;Boolean, String&gt; namesByAdult = students.stream()
    .collect(Collectors.partitioningBy(
        student -> student.getAge() >= 18,
        Collectors.mapping(
            Student::getName,
            Collectors.joining(", ")
        )
    ));</code></pre>

                <h3>ğŸ¯ é«˜çº§æ”¶é›†æ“ä½œ</h3>
                <pre><code class="language-java">// æ”¶é›†ç»Ÿè®¡ä¿¡æ¯
IntSummaryStatistics ageStats = students.stream()
    .collect(Collectors.summarizingInt(Student::getAge));

// æŒ‰æ¡ä»¶æ”¶é›†ï¼ˆç±»ä¼¼SQLçš„CASE WHENï¼‰
Map&lt;String, List&lt;Student&gt;&gt; scoreCategories = students.stream()
    .collect(Collectors.groupingBy(student -> {
        double score = student.getScore();
        if (score >= 90) return "ä¼˜ç§€";
        else if (score >= 80) return "è‰¯å¥½";
        else if (score >= 70) return "ä¸­ç­‰";
        else if (score >= 60) return "åŠæ ¼";
        else return "ä¸åŠæ ¼";
    }));

// è‡ªå®šä¹‰æ”¶é›†å™¨
String result = students.stream()
    .collect(CustomCollector.toCustomString());</code></pre>

                <h3>ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯ï¼š</h3>
                <ul>
                    <li><strong>æ•°æ®æŠ¥è¡¨</strong>ï¼šåˆ†ç»„ç»Ÿè®¡ã€æ±‡æ€»è®¡ç®—</li>
                    <li><strong>æ•°æ®è½¬æ¢</strong>ï¼šListåˆ°Mapã€Setç­‰å®¹å™¨è½¬æ¢</li>
                    <li><strong>æ•°æ®åˆ†æ</strong>ï¼šæŒ‰å¤šç»´åº¦åˆ†ç±»ç»Ÿè®¡</li>
                    <li><strong>ç»“æœå°è£…</strong>ï¼šå°†Streamç»“æœè½¬æ¢ä¸ºä¸šåŠ¡å¯¹è±¡</li>
                </ul>
            </div>
        </section>

        <!-- Slide 20: collect Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>collect() æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ collect() å¦‚ä½•å°†Streamä¸­çš„å…ƒç´ æ”¶é›†åˆ°å®¹å™¨ä¸­ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.collectDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetCollect()">é‡ç½®</button>
                </div>

                <div id="collect-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†collect()çš„æ”¶é›†æ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 21: Combination and Parallel Operations -->
        <section class="slide">
            <div class="slide-content">
                <h2>ç»„åˆå’Œå¹¶è¡Œæ“ä½œ</h2>
                <p>Streamçš„ç»„åˆå’Œå¹¶è¡Œæ“ä½œæä¾›äº†æ›´å¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›å’Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>

                <h3>ğŸ”— concat() - æµåˆå¹¶æ“ä½œ</h3>
                <pre><code class="language-java">// ä¼ ç»Ÿå†™æ³• - éœ€è¦æ‰‹åŠ¨åˆå¹¶é›†åˆ
List&lt;Student&gt; allStudents = new ArrayList&lt;&gt;(undergraduates);
allStudents.addAll(graduateStudents);
allStudents.addAll(exchangeStudents);

// Streamå†™æ³• - æµåˆå¹¶
Stream&lt;Student&gt; allStudentStream = Stream.concat(
    Stream.concat(undergraduates.stream(), graduateStudents.stream()),
    exchangeStudents.stream()
);

// å¤šä¸ªæµåˆå¹¶
Stream&lt;Student&gt; mergedStream = Stream.of(
        undergraduates.stream(),
        graduateStudents.stream(),
        exchangeStudents.stream()
    )
    .flatMap(Function.identity());  // æ‰å¹³åŒ–åˆå¹¶

// åˆå¹¶åè¿›è¡Œç»Ÿä¸€å¤„ç†
List&lt;String&gt; allStudentNames = Stream.concat(
    undergraduates.stream(),
    graduateStudents.stream()
)
.filter(student -> student.isActive())  // ç»Ÿä¸€ç­›é€‰
.map(Student::getName)               // ç»Ÿä¸€æ˜ å°„
.collect(Collectors.toList());        // ç»Ÿä¸€æ”¶é›†</code></pre>

                <h3>âš¡ parallel() - å¹¶è¡Œå¤„ç†</h3>
                <pre><code class="language-java">// ä¸²è¡Œå¤„ç†ï¼ˆé»˜è®¤ï¼‰
List&lt;Student&gt; result1 = students.stream()
    .filter(s -> s.getAge() >= 18)
    .collect(Collectors.toList());

// å¹¶è¡Œå¤„ç† - ä¸€è¡Œä»£ç å®ç°
List&lt;Student&gt; result2 = students.parallelStream()  // ç›´æ¥åˆ›å»ºå¹¶è¡Œæµ
    .filter(s -> s.getAge() >= 18)
    .collect(Collectors.toList());

// æˆ–è€…ä½¿ç”¨parallel()æ–¹æ³•è½¬æ¢
List&lt;Student&gt; result3 = students.stream()
    .parallel()  // è½¬æ¢ä¸ºå¹¶è¡Œæµ
    .filter(s -> s.getAge() >= 18)
    .collect(Collectors.toList());

// ä¸²è¡Œå’Œå¹¶è¡Œæ··åˆä½¿ç”¨
students.stream()
    .filter(s -> s.getMajor().equals("è®¡ç®—æœºç§‘å­¦"))  // ä¸²è¡Œï¼šç®€å•ç­›é€‰
    .parallel()                                      // å¹¶è¡Œï¼šå¤æ‚è®¡ç®—
    .map(this::calculateComplexScore)                // å¹¶è¡Œè®¡ç®—
    .sequential()                                    // ä¸²è¡Œï¼šæœ‰åºæ”¶é›†
    .sorted(Comparator.comparing(Student::getScore))
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸš€ å¹¶è¡Œå¤„ç†æ€§èƒ½ä¼˜åŒ–</h3>
                <pre><code class="language-java">// æ€§èƒ½æµ‹è¯•ç¤ºä¾‹
List&lt;Integer&gt; largeList = IntStream.range(0, 1_000_000)
    .boxed()
    .collect(Collectors.toList());

// ä¸²è¡Œå¤„ç†æ—¶é—´
long start = System.currentTimeMillis();
long sum1 = largeList.stream()
    .mapToLong(Integer::longValue)
    .filter(n -> n % 2 == 0)
    .sum();
long serialTime = System.currentTimeMillis() - start;

// å¹¶è¡Œå¤„ç†æ—¶é—´
start = System.currentTimeMillis();
long sum2 = largeList.parallelStream()
    .mapToLong(Integer::longValue)
    .filter(n -> n % 2 == 0)
    .sum();
long parallelTime = System.currentTimeMillis() - start;

System.out.println("ä¸²è¡Œæ—¶é—´: " + serialTime + "ms");
System.out.println("å¹¶è¡Œæ—¶é—´: " + parallelTime + "ms");
System.out.println("åŠ é€Ÿæ¯”: " + (double) serialTime / parallelTime);</code></pre>

                <h3>âš ï¸ å¹¶è¡Œå¤„ç†æ³¨æ„äº‹é¡¹ï¼š</h3>
                <pre><code class="language-java">// é€‚åˆå¹¶è¡Œå¤„ç†çš„åœºæ™¯
List&lt;ComplexData&gt; result = largeDataSet.parallelStream()
    .filter(data -> data.isValid())           // æ— çŠ¶æ€è¿‡æ»¤
    .map(this::expensiveComputation)        // CPUå¯†é›†å‹æ“ä½œ
    .collect(Collectors.toList());

// ä¸é€‚åˆå¹¶è¡Œå¤„ç†çš„åœºæ™¯
List&lt;Integer&gt; result2 = smallList.stream()     // æ•°æ®é‡å°
    .sorted()                               // é¡ºåºæ•æ„Ÿæ“ä½œ
    .limit(5)                               // çŸ­è·¯æ“ä½œ
    .collect(Collectors.toList());

// çº¿ç¨‹å®‰å…¨é—®é¢˜ç¤ºä¾‹
List&lt;StringBuilder&gt; unsafeResult = students.parallelStream()
    .collect(ArrayList::new,                 // è¿™é‡Œæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼
             (list, student) -> list.add(new StringBuilder(student.getName())),
             List::addAll);

// æ­£ç¡®çš„çº¿ç¨‹å®‰å…¨å†™æ³•
List&lt;String&gt; safeResult = students.parallelStream()
    .map(Student::getName)
    .collect(Collectors.toList());  // ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ”¶é›†å™¨</code></pre>

                <h3>ğŸ’¡ æœ€ä½³å®è·µå»ºè®®ï¼š</h3>
                <ul>
                    <li><strong>æ•°æ®é‡åˆ¤æ–­</strong>ï¼šé€šå¸¸è¶…è¿‡10000ä¸ªå…ƒç´ æ‰è€ƒè™‘å¹¶è¡Œ</li>
                    <li><strong>æ“ä½œç±»å‹</strong>ï¼šCPUå¯†é›†å‹æ“ä½œé€‚åˆå¹¶è¡Œï¼ŒIOå¯†é›†å‹ä¸é€‚åˆ</li>
                    <li><strong>æ— çŠ¶æ€æ“ä½œ</strong>ï¼šç¡®ä¿æ“ä½œå‡½æ•°æ˜¯æ— çŠ¶æ€çš„</li>
                    <li><strong>æ€§èƒ½æµ‹è¯•</strong>ï¼šå®é™…æµ‹è¯•å¹¶è¡Œæ˜¯å¦å¸¦æ¥æ€§èƒ½æå‡</li>
                    <li><strong>é¿å…è¿‡åº¦å¹¶è¡Œ</strong>ï¼šåµŒå¥—å¹¶è¡Œæµä¼šé™ä½æ€§èƒ½</li>
                </ul>
            </div>
        </section>

        <!-- Slide 22: parallel Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¹¶è¡Œå¤„ç†æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£ parallelStream() å¦‚ä½•è¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.parallelDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetParallel()">é‡ç½®</button>
                </div>

                <div id="parallel-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†å¹¶è¡Œå¤„ç†çš„å¹¶è¡Œæ“ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 23: Comprehensive Practical Example -->
        <section class="slide">
            <div class="slide-content">
                <h2>ç»¼åˆå®æˆ˜æ¡ˆä¾‹ - å­¦ç”Ÿæˆç»©åˆ†æç³»ç»Ÿ</h2>
                <p>ç»“åˆå¤šä¸ªStreamæ“ä½œï¼Œå®ç°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚</p>

                <h3>ğŸ“‹ ä¸šåŠ¡åœºæ™¯ï¼šå­¦ç”Ÿæˆç»©å¤šç»´åº¦åˆ†æ</h3>
                <pre><code class="language-java">// è¾“å…¥æ•°æ®ï¼šList&lt;Student&gt; students = getAllStudents();

// ç»¼åˆåˆ†æéœ€æ±‚ï¼š
// 1. ç­›é€‰æ´»è·ƒå­¦ç”Ÿ
// 2. æŒ‰ä¸“ä¸šåˆ†ç»„
// 3. è®¡ç®—æ¯ä¸ªä¸“ä¸šçš„ç»Ÿè®¡ä¿¡æ¯
// 4. æ‰¾å‡ºå„ä¸“ä¸šçš„ä¼˜ç§€å­¦ç”Ÿ
// 5. ç”Ÿæˆç»¼åˆæŠ¥å‘Š</code></pre>

                <h3>ğŸ”§ ç»¼åˆè§£å†³æ–¹æ¡ˆï¼š</h3>
                <pre><code class="language-java">public class StudentAnalysisReport {
    public void generateComprehensiveReport(List&lt;Student&gt; students) {
        // 1. ç­›é€‰æ´»è·ƒå­¦ç”Ÿå¹¶æŒ‰ä¸“ä¸šåˆ†ç»„
        Map&lt;String, List&lt;Student&gt;&gt; activeByMajor = students.stream()
            .filter(Student::isActive)                    // ç­›é€‰æ“ä½œ
            .collect(Collectors.groupingBy(Student::getMajor));  // åˆ†ç»„æ“ä½œ

        // 2. è®¡ç®—å„ä¸“ä¸šç»Ÿè®¡ä¿¡æ¯
        Map&lt;String, MajorStatistics&gt; statisticsMap = activeByMajor.entrySet()
            .stream()
            .collect(Collectors.toMap(
                Map.Entry::getKey,
                entry -> calculateMajorStatistics(entry.getValue())
            ));

        // 3. æ‰¾å‡ºå„ä¸“ä¸šå‰3åä¼˜ç§€å­¦ç”Ÿ
        Map&lt;String, List&lt;Student&gt;&gt; topStudentsByMajor = activeByMajor.entrySet()
            .stream()
            .collect(Collectors.toMap(
                Map.Entry::getKey,
                entry -> entry.getValue().stream()
                    .sorted(Comparator.comparing(Student::getScore).reversed())
                    .limit(3)
                    .collect(Collectors.toList())
            ));

        // 4. ç”Ÿæˆæ’åå‰10çš„å…¨æ ¡ä¼˜ç§€å­¦ç”Ÿ
        List&lt;Student&gt; top10Overall = students.stream()
            .filter(Student::isActive)
            .sorted(Comparator
                .comparing(Student::getScore).reversed()
                .thenComparing(Student::getName))
            .limit(10)
            .collect(Collectors.toList());

        // 5. æŒ‰å¹´é¾„æ®µåˆ†ææˆç»©åˆ†å¸ƒ
        Map&lt;String, Double&gt; averageScoreByAgeGroup = students.stream()
            .filter(Student::isActive)
            .collect(Collectors.groupingBy(
                student -> {
                    int age = student.getAge();
                    if (age < 18) return "18å²ä»¥ä¸‹";
                    else if (age < 22) return "18-21å²";
                    else if (age < 25) return "22-24å²";
                    else return "25å²ä»¥ä¸Š";
                },
                Collectors.averagingDouble(Student::getScore)
            ));

        // 6. è¾“å‡ºç»¼åˆæŠ¥å‘Š
        printComprehensiveReport(statisticsMap, topStudentsByMajor,
                              top10Overall, averageScoreByAgeGroup);
    }

    private MajorStatistics calculateMajorStatistics(List&lt;Student&gt; majorStudents) {
        IntSummaryStatistics ageStats = majorStudents.stream()
            .mapToInt(Student::getAge)
            .summaryStatistics();

        DoubleSummaryStatistics scoreStats = majorStudents.stream()
            .mapToDouble(Student::getScore)
            .summaryStatistics();

        long highScoreCount = majorStudents.stream()
            .mapToLong(s -> s.getScore() >= 90 ? 1 : 0)
            .sum();

        return new MajorStatistics(
            majorStudents.size(),
            ageStats.getAverage(),
            scoreStats.getAverage(),
            scoreStats.getMax(),
            highScoreCount
        );
    }
}</code></pre>

                <h3>ğŸ“Š å¤æ‚æ•°æ®è½¬æ¢ç¤ºä¾‹ï¼š</h3>
                <pre><code class="language-java">// å­¦ç”Ÿè¯¾ç¨‹æˆç»©è½¬æ¢å’Œç»Ÿè®¡
public List&lt;StudentCourseSummary&gt; generateCourseSummary(List&lt;Student&gt; students) {
    return students.stream()
        .filter(Student::isActive)                                    // ç­›é€‰æ´»è·ƒå­¦ç”Ÿ
        .flatMap(student -> student.getCourses().stream()               // æ‰å¹³åŒ–è¯¾ç¨‹åˆ—è¡¨
            .map(course -> new StudentCourseInfo(student, course)))     // ç»„åˆå­¦ç”Ÿå’Œè¯¾ç¨‹ä¿¡æ¯
        .collect(Collectors.groupingBy(                                // æŒ‰è¯¾ç¨‹åˆ†ç»„
            StudentCourseInfo::getCourseId,
            Collectors.collectingAndThen(
                Collectors.toList(),
                courseInfos -> {
                    double averageScore = courseInfos.stream()
                        .mapToDouble(StudentCourseInfo::getScore)
                        .average()
                        .orElse(0.0);

                    long passCount = courseInfos.stream()
                        .mapToLong(info -> info.getScore() >= 60 ? 1 : 0)
                        .sum();

                    return new StudentCourseSummary(
                        courseInfos.get(0).getCourseName(),
                        courseInfos.size(),
                        averageScore,
                        (double) passCount / courseInfos.size() * 100
                    );
                }
            )
        ))
        .values()
        .stream()
        .sorted(Comparator.comparing(StudentCourseSummary::getAverageScore).reversed())
        .collect(Collectors.toList());
}</code></pre>

                <h3>âš¡ æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š</h3>
                <pre><code class="language-java">// å¤§æ•°æ®é‡å¤„ç†ä¼˜åŒ–
public void processLargeDataSet(List&lt;LargeData&gt; largeDataSet) {
    // å¹¶è¡Œå¤„ç† + çŸ­è·¯æ“ä½œä¼˜åŒ–
    List&lt;LargeData&gt; result = largeDataSet.parallelStream()
        .filter(this::quickFilter)              // å¿«é€Ÿç­›é€‰
        .filter(this::complexFilter)             // å¤æ‚ç­›é€‰
        .map(this::expensiveTransformation)     // CPUå¯†é›†å‹è½¬æ¢
        .distinct()                            // å»é‡
        .sorted(Comparator.comparing(LargeData::getPriority))
        .limit(1000)                          // çŸ­è·¯æ“ä½œï¼Œé¿å…å¤„ç†å¤šä½™æ•°æ®
        .collect(Collectors.toList());

    // æ‰¹é‡å¤„ç†ä¼˜åŒ–
    int batchSize = 1000;
    List&lt;List&lt;LargeData&gt;&gt; batches = IntStream.range(0, (largeDataSet.size() + batchSize - 1) / batchSize)
        .mapToObj(i -> largeDataSet.subList(i * batchSize, Math.min((i + 1) * batchSize, largeDataSet.size())))
        .collect(Collectors.toList());

    batches.parallelStream()
        .forEach(this::processBatch);
}</code></pre>

                <p class="conclusion"><strong>Stream APIçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥çµæ´»ç»„åˆå„ç§æ“ä½œï¼Œå®ç°å¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 24: fullChain Animation Demo -->
        <section class="slide">
            <div class="slide-content">
                <h2>å®Œæ•´é“¾å¼æ“ä½œåŠ¨ç”»æ¼”ç¤º</h2>
                <p>è§‚çœ‹åŠ¨ç”»æ¼”ç¤ºï¼Œç†è§£å®Œæ•´Streamé“¾å¼æ“ä½œçš„å·¥ä½œè¿‡ç¨‹ã€‚</p>

                <div class="animation-controls">
                    <button onclick="StreamAnimation.fullChainDemo()">å¼€å§‹æ¼”ç¤º</button>
                    <button onclick="StreamAnimation.resetFullChain()">é‡ç½®</button>
                </div>

                <div id="fullChain-animation" class="stream-demo"></div>

                <p class="conclusion"><strong>åŠ¨ç”»å±•ç¤ºäº†å®Œæ•´Streamé“¾å¼æ“ä½œçš„å·¥ä½œè¿‡ç¨‹ï¼</strong></p>
            </div>
        </section>

        <!-- Slide 25: Best Practices and Performance Tips -->
        <section class="slide">
            <div class="slide-content">
                <h2>æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–</h2>
                <p>æŒæ¡Stream APIçš„ä½¿ç”¨æŠ€å·§ï¼Œè®©ä½ çš„ä»£ç æ—¢ä¼˜é›…åˆé«˜æ•ˆï¼</p>

                <h3>âœ… ä½¿ç”¨åœºæ™¯åˆ¤æ–­</h3>
                <pre><code class="language-java">// é€‚åˆä½¿ç”¨Streamçš„åœºæ™¯
public void goodStreamUsage() {
    // 1. å¤æ‚æ•°æ®è½¬æ¢
    List&lt;StudentDTO&gt; dtos = students.stream()
        .filter(Student::isActive)
        .map(this::convertToDTO)
        .sorted(Comparator.comparing(StudentDTO::getScore))
        .collect(Collectors.toList());

    // 2. æ•°æ®èšåˆç»Ÿè®¡
    Map&lt;String, Long&gt; countByMajor = students.stream()
        .collect(Collectors.groupingBy(Student::getMajor, Collectors.counting()));

    // 3. å¤§æ•°æ®é‡å¤„ç†
    List&lt;Result&gt; results = largeDataSet.parallelStream()
        .filter(this::heavyFilter)
        .map(this::heavyComputation)
        .collect(Collectors.toList());
}

// ä¸é€‚åˆä½¿ç”¨Streamçš„åœºæ™¯
public void avoidStreamOveruse() {
    // 1. ç®€å•éå† - ä¼ ç»Ÿforæ›´æ¸…æ™°
    for (Student student : students) {
        System.out.println(student.getName());
    }
    // è€Œä¸æ˜¯ï¼šstudents.stream().forEach(s -> System.out.println(s.getName()));

    // 2. éœ€è¦ç´¢å¼•çš„æ“ä½œ
    for (int i = 0; i < students.size(); i++) {
        Student student = students.get(i);
        System.out.println("åºå·" + i + ": " + student.getName());
    }

    // 3. éœ€è¦ä¿®æ”¹åŸé›†åˆçš„æ“ä½œ
    List&lt;Student&gt; copy = new ArrayList&lt;&gt;(students);
    copy.removeIf(s -> !s.isActive());  // ç›´æ¥ä¿®æ”¹ï¼Œæ›´é«˜æ•ˆ
}</code></pre>

                <h3>ğŸš€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
                <pre><code class="language-java">// 1. ä½¿ç”¨åŸºæœ¬ç±»å‹Streamé¿å…è£…ç®±
IntStream ages = students.stream()
    .mapToInt(Student::getAge);  // é¿å…Integerè£…ç®±

DoubleStream scores = students.stream()
    .mapToDouble(Student::getScore);  // é¿å…Doubleè£…ç®±

// 2. åˆç†ä½¿ç”¨çŸ­è·¯æ“ä½œ
List&lt;Student&gt; topStudents = students.stream()
    .sorted(Comparator.comparing(Student::getScore).reversed())
    .limit(10)  // åªå¤„ç†éœ€è¦çš„æ•°é‡ï¼Œå‡å°‘æ’åºå¼€é”€
    .collect(Collectors.toList());

// 3. é¿å…å¤šæ¬¡æ”¶é›†
// ä¸æ¨èï¼šå¤šæ¬¡collect
List&lt;Student&gt; filtered = students.stream()
    .filter(s -> s.getAge() >= 18)
    .collect(Collectors.toList());
List&lt;String&gt; names = filtered.stream()
    .map(Student::getName)
    .collect(Collectors.toList());

// æ¨èï¼šä¸€æ¬¡é“¾å¼è°ƒç”¨
List&lt;String&gt; namesOptimized = students.stream()
    .filter(s -> s.getAge() >= 18)
    .map(Student::getName)
    .collect(Collectors.toList());

// 4. é¢„ç¼–è¯‘Comparator
private static final Comparator&lt;Student&gt; SCORE_COMPARATOR =
    Comparator.comparing(Student::getScore);

List&lt;Student&gt; sorted = students.stream()
    .sorted(SCORE_COMPARATOR)
    .collect(Collectors.toList());</code></pre>

                <h3>ğŸ”§ è°ƒè¯•æŠ€å·§</h3>
                <pre><code class="language-java">// ä½¿ç”¨peek()è¿›è¡Œè°ƒè¯•
List&lt;Student&gt; result = students.stream()
    .filter(s -> s.getAge() >= 18)
    .peek(s -> System.out.println("è¿‡æ»¤å: " + s.getName()))  // è°ƒè¯•ç‚¹1
    .map(Student::getName)
    .peek(name -> System.out.println("æ˜ å°„å: " + name))    // è°ƒè¯•ç‚¹2
    .filter(name -> name.length() > 2)
    .collect(Collectors.toList());

// è‡ªå®šä¹‰è°ƒè¯•æ”¶é›†å™¨
public class DebuggingCollector&lt;T&gt; implements Collector&lt;T, ?, List&lt;T&gt;&gt; {
    private final String prefix;

    @Override
    public Supplier&lt;List&lt;T&gt;&gt; supplier() {
        System.out.println(prefix + " - å¼€å§‹æ”¶é›†");
        return ArrayList::new;
    }

    @Override
    public BiConsumer&lt;List&lt;T&gt;, T&gt; accumulator() {
        return (list, item) -> {
            System.out.println(prefix + " - æ·»åŠ å…ƒç´ : " + item);
            list.add(item);
        };
    }

    // ... å…¶ä»–æ–¹æ³•
}</code></pre>

                <h3>âš ï¸ å¸¸è§é™·é˜±é¿å…</h3>
                <pre><code class="language-java">// 1. é¿å…ä¿®æ”¹Streamä¸­çš„å…ƒç´ 
// é”™è¯¯ï¼šå°è¯•ä¿®æ”¹Streamä¸­çš„å…ƒç´ 
List&lt;Student&gt; result = students.stream()
    .peek(student -> student.setScore(student.getScore() + 10))  // å‰¯ä½œç”¨ï¼
    .collect(Collectors.toList());

// æ­£ç¡®ï¼šåœ¨mapä¸­åˆ›å»ºæ–°å¯¹è±¡
List&lt;Student&gt; result = students.stream()
    .map(student -> {
        Student newStudent = new Student(student);
        newStudent.setScore(student.getScore() + 10);
        return newStudent;
    })
    .collect(Collectors.toList());

// 2. é¿å…é‡å¤æ“ä½œ
// é”™è¯¯ï¼šé‡å¤è®¡ç®—
students.stream().mapToInt(Student::getScore).sum();
students.stream().mapToInt(Student::getScore).average();

// æ­£ç¡®ï¼šä¸€æ¬¡æ€§è®¡ç®—
IntSummaryStatistics stats = students.stream()
    .mapToInt(Student::getScore)
    .summaryStatistics();
double sum = stats.getSum();
double average = stats.getAverage();

// 3. æ³¨æ„å¹¶è¡ŒStreamçš„çº¿ç¨‹å®‰å…¨
// é”™è¯¯ï¼šéçº¿ç¨‹å®‰å…¨çš„æ“ä½œ
List&lt;StringBuilder&gt; result = students.parallelStream()
    .collect(ArrayList::new,
             (list, student) -> list.add(new StringBuilder(student.getName())),
             List::addAll);

// æ­£ç¡®ï¼šä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ–¹å¼
List&lt;String&gt; result = students.parallelStream()
    .map(Student::getName)
    .collect(Collectors.toList());</code></pre>

                <p class="conclusion"><strong>Stream API æ˜¯å¼ºå¤§çš„å·¥å…·ï¼Œä½†è¦ç†æ€§ä½¿ç”¨ï¼<br>
                ç®€å•æ“ä½œç”¨ä¼ ç»Ÿæ–¹å¼ï¼Œå¤æ‚å¤„ç†ç”¨Streamä¼˜é›…è§£å†³ï¼Œæ€§èƒ½ä¼˜åŒ–è¦å…·ä½“åˆ†æï¼</strong></p>
            </div>
        </section>

        <!-- UI Elements -->
        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div class="controls">
            <button id="prevBtn">ä¸Šä¸€é¡µ</button>
            <span id="slide-counter">1 / X</span>
            <button id="nextBtn">ä¸‹ä¸€é¡µ</button>
        </div>
    </main>

    <script src="../prism/prism.js"></script>
    <script src="../prism/prism-autoloader.min.js"></script>
    <script src="./js/ppt.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/stream-animation.js"></script>
</body>
</html>