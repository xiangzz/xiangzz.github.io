<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§ä½œä¸šï¼šJava Webæ¡†æ¶</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/animation.css">
    <link rel="stylesheet" href="../prism/prism.css">
    <style>
        .reference-section {
            margin-top: 3rem;
            text-align: center;
        }
        .reference-title {
            font-size: 1.2rem;
            color: var(--text-color);
            margin-bottom: 1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .reference-title::before, .reference-title::after {
            content: "";
            height: 1px;
            width: 50px;
            background-color: var(--primary-color);
            opacity: 0.5;
        }
        .reference-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .reference-links a {
            text-decoration: none;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 10px 20px;
            border-radius: 25px; /* Pill shape for better affordance */
            transition: all 0.3s ease;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .reference-links a:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .reference-links a::before {
            content: "ğŸ“„"; /* Document icon */
            font-size: 1.1em;
        }
    </style>
</head>

<body>

    <main id="presentation">
        <!-- Slide 1: Title -->
        <section class="slide title-slide active">
            <h1>Java Webæ¡†æ¶å®æˆ˜</h1>
            <p>Java Web Framework in Practice</p>
            <strong>ä»é›¶æ„å»ºè½»é‡çº§HTTPæœåŠ¡æ¡†æ¶Jinitamy</strong>
            <div class="reference-section">
                <div class="reference-title">å‰ç½®çŸ¥è¯†ï¼šä½ åº”è¯¥å…ˆé˜…è¯»ä»¥ä¸‹Nettyåº“çš„å°æ•™ç¨‹</div>
                <div class="reference-links">
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/qf427nkl41pd1lba" target="_blank">ç›®å½•ï¼šNettyåŸºç¡€</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/bsbo6x2e9kecg7ya" target="_blank">1.åŸºç¡€æ¶æ„è®¾è®¡</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/glsbsm9svlda8gnc" target="_blank">2.ç®¡é“å¤„ç†æœºåˆ¶</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/eux08pzw0rfgm4w1" target="_blank">3.ç¼“å†²åŒºç®¡ç†</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/gfemioewg3grxtof" target="_blank">4.HTTPåè®®æ”¯æŒ</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/sa4bm583t6m698q2" target="_blank">5.å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹</a>
                    <a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/kxiys2wx3vxsat02" target="_blank">6.TCPæ€§èƒ½è°ƒä¼˜</a>
                </div>
            </div>
        </section>

        <!-- Slide 2: éœ€æ±‚åˆ†æ -->
        <section class="slide">
            <div class="slide-content">
                <h2>éœ€æ±‚åˆ†æï¼šè½»é‡çº§æœ¬åœ°Webæ¡†æ¶</h2>
                <div class="section">
                    <h3>1. æ¦‚è¿°</h3>
                    <p>æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªè½»é‡çº§çš„æœ¬åœ° Web/HTTP æ¡†æ¶ã€‚æ ¸å¿ƒè¦æ±‚æ˜¯èƒ½å¤Ÿä»¥æœ€å°‘çš„ä¾èµ–åœ¨æœ¬åœ°ç¯å¢ƒä¸­å¯åŠ¨ä¸€ä¸ª HTTP æœåŠ¡ã€‚æ¡†æ¶éœ€å…·å¤‡çµæ´»çš„è·¯ç”±ã€å¯æ‰©å±•çš„ä¸­é—´ä»¶æœºåˆ¶ä»¥åŠç»Ÿä¸€çš„è¯·æ±‚å¤„ç†ä¸Šä¸‹æ–‡ã€‚</p>
                </div>

                <div class="section">
                    <h3>1.1 ä»€ä¹ˆæ˜¯ Web æ¡†æ¶ï¼Ÿ</h3>
                    <img src="images/18-2-web-framework.png" alt="Webæ¡†æ¶æ¦‚å¿µå›¾" class="concept-image" style="width: 80%;">
                    <p>Web æ¡†æ¶æä¾›äº†ä¸€å¥—æ ‡å‡†çš„å·¥å…·ã€ç»„ä»¶å’Œè§„åˆ™ï¼Œç”¨äºæ„å»º Web åº”ç”¨ç¨‹åºã€‚å®ƒå¤„ç†äº†è®¸å¤šé€šç”¨çš„ã€é‡å¤æ€§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š</p>
                    <ul>
                        <li><strong>ç›‘å¬å’Œå“åº”ç½‘ç»œè¯·æ±‚</strong>ï¼šå¦‚ä½•æ¥æ”¶æ¥è‡ªæµè§ˆå™¨çš„ HTTP è¯·æ±‚å¹¶å‘å…¶å‘é€å›ä¸€ä¸ªå“åº”ï¼Ÿ</li>
                        <li><strong>è·¯ç”±ï¼ˆRoutingï¼‰</strong>ï¼šå¦‚ä½•æ ¹æ®ç”¨æˆ·è®¿é—®çš„ URLï¼ˆä¾‹å¦‚ <code>/home</code> æˆ– <code>/users/123</code>ï¼‰æ¥å†³å®šæ‰§è¡Œå“ªä¸€æ®µä»£ç ï¼Ÿ</li>
                        <li><strong>æ•°æ®å¤„ç†</strong>ï¼šå¦‚ä½•è§£æç”¨æˆ·æäº¤çš„æ•°æ®ï¼Ÿå¦‚ä½•ç»„ç»‡å’Œç®¡ç†å“åº”å†…å®¹ï¼Ÿ</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>1.2 Webæ¡†æ¶çš„ä¾‹å­</h3>
                    <img src="images/18-2-web-framework-example.png" alt="Webæ¡†æ¶å·¥ä½œæµç¨‹å›¾" class="workflow-image" style="width: 80%;">
                    <p>å½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ <code>http://localhost:8080/hello</code> æ—¶ï¼š</p>
                    <ol>
                        <li><strong>ç›‘å¬ä¸æ¥æ”¶</strong>ï¼šæœåŠ¡å™¨åœ¨ <code>8080</code> ç«¯å£ä¸Š"ç›‘å¬"ï¼Œæ•æ‰è¯·æ±‚ä¿¡å·</li>
                        <li><strong>è§£æè¯·æ±‚</strong>ï¼šå°†åŸå§‹è¯·æ±‚æ•°æ®è§£ææˆç»“æ„åŒ–å¯¹è±¡</li>
                        <li><strong>è·¯ç”±åˆ†å‘</strong>ï¼šæ£€æŸ¥è¯·æ±‚çš„è·¯å¾„ <code>/hello</code>ï¼Œåœ¨"è·¯ç”±è¡¨"ä¸­æŸ¥æ‰¾</li>
                        <li><strong>æ‰§è¡Œå¤„ç†å™¨</strong>ï¼šè°ƒç”¨ä¸è¯¥è·¯ç”±å…³è”çš„ä¸šåŠ¡é€»è¾‘ä»£ç </li>
                        <li><strong>å¤„ç†ä¸šåŠ¡é€»è¾‘</strong>ï¼šå¤„ç†å™¨æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œå‡†å¤‡å“åº”æ•°æ®</li>
                        <li><strong>æ„å»ºå“åº”</strong>ï¼šæ¡†æ¶æ„å»ºæ ‡å‡† HTTP å“åº”</li>
                        <li><strong>å‘é€å“åº”</strong>ï¼šå°† HTTP å“åº”å‘é€å›æµè§ˆå™¨</li>
                        <li><strong>æµè§ˆå™¨æ¸²æŸ“</strong>ï¼šæµè§ˆå™¨æ˜¾ç¤ºå“åº”å†…å®¹</li>
                    </ol>
                </div>

                <div class="section">
                    <h3>2. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚</h3>

                    <h4>2.1. HTTP æœåŠ¡</h4>
                    <p>HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€å¹¿æ³›çš„ç½‘ç»œåè®®ã€‚ä¸€ä¸ª HTTP æœåŠ¡å°±æ˜¯ä¸€ä¸ªæŒç»­è¿è¡Œçš„è®¡ç®—æœºç¨‹åºï¼Œå®ƒçš„ä¸»è¦èŒè´£æ˜¯"ç›‘å¬"ç‰¹å®šç½‘ç»œç«¯å£ä¸Šçš„ HTTP è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚çš„å†…å®¹ç»™äºˆå“åº”ã€‚</p>
                    <ul>
                        <li><strong>æœ¬åœ°å¯åŠ¨</strong>ï¼šé¡¹ç›®åº”æ”¯æŒä¸€é”®å¯åŠ¨ HTTP æœåŠ¡ï¼Œå¯¹å¤–éƒ¨ä¾èµ–é™è‡³æœ€ä½</li>
                        <li><strong>åº•å±‚æŠ€æœ¯</strong>ï¼šåŸºäº <b>Netty</b> æ„å»ºè¿™ä¸ª HTTP æœåŠ¡</li>
                    </ul>

                    <h4>2.2. è·¯ç”±ç³»ç»Ÿï¼ˆRouterï¼‰</h4>
                    <p>è·¯ç”±ç³»ç»Ÿçš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š<b>å»ºç«‹ URL å’Œå¤„ç†ä»£ç ä¹‹é—´çš„æ˜ å°„å…³ç³»</b>ã€‚</p>
                    <ul>
                        <li><strong>è¯·æ±‚æ–¹æ³•</strong>ï¼šå¿…é¡»æ”¯æŒ <code>GET</code> å’Œ <code>POST</code> è¯·æ±‚</li>
                        <li><strong>è·¯å¾„åŒ¹é…</strong>ï¼šæ”¯æŒé™æ€è·¯å¾„ï¼ˆ<code>/about</code>ï¼‰ã€åŠ¨æ€å‚æ•°ï¼ˆ<code>/users/:id</code>ï¼‰ã€é€šé…ç¬¦ï¼ˆ<code>/static/*</code>ï¼‰</li>
                        <li><strong>åŒ¹é…é€»è¾‘</strong>ï¼šé‡‡ç”¨å‰ç¼€æ ‘ï¼ˆTrieï¼‰æ€æƒ³å®ç°ï¼Œä¿è¯é«˜æ•ˆæŸ¥æ‰¾</li>
                    </ul>

                    <h4>2.3. ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</h4>
                    <p>ä¸­é—´ä»¶æ˜¯å‡½æ•°é“¾ä¸­çš„ä¸€ç¯ï¼Œè´Ÿè´£å¤„ç†ç‰¹å®šä»»åŠ¡ã€‚è¯·æ±‚åƒæµæ°´çº¿äº§å“ï¼Œä¾æ¬¡æµç»å„ä¸ªä¸­é—´ä»¶ï¼Œæ¯ä¸ªä¸­é—´ä»¶éƒ½å¯¹å…¶è¿›è¡Œä¸€äº›"åŠ å·¥"ã€‚</p>
                    <ul>
                        <li><strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong>ï¼šå¤„ç†æ—¥å¿—è®°å½•ã€ç”¨æˆ·è®¤è¯ã€æ•°æ®å‹ç¼©ç­‰é€šç”¨åŠŸèƒ½</li>
                        <li><strong>é“¾å¼å¤„ç†</strong>ï¼šæ”¯æŒæ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªä¸­é—´ä»¶ï¼Œå½¢æˆå¤„ç†é“¾</li>
                        <li><strong>æ§åˆ¶èƒ½åŠ›</strong>ï¼šä¸­é—´ä»¶å¯ä»¥ä¸­æ–­ï¼ˆä¸è°ƒç”¨ <code>next</code>ï¼‰æˆ–ç»§ç»­ï¼ˆè°ƒç”¨ <code>next</code>ï¼‰å¤„ç†é“¾</li>
                    </ul>

                    <h4>2.4. è¯·æ±‚ä¸Šä¸‹æ–‡ (Context)</h4>
                    <p>Context æ˜¯ HTTP è¯·æ±‚çš„"èº«ä»½è¯"å’Œ"æ¡£æ¡ˆè¢‹"ï¼Œè®°å½•äº†å…³äºè¿™æ¬¡è¯·æ±‚çš„ä¸€åˆ‡ä¿¡æ¯ã€‚</p>
                    <ul>
                        <li><strong>ä¿¡æ¯èšåˆ</strong>ï¼šå°† Request å’Œ Response çš„æ‰€æœ‰æ•°æ®å°è£…åœ¨ç»Ÿä¸€å¯¹è±¡ä¸­</li>
                        <li><strong>æ•°æ®ä¼ é€’</strong>ï¼šåœ¨ä¸­é—´ä»¶ä¸æœ€ç»ˆå¤„ç†å™¨ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢</li>
                        <li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šæŒæœ‰è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­çš„çŠ¶æ€</li>
                    </ul>

                    <h4>2.5. å“åº”ä¸é”™è¯¯å¤„ç†</h4>
                    <ul>
                        <li><strong>æ ‡å‡†å“åº”</strong>ï¼šå¤„ç†å™¨èƒ½å¤Ÿæ§åˆ¶å“åº”çŠ¶æ€ç å’Œå“åº”ä½“</li>
                        <li><strong>404 Not Found</strong>ï¼šå½“æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è·¯ç”±æ—¶ï¼Œè‡ªåŠ¨è¿”å› <code>404</code> çŠ¶æ€ç </li>
                        <li><strong>500 Internal Server Error</strong>ï¼šå½“å‘ç”Ÿæœªæ•è·å¼‚å¸¸æ—¶ï¼Œè‡ªåŠ¨è¿”å› <code>500</code> çŠ¶æ€ç </li>
                    </ul>

                    <h4>2.6. æ¨¡æ¿æ¸²æŸ“</h4>
                    <p>ä¸ºäº†é¿å…åœ¨ Java ä»£ç ä¸­ç¡¬ç¼–ç  HTMLï¼Œé‡‡ç”¨<b>"å›ºå®šæ¨¡æ¿æ‰“åº•" + "åŠ¨æ€å˜é‡æ’å…¥"</b>çš„æ–¹å¼ã€‚</p>
                    <ul>
                        <li><strong>æ¨¡æ¿å¼•æ“</strong>ï¼šé›†æˆ [FreeMarker](https://freemarker.apache.org/) ä½œä¸ºæ¨¡æ¿å¼•æ“</li>
                        <li><strong>æ¸²æŸ“èƒ½åŠ›</strong>ï¼šåœ¨è·¯ç”±å¤„ç†å™¨ä¸­è°ƒç”¨æ¨¡æ¿å¼•æ“ï¼Œä¼ å…¥æ¨¡æ¿åç§°å’Œæ•°æ®æ¨¡å‹</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>3. æŠ€æœ¯å®ç°è¦ç‚¹</h3>
                    <ul>
                        <li><strong>æœåŠ¡å™¨å¯åŠ¨æµç¨‹</strong>ï¼š<code>Engine</code> ç±»ä½œä¸ºæ ¸å¿ƒå¼•æ“ï¼Œè´Ÿè´£æœåŠ¡å™¨å¯åŠ¨ä¸é…ç½®</li>
                        <li><strong>è¯·æ±‚å¤„ç†æµç¨‹</strong>ï¼šåˆ›å»º Context å¯¹è±¡ï¼ŒæŸ¥æ‰¾è·¯ç”±ï¼Œç»„è£…å¤„ç†é“¾ï¼Œæ‰§è¡Œå¤„ç†</li>
                        <li><strong>è·¯ç”±å®ç°</strong>ï¼šä½¿ç”¨å‰ç¼€æ ‘æ•°æ®ç»“æ„å­˜å‚¨è·¯ç”±è§„åˆ™</li>
                        <li><strong>æ ¸å¿ƒæŠ½è±¡</strong>ï¼š<code>Middleware</code> å’Œ <code>Handler</code> å®šä¹‰ä¸ºå‡½æ•°å¼æ¥å£ï¼Œæ”¯æŒ Lambda è¡¨è¾¾å¼</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>4. èŒƒå›´è¾¹ç•Œä¸çº¦æŸ</h3>
                    <ul>
                        <li><strong>æ ¸å¿ƒç„¦ç‚¹</strong>ï¼šä¸“æ³¨äºæ¸…æ™°åœ°æ¼”ç¤ºä¸€ä¸ª HTTP è¯·æ±‚çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</li>
                        <li><strong>æš‚ä¸å®ç°</strong>ï¼šå†…ç½®é™æ€æ–‡ä»¶æœåŠ¡ã€ç”¨æˆ·ä¼šè¯ã€æ•°æ®åº“æŒä¹…åŒ–å±‚æŠ½è±¡ã€è‡ªåŠ¨è¯·æ±‚ä½“è§£æ</li>
                        <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä»…éœ€å®ç° <code>404</code> å’Œ <code>500</code> ä¸¤ç§åŸºæœ¬çš„é”™è¯¯å“åº”</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Slide 3: Part 1 - Routerè·¯ç”±å™¨ -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šPart 1: Routerè·¯ç”±å™¨</h2>
                <div class="section">
                    <h3>ä¸€ã€ èƒŒæ™¯ä»‹ç»</h3>
                    <p>åœ¨ç°ä»£ Web åº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸å„ç§ç½‘å€ï¼ˆURLï¼‰æ‰“äº¤é“ã€‚<b>è·¯ç”±å™¨ï¼ˆRouterï¼‰</b> æ­£æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­çš„"äº¤é€šæŒ‡æŒ¥å®˜"ã€‚å®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯è§£æå®¢æˆ·ç«¯å‘æ¥çš„ HTTP è¯·æ±‚ï¼Œè¯»å–å…¶ URL è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•ï¼Œç„¶åæ ¹æ®é¢„å…ˆå®šä¹‰å¥½çš„è·¯ç”±è§„åˆ™ï¼Œç²¾ç¡®åœ°å°†è¿™ä¸ªè¯·æ±‚åˆ†å‘ç»™ç›¸åº”çš„å¤„ç†ä»£ç ï¼ˆHandlerï¼‰ã€‚</p>
                    <img src="images/18-2-how-router-works.png" alt="è·¯ç”±å™¨å·¥ä½œåŸç†" class="router-image" style="width: 80%;">
                </div>

                <div class="section">
                    <h3>è·¯ç”±å™¨å¦‚ä½•å·¥ä½œï¼Ÿ(ä¸€ä¸ªç®€å•çš„ä¾‹å­)</h3>
                    <p>æƒ³è±¡ä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œå®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½å’Œå¯¹åº”çš„ URLï¼š</p>
                    <ul>
                        <li>æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« åˆ—è¡¨ï¼š<code>GET /posts</code></li>
                        <li>æ˜¾ç¤ºIDä¸º <code>42</code> çš„æ–‡ç« ï¼š<code>GET /posts/42</code></li>
                        <li>æäº¤ä¸€ç¯‡æ–°æ–‡ç« ï¼š<code>POST /posts</code></li>
                    </ul>
                    <p>å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶ï¼Œè·¯ç”±å™¨ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
                    <ol>
                        <li><strong>æ¥æ”¶è¯·æ±‚</strong>ï¼šæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œä¾‹å¦‚ <code>GET /posts/42</code></li>
                        <li><strong>è§£æè¯·æ±‚</strong>ï¼šè¯†åˆ«å‡ºè¯·æ±‚æ–¹æ³•æ˜¯ <code>GET</code>ï¼Œè¯·æ±‚è·¯å¾„æ˜¯ <code>/posts/42</code></li>
                        <li><strong>åŒ¹é…è§„åˆ™</strong>ï¼šåœ¨è§„åˆ™è¡¨é‡ŒæŸ¥æ‰¾ï¼Œå‘ç°è§„åˆ™ <code>/posts/:id</code> å¯ä»¥åŒ¹é… <code>/posts/42</code></li>
                        <li><strong>æå–å‚æ•°</strong>ï¼šæŠŠè·¯å¾„ä¸­çš„ <code>42</code> æå–å‡ºæ¥ï¼Œä½œä¸ºå‚æ•° <code>id</code> çš„å€¼</li>
                        <li><strong>åˆ†å‘ä»»åŠ¡</strong>ï¼šè°ƒç”¨ä¸ <code>/posts/:id</code> è§„åˆ™ç»‘å®šçš„ Handlerï¼Œä¼ é€’å‚æ•° <code>{id: 42}</code></li>
                        <li><strong>æ‰§è¡Œé€»è¾‘</strong>ï¼šHandler ä»ä¸Šä¸‹æ–‡ä¸­æ‹¿åˆ° <code>id=42</code>ï¼ŒæŸ¥è¯¢æ•°æ®åº“å¹¶è¿”å›ç»“æœ</li>
                    </ol>
                </div>

                <div class="section">
                    <h3>äºŒã€ æ ¸å¿ƒæ¦‚å¿µ</h3>

                    <h4>1. HTTP æ–¹æ³• (HTTP Method)</h4>
                    <p>HTTP è§„å®šäº†å¤šç§è¯·æ±‚æ–¹æ³•ï¼Œç”¨ä»¥è¡¨ç¤ºå¯¹èµ„æºçš„ä¸åŒæ“ä½œã€‚</p>
                    <p><iframe src="https://player.bilibili.com/player.html?bvid=BV1nS411A71U&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 100%; height: 400px;"></iframe></p>
                    <ul>
                        <li><code>GET</code>: ä»æœåŠ¡å™¨è·å–èµ„æºã€‚ä¾‹å¦‚ï¼šæµè§ˆç½‘é¡µã€æŸ¥çœ‹æ–‡ç« </li>
                        <li><code>POST</code>: å‘æœåŠ¡å™¨æäº¤æ–°æ•°æ®ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºæ–°èµ„æºã€‚ä¾‹å¦‚ï¼šç”¨æˆ·æ³¨å†Œã€å‘å¸ƒæ–°æ–‡ç« </li>
                        <li><code>PUT</code>: æ›´æ–°æœåŠ¡å™¨ä¸Šå·²å­˜åœ¨çš„èµ„æº</li>
                        <li><code>DELETE</code>: ä»æœåŠ¡å™¨åˆ é™¤èµ„æº</li>
                    </ul>
                    <p>è·¯ç”±å™¨å¿…é¡»èƒ½å¤Ÿä¸º<b>åŒä¸€ä¸ªURLè·¯å¾„</b>ï¼Œæ ¹æ®<b>ä¸åŒçš„HTTPæ–¹æ³•</b>ï¼Œç»‘å®šä¸åŒçš„ <code>Handler</code>ã€‚</p>

                    <h4>2. è¯·æ±‚å¤„ç†å™¨ (Handler)</h4>
                    <p>Handler æ˜¯ä¸€æ®µä»£ç é€»è¾‘ï¼Œå®ƒè´Ÿè´£å¤„ç†ä¸€ä¸ªå…·ä½“çš„è¯·æ±‚å¹¶ç”Ÿæˆå“åº”ã€‚ç®€å•æ¥è¯´ï¼Œ<b>è·¯ç”±å™¨è´Ÿè´£"æŒ‡è·¯"ï¼Œè€Œ Handler è´Ÿè´£"å¹²æ´»"</b>ã€‚åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ä¸€ä¸ªæ¥å£æ¥å®šä¹‰ Handlerã€‚å½“è·¯ç”±åŒ¹é…æˆåŠŸåï¼Œå¯¹åº”çš„ Handler çš„ handle æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚</p>
                    <pre><code class="language-java">// ä¸€ä¸ªå¤„ç†è·å–ç”¨æˆ·ä¿¡æ¯çš„ Handler ç¤ºä¾‹
router.addRoute(HttpMethod.GET, "/user/:id", ctx -> {
    String userId = ctx.getParam("id").get();
    // ...æ ¹æ® userId æŸ¥è¯¢æ•°æ®åº“çš„ä»£ç ...
    System.out.println("æ­£åœ¨æŸ¥è¯¢ç”¨æˆ·ï¼š" + userId);
});</code></pre>

                    <h4>3-6. è·¯ç”±ç±»å‹</h4>
                    <ul>
                        <li><strong>é™æ€è·¯ç”±</strong>ï¼šè·¯å¾„æ˜¯å®Œå…¨å›ºå®šçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š<code>/about</code>ã€<code>/user/profile</code></li>
                        <li><strong>åŠ¨æ€å‚æ•°è·¯ç”±</strong>ï¼šè·¯å¾„ä¸­åŒ…å«å¯å˜çš„å‚æ•°éƒ¨åˆ†ï¼Œé€šå¸¸ä»¥å†’å· <code>:</code> ä½œä¸ºå‰ç¼€ã€‚ä¾‹å¦‚ï¼Œè§„åˆ™ <code>/user/:id</code> å¯ä»¥åŒ¹é… <code>/user/123</code>ã€<code>/user/abc</code> ç­‰</li>
                        <li><strong>é€šé…ç¬¦è·¯ç”±</strong>ï¼šè·¯å¾„ä¸­åŒ…å«ä¸€ä¸ªæ˜Ÿå· <code>*</code>ï¼Œå®ƒå¯ä»¥åŒ¹é…è¯¥ä½ç½®åçš„ä»»æ„è·¯å¾„ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œè§„åˆ™ <code>/static/*filepath</code> å¯ä»¥åŒ¹é… <code>/static/css/style.css</code></li>
                        <li><strong>è·¯ç”±åŒ¹é…ä¼˜å…ˆçº§</strong>ï¼š<b>é™æ€è·¯ç”± > åŠ¨æ€å‚æ•°è·¯ç”± > é€šé…ç¬¦è·¯ç”±</b></li>
                    </ul>
                </div>

                <div class="section">
                    <h3>ä¸‰ã€ åŠŸèƒ½éœ€æ±‚</h3>
                    <h4>1. ç±»è®¾è®¡</h4>
                    <p>ç±»åï¼š<code>com.jinitamy.core.Router</code>ï¼Œè‡ªè¡Œè®¾è®¡ Router çš„æ•°æ®ç»“æ„ï¼Œä»¥åŒæ—¶æ”¯æŒé™æ€ã€åŠ¨æ€å’Œé€šé…ç¬¦è·¯ç”±çš„å­˜å‚¨å’ŒåŒ¹é…ã€‚</p>

                    <h4>2. å…¬å¼€æ–¹æ³•</h4>
                    <pre><code class="language-java">public void addRoute(HttpMethod method, String pattern, Handler handler)
public Handler getRoute(HttpMethod method, String path, Context ctx)</code></pre>
                    <p>addRoute æ–¹æ³•ç”¨äºæ·»åŠ è·¯ç”±è§„åˆ™ï¼ŒgetRoute æ–¹æ³•ç”¨äºæŸ¥æ‰¾åŒ¹é…çš„ Handlerã€‚å¦‚æœåŒ¹é…åˆ°åŠ¨æ€å‚æ•°è·¯ç”±æˆ–é€šé…ç¬¦è·¯ç”±ï¼Œå¿…é¡»å°†æ•è·åˆ°çš„å‚æ•°åå’Œå€¼å­˜å…¥ä¼ å…¥çš„ <code>ctx</code> å¯¹è±¡ä¸­ã€‚</p>
                </div>

                <div class="section">
                    <h3>å››ã€ è¾…åŠ©ä»£ç </h3>
                    <p>ä¸ºäº†è®©ä½ ä¸“æ³¨äºæ ¸å¿ƒçš„ Router è®¾è®¡ï¼Œæˆ‘ä»¬æä¾›ä»¥ä¸‹è¾…åŠ©æ¥å£å’Œç±»ã€‚è¯·è‡ªè¡Œåœ¨é¡¹ç›®ä¸­åˆ›å»ºå¯¹åº”çš„.java æ–‡ä»¶ï¼Œç„¶åå°†ä»£ç å†…å®¹ copy è¿›å»ã€‚</p>

                    <h4>1. Handler æ¥å£</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

/**
 * è·¯ç”±å¤„ç†å™¨æ¥å£
 * è¯¥æ¥å£å®šä¹‰äº†å¤„ç†HTTPè¯·æ±‚çš„æ ‡å‡†æ–¹æ³•ï¼Œç”¨äºå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
 * ç”±äºä½¿ç”¨äº†@FunctionalInterfaceæ³¨è§£ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ç®€åŒ–å®ç°ã€‚
 * ä½¿ç”¨ç¤ºä¾‹ï¼š
 * &lt;pre&gt;
 * // ä½¿ç”¨Lambdaè¡¨è¾¾å¼
 * router.addRoute(HttpMethod.GET, "/", ctx -> {
 *     System.out.println("Hello World");
 * });
 * &lt;/pre&gt;
 */
@FunctionalInterface
public interface Handler {
    /**
     * å¤„ç†HTTPè¯·æ±‚
     * è¯¥æ–¹æ³•åœ¨è·¯ç”±åŒ¹é…æˆåŠŸåè¢«è°ƒç”¨ï¼Œç”¨äºå¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
     * å¯ä»¥é€šè¿‡Contextå¯¹è±¡ï¼š
     * 1. è·å–è¯·æ±‚ä¿¡æ¯ï¼ˆæ–¹æ³•ã€è·¯å¾„ã€å‚æ•°ç­‰ï¼‰
     * 2. è®¾ç½®å“åº”ä¿¡æ¯ï¼ˆçŠ¶æ€ç ã€å“åº”ä½“ç­‰ï¼‰
     * @param ctx è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰ä¿¡æ¯
     * @throws Exception å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸
     */
    void handle(Context ctx) throws Exception;
}</code></pre>

                    <h4>2. Context ç±»</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

import java.util.HashMap;
import java.util.Map;
import java.util.Optional;

// è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œç”¨äºå­˜å‚¨åŠ¨æ€è·¯ç”±å‚æ•°
public class Context {
    private final Map&lt;String, String&gt; params = new HashMap&lt;&gt;();

    public void setParam(String key, String value) {
        this.params.put(key, value);
    }

    public Optional&lt;String&gt; getParam(String key) {
        return Optional.ofNullable(this.params.get(key));
    }

    public void removeParam(String key) {
        this.params.remove(key);
    }

    @Override
    public String toString() {
        return "Context{params=" + params + "}";
    }
}</code></pre>
                </div>

                <div class="section">
                    <h3>äº”ã€ æµ‹è¯•ä»£ç </h3>
                    <p>è¯·å°†ä½ çš„ Router ç±»ä¸ä»¥ä¸‹ Main ç±»ä¸€åŒç¼–è¯‘è¿è¡Œã€‚å¦‚æœä½ çš„å®ç°æ­£ç¡®ï¼Œè¾“å‡ºç»“æœåº”ä¸"é¢„æœŸè¾“å‡º"å®Œå…¨ä¸€è‡´ã€‚</p>

                    <h4>Main.java</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.handler.codec.http.HttpMethod;

public class Main {
    public static void main(String[] args) throws Exception {
        Router router = new Router();

        // æ³¨å†Œè·¯ç”±è§„åˆ™
        // é™æ€è·¯ç”±
        router.addRoute(HttpMethod.GET, "/", ctx -> System.out.println("æ¬¢è¿æ¥åˆ°é¦–é¡µ"));
        router.addRoute(HttpMethod.GET, "/about", ctx -> System.out.println("å…³äºæˆ‘ä»¬é¡µé¢"));
        router.addRoute(HttpMethod.GET, "/user/profile", ctx -> System.out.println("ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µ"));

        // åŠ¨æ€å‚æ•°è·¯ç”±
        router.addRoute(HttpMethod.GET, "/user/:name", ctx -> {
            String name = ctx.getParam("name").orElse("guest");
            System.out.println("ä½ å¥½, " + name + "! " + ctx);
        });
        router.addRoute(HttpMethod.GET, "/post/:year/:month", ctx -> {
            String year = ctx.getParam("year").orElse("æœªçŸ¥å¹´ä»½");
            String month = ctx.getParam("month").orElse("æœªçŸ¥æœˆä»½");
            System.out.println("æŸ¥çœ‹ " + year + "å¹´" + month + "æœˆçš„æ–‡ç« . " + ctx);
        });

        // é€šé…ç¬¦è·¯ç”±
        router.addRoute(HttpMethod.GET, "/static/*filepath", ctx -> {
            String filepath = ctx.getParam("filepath").orElse("æœªçŸ¥æ–‡ä»¶");
            System.out.println("è¯·æ±‚é™æ€æ–‡ä»¶: " + filepath + ". " + ctx);
        });

        // POST æ–¹æ³•è·¯ç”±
        router.addRoute(HttpMethod.POST, "/user", ctx -> System.out.println("åˆ›å»ºæ–°ç”¨æˆ·"));


        // --- å¼€å§‹æµ‹è¯• ---
        System.out.println("--- è·¯ç”±æµ‹è¯•å¼€å§‹ ---\n");
        String[] testPaths = {
            "/",                      // åŒ¹é…æ ¹è·¯å¾„
            "/about",                 // åŒ¹é…é™æ€è·¯ç”±
            "/user/profile",          // ä¼˜å…ˆåŒ¹é…é™æ€è·¯ç”± /user/profile
            "/user/jinitamy",         // åŒ¹é…åŠ¨æ€è·¯ç”± /user/:name
            "/post/2025/10",          // åŒ¹é…å¤šå‚æ•°åŠ¨æ€è·¯ç”±
            "/static/css/main.css",   // åŒ¹é…é€šé…ç¬¦è·¯ç”±
            "/static/js/app/index.js",// åŒ¹é…é€šé…ç¬¦è·¯ç”±ï¼ˆå¤šå±‚çº§ï¼‰
            "/non-existent-path",     // æœªåŒ¹é…è·¯å¾„
            "/user"                   // æ–¹æ³•ä¸åŒ¹é… (GET vs POST)
        };

        for (String path : testPaths) {
            System.out.println("&gt;&gt;&gt; è¯·æ±‚: GET " + path);
            Context ctx = new Context();
            Handler handler = router.getRoute(HttpMethod.GET, path, ctx);
            if (handler != null) {
                handler.handle(ctx);
            } else {
                System.out.println("404 Not Found");
            }
            System.out.println();
        }

        // æµ‹è¯• POST æ–¹æ³•
        System.out.println("&gt;&gt;&gt; è¯·æ±‚: POST /user");
        Context postCtx = new Context();
        Handler postHandler = router.getRoute(HttpMethod.POST, "/user", postCtx);
        if (postHandler != null) {
            postHandler.handle(postCtx);
        } else {
            System.out.println("404 Not Found");
        }
        System.out.println("\n--- è·¯ç”±æµ‹è¯•ç»“æŸ ---");
    }
}</code></pre>

                    <h4>é¢„æœŸè¾“å‡º</h4>
                    <pre><code class="language-plaintext">--- è·¯ç”±æµ‹è¯•å¼€å§‹ ---

&gt;&gt;&gt; è¯·æ±‚: GET /
æ¬¢è¿æ¥åˆ°é¦–é¡µ

&gt;&gt;&gt; è¯·æ±‚: GET /about
å…³äºæˆ‘ä»¬é¡µé¢

&gt;&gt;&gt; è¯·æ±‚: GET /user/profile
ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µ

&gt;&gt;&gt; è¯·æ±‚: GET /user/jinitamy
ä½ å¥½, jinitamy! Context{params={name=jinitamy}}

&gt;&gt;&gt; è¯·æ±‚: GET /post/2025/10
æŸ¥çœ‹ 2025å¹´10æœˆçš„æ–‡ç« . Context{params={year=2025, month=10}}

&gt;&gt;&gt; è¯·æ±‚: GET /static/css/main.css
è¯·æ±‚é™æ€æ–‡ä»¶: css/main.css. Context{params={filepath=css/main.css}}

&gt;&gt;&gt; è¯·æ±‚: GET /static/js/app/index.js
è¯·æ±‚é™æ€æ–‡ä»¶: js/app/index.js. Context{params={filepath=js/app/index.js}}

&gt;&gt;&gt; è¯·æ±‚: GET /non-existent-path
404 Not Found

&gt;&gt;&gt; è¯·æ±‚: GET /user
404 Not Found

&gt;&gt;&gt; è¯·æ±‚: POST /user
åˆ›å»ºæ–°ç”¨æˆ·

--- è·¯ç”±æµ‹è¯•ç»“æŸ ---</code></pre>
                </div>

                <div class="section">
                    <h3>å…­ã€ è¯„åˆ†æ ‡å‡†</h3>
                    <ul>
                        <li><strong>æ­£ç¡®æ€§ (70%)</strong>ï¼š
                            <ul>
                                <li>èƒ½å¤Ÿæ­£ç¡®æ·»åŠ å’ŒæŸ¥æ‰¾æ‰€æœ‰ç±»å‹çš„è·¯ç”±ã€‚</li>
                                <li>è·¯ç”±åŒ¹é…ä¼˜å…ˆçº§ï¼ˆé™æ€ > åŠ¨æ€ > é€šé…ç¬¦ï¼‰å¤„ç†æ­£ç¡®ã€‚</li>
                                <li>åŠ¨æ€å‚æ•°å’Œé€šé…ç¬¦å‚æ•°èƒ½å¤Ÿè¢«æ­£ç¡®æ•è·å¹¶è®¾ç½®åˆ° Context ä¸­ã€‚</li>
                                <li>å¯¹äºä¸å­˜åœ¨æˆ–è¯·æ±‚æ–¹æ³•ä¸åŒ¹é…çš„è·¯ç”±ï¼Œèƒ½æ­£ç¡®è¿”å› nullã€‚</li>
                                <li>èƒ½æ­£ç¡®å¤„ç†æ ¹è·¯å¾„ / ç­‰è¾¹ç•Œæƒ…å†µã€‚</li>
                            </ul>
                        </li>
                        <li><strong>ä»£ç è®¾è®¡ä¸ç»“æ„ (20%)</strong>ï¼š
                            <ul>
                                <li>Router ç±»çš„å†…éƒ¨æ•°æ®ç»“æ„è®¾è®¡æ˜¯å¦åˆç†ã€æ¸…æ™°ã€‚</li>
                                <li>ä»£ç å°è£…æ€§å¥½ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li>
                                <li>ä»£ç é£æ ¼ç¬¦åˆ Java è§„èŒƒã€‚</li>
                            </ul>
                        </li>
                        <li><strong>æ•ˆç‡ (10%)</strong>ï¼š
                            <ul>
                                <li>è·¯ç”±æŸ¥æ‰¾ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”å°½å¯èƒ½ä½ã€‚</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Slide 4: Part 2 - Contextä¸Šä¸‹æ–‡ç®¡ç† -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šPart 2: Contextä¸Šä¸‹æ–‡ç®¡ç†</h2>
                <div class="section">
                    <h3>1. æŠ€æœ¯èƒŒæ™¯</h3>
                    <p>åœ¨ Web æ¡†æ¶ä¸­ï¼Œ<code>Context</code>ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚å®ƒè´¯ç©¿äºä¸€æ¬¡ HTTP è¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p>
                    <p>åœ¨å¤§ä½œä¸šPart 1: Routerè·¯ç”±å™¨ä¸­ï¼Œæˆ‘ä»¬æä¾›äº† <code>Context.java</code>ç±»ï¼Œä½œä¸º å®Œæˆ <code>Router.java</code>çš„è¾…åŠ©ç±»ã€‚</p>
                    <p>ç„¶è€Œï¼Œè¿™ä¸ªè¾…åŠ©ç±»æ˜¯ä¸å®Œå…¨çš„ï¼Œä¸è¶³ä»¥åæ˜  Web æ¡†æ¶ä¸­æ‰€éœ€è¦çš„å…¨éƒ¨ä¸Šä¸‹æ–‡ã€‚</p>
                    <img src="images/18-2-context.png" alt="Contextæ¦‚å¿µå›¾" class="context-image" style="width: 80%;">
                    <p>åœ¨ Web åº”ç”¨ä¸­ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ª HTTP è¯·æ±‚æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ª <code>Context</code> å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¼šå°è£…ï¼š</p>
                    <ul>
                        <li><strong>Request (è¯·æ±‚)</strong>ï¼šå®¢æˆ·ç«¯å‘æ¥çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆURLã€Methodã€Headersã€Body ç­‰ï¼‰</li>
                        <li><strong>Response (å“åº”)</strong>ï¼šæœåŠ¡å™¨å‡†å¤‡è¿”å›ç»™å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆStatus Codeã€Headersã€Body ç­‰ï¼‰</li>
                        <li><strong>æ‰©å±•æ•°æ®</strong>ï¼šåœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´æ•°æ®ï¼ˆæ¯”å¦‚ä» URL ä¸­è§£æå‡ºçš„å‚æ•°ï¼Œæˆ–è€…ä¸­é—´ä»¶è®¡ç®—å‡ºçš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼‰</li>
                    </ul>
                    <p>ä½¿ç”¨ <code>Context</code> çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­ä¼ é€’ä¸€å¤§å †å•ç‹¬çš„å‚æ•°ï¼ˆæ¯”å¦‚ request, response, params, user, ...ï¼‰ï¼Œåªéœ€è¦ä¼ é€’ä¸€ä¸ª <code>Context</code> å¯¹è±¡å³å¯ã€‚</p>
                </div>

                <div class="section">
                    <h3>2. ç›¸å…³çŸ¥è¯†</h3>
                    <p>æœ¬é¡¹ç›®ä½¿ç”¨ <code>Netty</code> ä½œä¸ºåº•å±‚ç½‘ç»œé€šä¿¡æ¡†æ¶ã€‚ä½ éœ€è¦äº†è§£ä»¥ä¸‹ Netty çš„ HTTP ç›¸å…³ç±»ï¼š</p>
                    <ul>
                        <li><code>io.netty.handler.codec.http.FullHttpRequest</code>: ä»£è¡¨ä¸€ä¸ªå®Œæ•´çš„ HTTP è¯·æ±‚ã€‚
                            <ul>
                                <li><code>uri()</code>: è·å–è¯·æ±‚çš„ URIã€‚</li>
                                <li><code>method()</code>: è·å–è¯·æ±‚æ–¹æ³• (GET, POST ç­‰)ã€‚</li>
                                <li><code>headers()</code>: è·å–è¯·æ±‚å¤´ã€‚</li>
                            </ul>
                        </li>
                        <li><code>io.netty.handler.codec.http.FullHttpResponse</code>: ä»£è¡¨ä¸€ä¸ªå®Œæ•´çš„ HTTP å“åº”ã€‚
                            <ul>
                                <li><code>setStatus(HttpResponseStatus status)</code>: è®¾ç½®å“åº”çŠ¶æ€ç ã€‚</li>
                            </ul>
                        </li>
                        <li><code>io.netty.handler.codec.http.HttpHeaders</code>: HTTP å¤´éƒ¨çš„é›†åˆã€‚</li>
                        <li><code>io.netty.handler.codec.http.HttpMethod</code>: æšä¸¾ç±»ï¼Œå®šä¹‰äº† GET, POST, PUT, DELETE ç­‰æ–¹æ³•ã€‚</li>
                        <li><code>io.netty.handler.codec.http.HttpResponseStatus</code>: å®šä¹‰äº† HTTP çŠ¶æ€ç ï¼Œå¦‚ <code>OK (200)</code>, <code>NOT_FOUND (404)</code> ç­‰ã€‚</li>
                    </ul>
                    <p><strong>æç¤º</strong>: è™½ç„¶ä½ éœ€è¦å¯¼å…¥è¿™äº›ç±»ï¼Œä½†ä½ çš„ <code>Context</code> ç±»ä¸»è¦æ˜¯å¯¹å®ƒä»¬è¿›è¡ŒåŒ…è£…ï¼Œæä¾›æ›´å‹å¥½çš„ APIã€‚</p>
                </div>

                <div class="section">
                    <h3>3. è®¾è®¡éœ€æ±‚</h3>
                    <p>è¯·åœ¨ <code>com.jinitamy.core</code> åŒ…ä¸‹å®ç° <code>Context</code> ç±»ã€‚</p>

                    <h4>ç±»ç»“æ„</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.handler.codec.http.FullHttpRequest;
import io.netty.handler.codec.http.FullHttpResponse;
import io.netty.handler.codec.http.HttpHeaders;
import io.netty.handler.codec.http.HttpMethod;
import io.netty.handler.codec.http.HttpResponseStatus;

import java.util.HashMap;
import java.util.Map;

/**
 * HTTPè¯·æ±‚ä¸Šä¸‹æ–‡ç±»
 *
 * è¯¥ç±»å°è£…äº†HTTPè¯·æ±‚å’Œå“åº”çš„ç›¸å…³ä¿¡æ¯ï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¥å£æ¥è®¿é—®ï¼š
 * 1. è¯·æ±‚ä¿¡æ¯ï¼ˆæ–¹æ³•ã€è·¯å¾„ã€å¤´éƒ¨ç­‰ï¼‰
 * 2. å“åº”ä¿¡æ¯ï¼ˆçŠ¶æ€ç ã€å“åº”ä½“ç­‰ï¼‰
 * 3. è·¯ç”±å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±å‚æ•°ï¼‰
 * 4. è‡ªå®šä¹‰å±æ€§ï¼ˆç”¨äºåœ¨ä¸­é—´ä»¶å’Œå¤„ç†å™¨ä¹‹é—´ä¼ é€’æ•°æ®ï¼‰
 */
public class Context {
    // TODO: å®šä¹‰æˆå‘˜å˜é‡
    // 1. FullHttpRequest request
    // 2. FullHttpResponse response
    // 3. Map&lt;String, String&gt; params (ç”¨äºå­˜å‚¨è·¯ç”±å‚æ•°)
    // 4. Map&lt;String, Object&gt; attributes (ç”¨äºå­˜å‚¨è‡ªå®šä¹‰å±æ€§)
    // 5. String path (è¯·æ±‚è·¯å¾„)

    /**
     * åˆ›å»ºè¯·æ±‚ä¸Šä¸‹æ–‡
     *
     * @param request HTTPè¯·æ±‚å¯¹è±¡
     * @param response HTTPå“åº”å¯¹è±¡
     */
    public Context(FullHttpRequest request, FullHttpResponse response) {
        // TODO: åˆå§‹åŒ–æˆå‘˜å˜é‡
        // path é»˜è®¤ä¸º request.uri()ï¼Œæ³¨æ„å¤„ç† request ä¸º null çš„æƒ…å†µ
    }

    // TODO: å®ç°ä»¥ä¸‹æ–¹æ³•

    /**
     * è·å–è¯·æ±‚è·¯å¾„
     */
    public String getPath() { return null; }

    /**
     * è®¾ç½®è¯·æ±‚è·¯å¾„
     */
    public void setPath(String path) { }

    /**
     * è·å–HTTPè¯·æ±‚æ–¹æ³•
     */
    public HttpMethod getMethod() { return null; }

    /**
     * è·å–HTTPè¯·æ±‚å¤´
     */
    public HttpHeaders getHeaders() { return null; }

    /**
     * è®¾ç½®è·¯ç”±å‚æ•°
     * @param key å‚æ•°å
     * @param value å‚æ•°å€¼
     */
    public void setParam(String key, String value) { }

    /**
     * è·å–è·¯ç”±å‚æ•°
     * @param key å‚æ•°å
     * @return å‚æ•°å€¼
     */
    public String getParam(String key) { return null; }

    /**
     * ç§»é™¤è·¯ç”±å‚æ•°
     * @param key å‚æ•°å
     * @return è¢«ç§»é™¤çš„å‚æ•°å€¼
     */
    public String removeParam(String key) { return null; }

    /**
     * è®¾ç½®è‡ªå®šä¹‰å±æ€§
     * @param key å±æ€§å
     * @param value å±æ€§å€¼
     */
    public void setAttribute(String key, Object value) { }

    /**
     * è·å–è‡ªå®šä¹‰å±æ€§
     * @param key å±æ€§å
     * @return å±æ€§å€¼
     */
    public Object getAttribute(String key) { return null; }

    /**
     * è·å–HTTPè¯·æ±‚å¯¹è±¡
     */
    public FullHttpRequest getRequest() { return null; }

    /**
     * è·å–HTTPå“åº”å¯¹è±¡
     */
    public FullHttpResponse getResponse() { return null; }

    /**
     * è®¾ç½®HTTPå“åº”çŠ¶æ€ç 
     * æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œä¾‹å¦‚: ctx.status(200).response()
     *
     * @param statusCode HTTPçŠ¶æ€ç 
     * @return å½“å‰ä¸Šä¸‹æ–‡å®ä¾‹
     */
    public Context status(int statusCode) { return this; }
}</code></pre>
                </div>

                <div class="section">
                    <h3>4. åŠŸèƒ½æè¿°</h3>
                    <h4>1. <strong>æ„é€ å‡½æ•°</strong></h4>
                    <p>åˆå§‹åŒ– <code>request</code>, <code>response</code>ï¼Œå¹¶å®ä¾‹åŒ– <code>params</code> å’Œ <code>attributes</code> çš„ Mapã€‚<code>path</code> åº”è¯¥ä» <code>request.uri()</code> ä¸­è·å–ï¼ˆå¦‚æœ request ä¸ä¸ºç©ºï¼‰ã€‚</p>

                    <h4>2. <strong>è·¯ç”±å‚æ•° (Params)</strong></h4>
                    <p>ç”¨äºå­˜å‚¨åŠ¨æ€è·¯ç”±çš„å‚æ•°ã€‚ä¾‹å¦‚ <code>/user/:id</code> åŒ¹é… <code>/user/123</code> æ—¶ï¼Œ<code>id</code> ä¸º <code>123</code>ã€‚</p>

                    <h4>3. <strong>è‡ªå®šä¹‰å±æ€§ (Attributes)</strong></h4>
                    <p>è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„å­˜å‚¨ç©ºé—´ã€‚ç”¨äºåœ¨ä¸­é—´ä»¶å’Œå¤„ç†å™¨ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p>

                    <h4>4. <strong>Status æ–¹æ³•</strong></h4>
                    <p>è¿™æ˜¯ä¸€ä¸ªä¾¿åˆ©æ–¹æ³•ï¼Œç”¨äºè®¾ç½® response çš„çŠ¶æ€ç ã€‚å®ƒåº”è¯¥è¿”å› <code>this</code> ä»¥æ”¯æŒé“¾å¼è°ƒç”¨ã€‚</p>
                </div>

                <div class="section">
                    <h3>5. æµ‹è¯•ç”¨ä¾‹</h3>
                    <p>è¯·åˆ›å»ºä¸€ä¸ª JUnit 5 æµ‹è¯•ç±» <code>src/test/java/com/jinitamy/core/ContextTest.java</code> æ¥éªŒè¯ä½ çš„å®ç°ã€‚</p>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.handler.codec.http.*;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class ContextTest {

    private FullHttpRequest request;
    private FullHttpResponse response;
    private Context context;

    @BeforeEach
    void setUp() {
        request = new DefaultFullHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.GET, "/test");
        response = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
        context = new Context(request, response);
    }

    @Test
    void testConstructorAndPath() {
        assertEquals("/test", context.getPath());
        assertNotNull(context.getRequest());
        assertNotNull(context.getResponse());
    }

    @Test
    void testMethodAndHeaders() {
        assertEquals(HttpMethod.GET, context.getMethod());
        assertNotNull(context.getHeaders());
    }

    @Test
    void testParams() {
        context.setParam("id", "123");
        assertEquals("123", context.getParam("id"));

        String removed = context.removeParam("id");
        assertEquals("123", removed);
        assertNull(context.getParam("id"));
    }

    @Test
    void testAttributes() {
        Object userObj = new Object();
        context.setAttribute("user", userObj);
        assertSame(userObj, context.getAttribute("user"));
    }

    @Test
    void testStatus() {
        context.status(404);
        assertEquals(HttpResponseStatus.NOT_FOUND, response.status());

        // æµ‹è¯•é“¾å¼è°ƒç”¨
        Context ctx = context.status(200);
        assertSame(context, ctx);
        assertEquals(HttpResponseStatus.OK, response.status());
    }

    @Test
    void testPathSetter() {
        context.setPath("/new/path");
        assertEquals("/new/path", context.getPath());
    }
}</code></pre>
                </div>
            </div>
        </section>

        <!-- Slide 5: Part 3 - HTTPå¤„ç†å™¨ -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šPart 3: HTTPå¤„ç†å™¨</h2>
                <div class="section">
                    <h3>ä¸€ã€ èƒŒæ™¯ä»‹ç»</h3>
                    <p>åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº† <code>Router</code>ï¼Œå®ƒåƒæ˜¯ä¸€ä¸ªåŸå¸‚çš„äº¤é€šåœ°å›¾ï¼Œä¸ºæ¯ä¸€ä¸ªåœ°å€ï¼ˆURLï¼‰æ‰¾åˆ°äº†å”¯ä¸€çš„ç›®æ ‡åœ°ç‚¹ï¼ˆHandlerï¼‰ã€‚ç„¶è€Œï¼Œä¸€ä¸ªç°ä»£åŒ–çš„åŸå¸‚äº¤é€šç³»ç»Ÿï¼Œé™¤äº†åœ°å›¾ï¼Œè¿˜éœ€è¦ä¸€ç³»åˆ—çš„è§„åˆ™å’Œæ£€æŸ¥ç«™â€”â€”æ¯”å¦‚äº¤é€šä¿¡å·ç¯ã€å®‰æ£€ç«™ã€æ”¶è´¹ç«™ç­‰ã€‚è¿™äº›è®¾æ–½ç¡®ä¿äº†åˆ°è¾¾ç›®çš„åœ°çš„è¿‡ç¨‹æ˜¯é«˜æ•ˆã€å®‰å…¨å’Œæœ‰åºçš„ã€‚</p>
                    <p>åœ¨ Web æ¡†æ¶ä¸­ï¼Œæ‰®æ¼”è¿™äº›"æ£€æŸ¥ç«™"è§’è‰²çš„å°±æ˜¯<b>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</b>ã€‚éšç€ Web åº”ç”¨ä»ç®€å•çš„é™æ€é¡µé¢å‘å±•ä¸ºå¤æ‚çš„åŠ¨æ€ç³»ç»Ÿï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€ç§æœºåˆ¶æ¥å¤„ç†é‚£äº›ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œä½†åˆæ™®éå­˜åœ¨çš„"æ¨ªåˆ‡å…³æ³¨ç‚¹"ï¼Œå¦‚æ—¥å¿—è®°å½•ã€ç”¨æˆ·è®¤è¯ã€æ•°æ®å‹ç¼©ç­‰ã€‚ä¸­é—´ä»¶æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œå®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯å®ç°<b>é«˜åº¦æ¨¡å—åŒ–</b>ã€<b>ä»£ç é‡ç”¨</b>å’Œ<b>å…³æ³¨ç‚¹åˆ†ç¦»</b>ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œè‡ªç”±ç»„åˆè¿™äº›é€šç”¨åŠŸèƒ½ï¼Œæ„å»ºå‡ºå¥å£®ä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚</p>
                    <img src="images/18-2-httphandler.png" alt="HttpHandleræ¶æ„å›¾" class="handler-image" style="width: 80%;">
                    <p>æœ¬é¢˜çš„ä»»åŠ¡ï¼Œå°±æ˜¯æ„å»º Web æ¡†æ¶çš„"äº¤é€šæ¢çº½"â€”â€”<code>HttpHandler</code>ã€‚å®ƒä¸ä»…è¦ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®¾è®¡çš„"åœ°å›¾"ï¼ˆRouterï¼‰ï¼Œæ›´è¦å»ºç«‹èµ·ä¸€å¥—é«˜æ•ˆçš„"æ£€æŸ¥ç«™ç³»ç»Ÿ"ï¼ˆMiddlewareï¼‰ï¼ŒçœŸæ­£æ‰“é€šä»ç½‘ç»œè¯·æ±‚åˆ°ä¸šåŠ¡å¤„ç†çš„"æœ€åä¸€å…¬é‡Œ"ã€‚</p>
                </div>

                <div class="section">
                    <h3>äºŒã€ æ ¸å¿ƒæ¦‚å¿µä¸è®¾è®¡æ¨¡å¼</h3>
                    <h4>1. è®¾è®¡æ¨¡å¼ï¼šè´£ä»»é“¾æ¨¡å¼</h4>
                    <p>ä¸­é—´ä»¶çš„å®ç°ï¼Œæœ¬è´¨ä¸Šæ˜¯<b>è´£ä»»é“¾è®¾è®¡æ¨¡å¼</b>çš„ä¸€ä¸ªç»å…¸åº”ç”¨ã€‚</p>
                    <ul>
                        <li><strong>å®šä¹‰</strong>: è¯¥æ¨¡å¼å…è®¸å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å®ƒå°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</li>
                        <li><strong>åœ¨æˆ‘ä»¬çš„æ¡†æ¶ä¸­</strong>: æ¯ä¸€ä¸ªä¸­é—´ä»¶å’Œä¸€ä¸ªæœ€ç»ˆçš„ä¸šåŠ¡ <code>Handler</code> éƒ½æ˜¯é“¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚å½“ä¸€ä¸ª HTTP è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå®ƒè¢«äº¤ç»™é“¾çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆç¬¬ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ã€‚è¯¥èŠ‚ç‚¹å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œç„¶åå†³å®šæ˜¯å¦å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™ä¸ªè¿‡ç¨‹æŒç»­ä¸‹å»ï¼Œç›´åˆ°è¯·æ±‚è¢«å®Œæ•´å¤„ç†æˆ–è¢«æŸä¸ªèŠ‚ç‚¹ä¸­æ–­ã€‚</li>
                    </ul>

                    <h4>2. "æ´‹è‘±"æ¨¡å‹ï¼šä¸€ä¸ªæ›´é€šä¿—çš„ä¾‹å­</h4>
                    <img src="images/18-2-responsibility-chain.png" alt="ä¸­é—´ä»¶æ´‹è‘±æ¨¡å‹" class="onion-model" style="width: 80%;">
                    <p>ä¸ºäº†ç›´è§‚åœ°ç†è§£ä¸­é—´ä»¶çš„"æ´‹è‘±"æ¨¡å‹ï¼ˆå³è¯·æ±‚è¿›æ¥ä¸€å±‚å±‚å¤„ç†ï¼Œå“åº”å‡ºå»å†ä¸€å±‚å±‚å¤„ç†ï¼‰ã€‚</p>
                    <p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ª<b>æœºåœºç™»æœº</b>çš„ä¾‹å­æ¥ç±»æ¯”ï¼š</p>
                    <p>æŠŠ<b>ä½ ï¼ˆä¸€ä¸ªæ—…å®¢ï¼‰æƒ³è±¡æˆä¸€ä¸ª HTTP è¯·æ±‚ã€‚ä½ çš„æœ€ç»ˆç›®æ ‡æ˜¯ç™»ä¸Šé£æœºï¼ˆæ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡ Handlerï¼‰</b>ã€‚</p>
                    <ol>
                        <li><strong>è¿›å…¥æœºåœºï¼ˆè¯·æ±‚å¼€å§‹ï¼‰</strong>:
                            <ul>
                                <li><b>ç¬¬1å±‚ - å€¼æœºæŸœå° (Middleware 1)</b>: ä½ å‡ºç¤ºæŠ¤ç…§å’Œæœºç¥¨ã€‚æŸœå‘˜æ£€æŸ¥ä¿¡æ¯ï¼ˆ<b>è¯·æ±‚é¢„å¤„ç†</b>ï¼‰ï¼Œé€šè¿‡åï¼Œä»–å‘Šè¯‰ä½ ï¼š"è¯·å‰å¾€å®‰æ£€å£"ï¼ˆè°ƒç”¨ <code>next()</code>ï¼‰ã€‚</li>
                                <li><b>ç¬¬2å±‚ - å®‰å…¨æ£€æŸ¥ (Middleware 2)</b>: å®‰æ£€å‘˜æ£€æŸ¥ä½ çš„è¡Œæå’Œéšèº«ç‰©å“ï¼ˆ<b>è¯·æ±‚é¢„å¤„ç†</b>ï¼‰ã€‚é€šè¿‡åï¼Œä»–å‘Šè¯‰ä½ ï¼š"è¯·å‰å¾€ç™»æœºå£"ï¼ˆè°ƒç”¨ <code>next()</code>ï¼‰ã€‚</li>
                                <li><b>æ ¸å¿ƒ - ç™»æœºå£ (Core Handler)</b>: åœ°å‹¤äººå‘˜æ’•ä¸‹ä½ çš„ç™»æœºç‰Œï¼Œä½ æˆåŠŸ<b>ç™»ä¸Šé£æœº</b>ã€‚æ ¸å¿ƒä»»åŠ¡å®Œæˆã€‚</li>
                            </ul>
                        </li>
                        <li><strong>é£æœºèµ·é£ï¼ˆå“åº”å¼€å§‹ï¼‰</strong>:
                            <ul>
                                <li><b>æ ¸å¿ƒ - ç™»æœºå£ (Core Handler)</b>: ä½ çš„"å“åº”"ï¼ˆæˆåŠŸç™»æœºçš„äº‹å®ï¼‰å·²ç»äº§ç”Ÿã€‚</li>
                                <li><b>è¿”å›ç¬¬2å±‚ - å®‰å…¨æ£€æŸ¥ (Middleware 2)</b>: å®‰æ£€å‘˜åœ¨ä»–çš„è®°å½•ä¸Šæ ‡è®°ï¼š"æ—…å®¢XXXå·²é€šè¿‡å®‰æ£€"ï¼ˆ<b>å“åº”åå¤„ç†</b>ï¼‰ã€‚</li>
                                <li><b>è¿”å›ç¬¬1å±‚ - å€¼æœºæŸœå° (Middleware 1)</b>: æŸœå‘˜åœ¨ä»–çš„ç³»ç»Ÿé‡Œæ›´æ–°ï¼š"æ—…å®¢XXXå·²æˆåŠŸç™»æœº"ï¼ˆ<b>å“åº”åå¤„ç†</b>ï¼‰ã€‚</li>
                            </ul>
                        </li>
                    </ol>
                    <p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚ï¼ˆæ—…å®¢ï¼‰ä»å¤–åˆ°å†…ä¾æ¬¡é€šè¿‡æ¯ä¸€å±‚æ£€æŸ¥ï¼Œè€Œæ¯ä¸€å±‚æ£€æŸ¥ç«™çš„çŠ¶æ€æ›´æ–°ï¼ˆå“åº”å¤„ç†ï¼‰åˆ™æ˜¯ä»å†…åˆ°å¤–ä¾æ¬¡å®Œæˆçš„ã€‚ä»»ä½•ä¸€å±‚æ£€æŸ¥å¤±è´¥ï¼ˆæ¯”å¦‚ç­¾è¯æœ‰é—®é¢˜ï¼‰ï¼Œéƒ½å¯ä»¥ç›´æ¥å°†æ—…å®¢"é£è¿”"ï¼ˆä¸­æ–­è¯·æ±‚ï¼Œç›´æ¥è¿”å›é”™è¯¯å“åº”ï¼‰ï¼Œè€Œæ— éœ€ç»è¿‡åç»­çš„æµç¨‹ã€‚</p>
                </div>

                <div class="section">
                    <h3>ä¸‰ã€ åŠŸèƒ½éœ€æ±‚</h3>
                    <p>æœ¬é¢˜è¦æ±‚ä½ å®ç° <code>HttpHandler</code> ç±»ã€‚</p>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.buffer.Unpooled;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.SimpleChannelInboundHandler;
import io.netty.handler.codec.http.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.nio.charset.StandardCharsets;

/**
 * HTTPè¯·æ±‚å¤„ç†å™¨
 */
public class HttpHandler extends SimpleChannelInboundHandler&lt;FullHttpRequest&gt; {

    private static final Logger logger = LoggerFactory.getLogger(HttpHandler.class);
    private final Engine engine;

    /**
     * æ„é€ å‡½æ•°
     * @param engine Webå¼•æ“å®ä¾‹ï¼Œç”¨äºè®¿é—®è·¯ç”±å™¨å’Œä¸­é—´ä»¶
     */
    public HttpHandler(Engine engine) {
        this.engine = engine;
    }

    @Override
    protected void channelRead0(ChannelHandlerContext ctx, FullHttpRequest request) {
        // TODO: å®ç°æ ¸å¿ƒå¤„ç†é€»è¾‘
        // 1. åˆ›å»º DefaultFullHttpResponse å¯¹è±¡ (é»˜è®¤ 200 OK)
        // 2. åˆ›å»º Context å¯¹è±¡
        // 3. ä½¿ç”¨ engine.getRouter().getRoute(...) æŸ¥æ‰¾å¤„ç†å™¨
        // 4. å¦‚æœ handler ä¸º nullï¼Œè°ƒç”¨ sendError(ctx, NOT_FOUND) å¹¶è¿”å›
        // 5. ç»„è£…ä¸­é—´ä»¶é“¾ (éš¾ç‚¹)
        //    - æœ€ç»ˆçš„ Handler åº”è¯¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘å¹¶è°ƒç”¨ writeResponse
        //    - éå† engine.getMiddlewares()ï¼Œå°† Handler å±‚å±‚åŒ…è£…
        // 6. æ‰§è¡Œç»„è£…å¥½çš„ Handler
        // 7. æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œè®°å½•æ—¥å¿—å¹¶è°ƒç”¨ sendError(ctx, INTERNAL_SERVER_ERROR)
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {
        // TODO: è®°å½•æ—¥å¿—å¹¶å…³é—­é€šé“ ctx.close()
    }

    /**
     * è¾…åŠ©æ–¹æ³•ï¼šå‘é€å“åº”
     */
    private void writeResponse(ChannelHandlerContext ctx, FullHttpResponse response) {
        // TODO: è°ƒç”¨ ctx.writeAndFlush(response)
    }

    /**
     * è¾…åŠ©æ–¹æ³•ï¼šå‘é€é”™è¯¯å“åº”
     */
    private void sendError(ChannelHandlerContext ctx, HttpResponseStatus status) {
        // TODO: æ„å»ºåŒ…å«é”™è¯¯ä¿¡æ¯çš„å“åº”å¹¶å‘é€
        // å“åº”ä½“å¯ä»¥ä½¿ç”¨ status.toString()
    }
}</code></pre>

                    <p>è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è¯´æ˜å®Œæˆå…¶æ ¸å¿ƒæ–¹æ³• <code>channelRead0</code> çš„é€»è¾‘ã€‚</p>

                    <h4>1. ç±»å®šä¹‰ä¸æ„é€ å‡½æ•°</h4>
                    <ul>
                        <li>å®šä¹‰ <code>public class HttpHandler extends SimpleChannelInboundHandler&lt;FullHttpRequest&gt;</code>ã€‚</li>
                        <li>æä¾›ä¸€ä¸ªå…¬å…±æ„é€ å‡½æ•° <code>public HttpHandler(Engine engine)</code> æ¥æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å¼•æ“å®ä¾‹ã€‚</li>
                    </ul>

                    <h4>2. <strong><code>channelRead0</code></strong> é‡å†™çš„æ ¸å¿ƒé€»è¾‘å®ç°</h4>
                    <p><code>channelRead0</code> æ˜¯è¯·æ±‚å¤„ç†çš„ä¸»å…¥å£ï¼Œè¯·å‚è€ƒä»¥ä¸‹æµç¨‹å®Œæˆä»£ç ç¼–å†™ï¼š</p>
                    <ol>
                        <li><strong>åˆå§‹åŒ–ä¸Šä¸‹æ–‡</strong>ï¼šåˆ›å»º <code>DefaultFullHttpResponse</code> å’Œ <code>Context</code> å¯¹è±¡ã€‚</li>
                        <li><strong>è·¯ç”±åŒ¹é…</strong>ï¼šä½¿ç”¨ <code>engine.getRouter().getRoute(...)</code> æŸ¥æ‰¾å¯¹åº”çš„ä¸šåŠ¡ Handlerã€‚è‹¥æœªæ‰¾åˆ°ï¼Œè¿”å› 404 é”™è¯¯ã€‚</li>
                        <li><strong>æ„å»ºè´£ä»»é“¾ï¼ˆå…³é”®æ­¥éª¤ï¼‰</strong>ï¼š
                            <ul>
                                <li>é¦–å…ˆå®šä¹‰ä¸€ä¸ª"æœ€ç»ˆå¤„ç†å™¨"ï¼ˆFinal Handlerï¼‰ï¼Œå®ƒçš„ä»»åŠ¡æ˜¯ï¼šæ‰§è¡ŒåŒ¹é…åˆ°çš„ä¸šåŠ¡ Handlerï¼Œå¹¶å°† <code>Context</code> ä¸­çš„å“åº”å†™å›å®¢æˆ·ç«¯ï¼ˆ<code>writeResponse</code>ï¼‰ã€‚</li>
                                <li>è·å– <code>engine.getMiddlewares()</code> åˆ—è¡¨ã€‚</li>
                                <li>ä»åå¾€å‰éå†ä¸­é—´ä»¶åˆ—è¡¨ï¼Œå°†æ¯ä¸ªä¸­é—´ä»¶å±‚å±‚åŒ…è£¹åœ¨å½“å‰çš„ Handler å¤–é¢ï¼Œå½¢æˆæ´‹è‘±æ¨¡å‹ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>æ‰§è¡Œä¸å¼‚å¸¸å¤„ç†</strong>ï¼š
                            <ul>
                                <li>å¯åŠ¨æ„å»ºå¥½çš„è´£ä»»é“¾ã€‚</li>
                                <li>å…¨ç¨‹æ•è·å¼‚å¸¸ï¼ˆ<code>try-catch</code>ï¼‰ï¼Œè‹¥å‘ç”Ÿé”™è¯¯åˆ™è®°å½•æ—¥å¿—å¹¶è¿”å› 500 é”™è¯¯ã€‚</li>
                            </ul>
                        </li>
                    </ol>

                    <h4>3. å…¶ä»–æ–¹æ³•</h4>
                    <ul>
                        <li>å®ç°ç§æœ‰çš„ <code>writeResponse</code> å’Œ <code>sendError</code> æ–¹æ³•ï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€å“åº”ã€‚</li>
                        <li>é‡å†™ <code>exceptionCaught</code> æ–¹æ³•ï¼Œç”¨äºå¤„ç† Netty é€šé“çº§åˆ«çš„å¼‚å¸¸ï¼Œé€šå¸¸æ˜¯è®°å½•æ—¥å¿—å¹¶å…³é—­è¿æ¥ã€‚</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>å››ã€ è¾…åŠ©ä»£ç </h3>
                    <h4>1. Middleware æ¥å£</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

@FunctionalInterface
public interface Middleware {
    /**
     * å¤„ç†è¯·æ±‚
     *
     * è¯¥æ–¹æ³•åœ¨è¯·æ±‚å¤„ç†é“¾ä¸­è¢«è°ƒç”¨ï¼Œå¯ä»¥ï¼š
     * 1. åœ¨è°ƒç”¨next.handle(ctx)ä¹‹å‰è¿›è¡Œé¢„å¤„ç†
     * 2. åœ¨è°ƒç”¨next.handle(ctx)ä¹‹åè¿›è¡Œåå¤„ç†
     * 3. å†³å®šæ˜¯å¦ç»§ç»­å¤„ç†é“¾
     *
     * @param ctx è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰ä¿¡æ¯
     * @param next ä¸‹ä¸€ä¸ªå¤„ç†å™¨ï¼Œç”¨äºç»§ç»­å¤„ç†é“¾
     * @throws Exception å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸
     */
    void handle(Context ctx, Handler next) throws Exception;
}</code></pre>

                    <h4>2. Handler æ¥å£</h4>
                    <pre><code class="language-java">package com.jinitamy.core;
@FunctionalInterface
public interface Handler {
    /**
     * å¤„ç†HTTPè¯·æ±‚
     *
     * è¯¥æ–¹æ³•åœ¨è·¯ç”±åŒ¹é…æˆåŠŸåè¢«è°ƒç”¨ï¼Œç”¨äºå¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
     * å¯ä»¥é€šè¿‡Contextå¯¹è±¡ï¼š
     * 1. è·å–è¯·æ±‚ä¿¡æ¯ï¼ˆæ–¹æ³•ã€è·¯å¾„ã€å‚æ•°ç­‰ï¼‰
     * 2. è®¾ç½®å“åº”ä¿¡æ¯ï¼ˆçŠ¶æ€ç ã€å“åº”ä½“ç­‰ï¼‰
     * 3. è®¿é—®è‡ªå®šä¹‰å±æ€§
     *
     * @param ctx è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰ä¿¡æ¯
     * @throws Exception å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸
     */
    void handle(Context ctx) throws Exception;
}</code></pre>

                    <h4>3. Engine ç±»ï¼ˆæ¡©ä»£ç ï¼‰</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

import java.util.ArrayList;
import java.util.List;

/**
 * è¿™æ˜¯ä¸€ä¸ªä¸´æ—¶çš„ Engine ç±»ï¼Œç”¨äºè¾…åŠ© HttpHandler çš„å¼€å‘
 * å®Œæ•´åŠŸèƒ½å°†åœ¨åç»­ä½œä¸šä¸­å®ç°
 */
public class Engine {
    private final Router router = new Router();
    private final List&lt;Middleware&gt; middlewares = new ArrayList&lt;&gt;();

    /**
     * è·å–è·¯ç”±å™¨
     */
    public Router getRouter() {
        return router;
    }

    /**
     * è·å–ä¸­é—´ä»¶åˆ—è¡¨
     */
    public List&lt;Middleware&gt; getMiddlewares() {
        return middlewares;
    }

    // --- ä»¥ä¸‹æ–¹æ³•ä»…ç”¨äºæµ‹è¯•è¾…åŠ©ï¼Œé HttpHandler å¿…é¡» ---

    public void get(String path, Handler handler) {
         router.addRoute(io.netty.handler.codec.http.HttpMethod.GET, path, handler);
    }

    public void use(Middleware middleware) {
        middlewares.add(middleware);
    }
}</code></pre>

                    <h4>4. Context ç±»ï¼ˆ<a href="https://www.yuque.com/xiangzz-yg7uh/fqsu44/szmc2cgsf1aoq4tg" target="_blank">å¤§ä½œä¸šPart 2: Contextä¸Šä¸‹æ–‡ç®¡ç†</a> ä¸­çš„å®ç°ï¼‰</h4>
                    <pre><code class="language-java">package com.jinitamy.core;
public class Context { //... }</code></pre>
                </div>

                <div class="section">
                    <h3>äº”ã€ æµ‹è¯•ä»£ç ä¸éªŒè¯æ–¹æ¡ˆ</h3>
                    <p>ä¸ºäº†éªŒè¯ä½ å®ç°çš„ <code>HttpHandler</code> æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç‹¬ç«‹è¿è¡Œçš„ <code>TestServer</code> ç±»ã€‚</p>
                    <p>å®ƒä¼šå¯åŠ¨ä¸€ä¸ªçœŸå®çš„ Netty HTTP æœåŠ¡å™¨ã€‚</p>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.bootstrap.ServerBootstrap;
import io.netty.channel.Channel;
import io.netty.channel.ChannelInitializer;
import io.netty.channel.EventLoopGroup;
import io.netty.channel.nio.NioEventLoopGroup;
import io.netty.channel.socket.SocketChannel;
import io.netty.channel.socket.nio.NioServerSocketChannel;
import io.netty.handler.codec.http.HttpMethod;
import io.netty.handler.codec.http.HttpObjectAggregator;
import io.netty.handler.codec.http.HttpServerCodec;
import java.nio.charset.StandardCharsets;

public class TestServer {

    public static void main(String[] args) throws InterruptedException {
        // 1. åˆ›å»ºå¼•æ“å®ä¾‹
        Engine engine = new Engine();

        // 2. æ³¨å†Œä¸­é—´ä»¶
        // ä¸­é—´ä»¶1: æ—¥å¿—è®°å½•å™¨
        engine.use((ctx, next) -> {
            long start = System.currentTimeMillis();
            System.out.println("=> [Middleware 1] Request In: " + ctx.getRequest().uri());
            next.handle(ctx); //  è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨
            long duration = System.currentTimeMillis() - start;
            System.out.println("<= [Middleware 1] Request Out. Duration: " + duration + "ms");
        });

        // ä¸­é—´ä»¶2: ç®€å•çš„Headerè®¾ç½®
        engine.use((ctx, next) -> {
            System.out.println("   => [Middleware 2] Adding Header...");
            ctx.getResponse().headers().set("X-Powered-By", "Jinitamy-Framework");
            next.handle(ctx); // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨
            System.out.println("   <= [Middleware 2] After handler.");
        });

        // 3. æ³¨å†Œè·¯ç”±
        engine.getRouter().addRoute(HttpMethod.GET, "/", ctx -> {
            System.out.println("      -> Executing Handler for /");
            ctx.getResponse().content().writeBytes("&lt;h1&gt;Welcome Home!&lt;/h1&gt;".getBytes(StandardCharsets.UTF_8));
        });

        engine.getRouter().addRoute(HttpMethod.GET, "/user/:name", ctx -> {
            System.out.println("      -> Executing Handler for /user/:name");
            String name = ctx.getParam("name").orElse("guest");
            String body = "&lt;h1&gt;Hello, " + name + "&lt;/h1&gt;";
            ctx.getResponse().content().writeBytes(body.getBytes(StandardCharsets.UTF_8));
        });

        engine.getRouter().addRoute(HttpMethod.GET, "/error", ctx -> {
            System.out.println("      -> Executing Handler for /error, which will throw exception");
            throw new RuntimeException("This is a simulated error!");
        });


        // 4. å¯åŠ¨NettyæœåŠ¡å™¨
        EventLoopGroup bossGroup = new NioEventLoopGroup(1);
        EventLoopGroup workerGroup = new NioEventLoopGroup();
        try {
            ServerBootstrap b = new ServerBootstrap();
            b.group(bossGroup, workerGroup)
             .channel(NioServerSocketChannel.class)
             .childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {
                 @Override
                 protected void initChannel(SocketChannel ch) {
                     ch.pipeline().addLast(new HttpServerCodec());
                     ch.pipeline().addLast(new HttpObjectAggregator(1024 * 1024));
                     // å°†ä½ è‡ªå·±å®ç°çš„ HttpHandler æ·»åŠ åˆ°æµæ°´çº¿
                     ch.pipeline().addLast(new HttpHandler(engine));
                 }
             });

            Channel ch = b.bind(8080).sync().channel();
            System.out.println("Server started at http://localhost:8080");
            ch.closeFuture().sync();
        } finally {
            bossGroup.shutdownGracefully();
            workerGroup.shutdownGracefully();
        }
    }
}</code></pre>

                    <h4>å¦‚ä½•éªŒè¯</h4>
                    <ol>
                        <li>å°†ä½ çš„ <code>HttpHandler.java</code> å’Œæ‰€æœ‰è¾…åŠ©ç±»ï¼Œä»¥åŠä¸Šé¢çš„ <code>TestServer.java</code> æ”¾åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ã€‚</li>
                        <li>è¿è¡Œ <code>TestServer</code> çš„ <code>main</code> æ–¹æ³•ã€‚</li>
                        <li>æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤è¡Œï¼Œä½¿ç”¨ <code>curl</code> å‘½ä»¤ï¼ˆæˆ–æµè§ˆå™¨ï¼‰è¿›è¡Œæµ‹è¯•ï¼š</li>
                    </ol>

                    <h4>éªŒè¯æ­¥éª¤</h4>
                    <ul>
                        <li><strong>æµ‹è¯•1ï¼šè®¿é—®é¦–é¡µ</strong>
                            <ul>
                                <li>å‘½ä»¤: <code>curl -v http://localhost:8080/</code></li>
                                <li><strong>é¢„æœŸç»ˆç«¯è¾“å‡º</strong>:
                                    <pre><code class="language-plaintext">=> [Middleware 1] Request In: /
   => [Middleware 2] Adding Header...
      -> Executing Handler for /
   <= [Middleware 2] After handler.
<= [Middleware 1] Request Out. Duration: ...ms</code></pre>
                                </li>
                                <li><strong>é¢„æœŸ <code>curl</code> è¾“å‡º</strong>: ä¼šçœ‹åˆ° <code>&lt;h1&gt;Welcome Home!&lt;/h1&gt;</code> å’Œä¸€ä¸ª <code>X-Powered-By: Jinitamy-Framework</code> çš„å“åº”å¤´ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>æµ‹è¯•2ï¼šè®¿é—®å¸¦å‚æ•°çš„åŠ¨æ€è·¯ç”±</strong>
                            <ul>
                                <li>å‘½ä»¤: <code>curl -v http://localhost:8080/user/Gemini</code></li>
                                <li><strong>é¢„æœŸç»ˆç«¯è¾“å‡º</strong>: ç±»ä¼¼ä¸Šé¢ï¼Œä½†URIä¼šæ˜¯ <code>/user/Gemini</code>ï¼ŒHandleræ—¥å¿—ä¹Ÿä¸åŒã€‚</li>
                                <li><strong>é¢„æœŸ <code>curl</code> è¾“å‡º</strong>: <code>&lt;h1&gt;Hello, Gemini&lt;/h1&gt;</code> å’Œè‡ªå®šä¹‰å“åº”å¤´ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>æµ‹è¯•3ï¼šè®¿é—®æœªå®šä¹‰çš„è·¯ç”± (404)</strong>
                            <ul>
                                <li>å‘½ä»¤: <code>curl -v http://localhost:8080/not-found</code></li>
                                <li><strong>é¢„æœŸ <code>curl</code> è¾“å‡º</strong>: çœ‹åˆ° <code>404 Not Found</code> çŠ¶æ€ç å’Œæ¶ˆæ¯ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>æµ‹è¯•4ï¼šè®¿é—®ä¼šæŠ›å‡ºå¼‚å¸¸çš„è·¯ç”± (500)</strong>
                            <ul>
                                <li>å‘½ä»¤: <code>curl -v http://localhost:8080/error</code></li>
                                <li><strong>é¢„æœŸç»ˆç«¯è¾“å‡º</strong>: ä¼šåœ¨Handleræ‰§è¡Œæ—¥å¿—åçœ‹åˆ°ä½ çš„ <code>HttpHandler</code> æ•è·å¹¶è®°å½•äº†å¼‚å¸¸ã€‚</li>
                                <li><strong>é¢„æœŸ <code>curl</code> è¾“å‡º</strong>: çœ‹åˆ° <code>500 Internal Server Error</code> çŠ¶æ€ç å’Œæ¶ˆæ¯ã€‚</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h3>å…­ã€ è¯„åˆ†æ ‡å‡†</h3>
                    <ul>
                        <li><strong>æ ¸å¿ƒé€»è¾‘æ­£ç¡®æ€§ (60%)</strong>:
                            <ul>
                                <li><code>channelRead0</code> çš„æ•´ä½“å¤„ç†æµç¨‹æ˜¯å¦å®Œæ•´ã€æ¸…æ™°ï¼Œä¸”ä¸¥æ ¼ç¬¦åˆåŠŸèƒ½éœ€æ±‚çš„æ­¥éª¤ã€‚</li>
                                <li>ä¸­é—´ä»¶è´£ä»»é“¾çš„æ„å»ºé€»è¾‘æ˜¯å¦æ­£ç¡®ï¼ˆç‰¹åˆ«æ˜¯<strong>åå‘åŒ…è£…</strong>å’Œæ‰§è¡Œé¡ºåºï¼‰ã€‚</li>
                                <li>èƒ½å¤Ÿé€šè¿‡æ‰€æœ‰ <code>curl</code> æµ‹è¯•ç”¨ä¾‹ï¼Œè¡Œä¸ºä¸é¢„æœŸå®Œå…¨ä¸€è‡´ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>å¥å£®æ€§ä¸é”™è¯¯å¤„ç† (30%)</strong>:
                            <ul>
                                <li>èƒ½å¦æ­£ç¡®å¤„ç† <code>404 Not Found</code> çš„æƒ…å†µã€‚</li>
                                <li>èƒ½å¦é€šè¿‡ <code>try-catch</code> æ­£ç¡®æ•è·å¤„ç†é“¾ä¸­çš„å¼‚å¸¸å¹¶è¿”å› <code>500 Internal Server Error</code>ã€‚</li>
                                <li>æ˜¯å¦æ­£ç¡®å®ç°äº† <code>exceptionCaught</code> æ–¹æ³•æ¥å¤„ç†é€šé“å¼‚å¸¸ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>ä»£ç è´¨é‡ (10%)</strong>:
                            <ul>
                                <li>ä»£ç ç»“æ„æ˜¯å¦æ¸…æ™°ï¼Œé€»è¾‘æ˜¯å¦æ˜“äºç†è§£ã€‚</li>
                                <li>æ˜¯å¦éµå¾ª Java ç¼–ç è§„èŒƒã€‚</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Slide 6: Part 4 - Engineæ ¸å¿ƒå¼•æ“ -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šPart 4: Engine æ ¸å¿ƒå¼•æ“</h2>
                <div class="section">
                    <h3>1. æŠ€æœ¯èƒŒæ™¯</h3>
                    <p><code>Engine</code> ç±»æ˜¯ Web æ¡†æ¶çš„æ ¸å¿ƒå…¥å£ã€‚å®ƒæ‰®æ¼”ç€"æŒ‡æŒ¥å®˜"çš„è§’è‰²ï¼Œè´Ÿè´£ï¼š</p>
                    <ul>
                        <li><strong>æœåŠ¡å™¨å¯åŠ¨ä¸é…ç½®</strong>: å¯åŠ¨åº•å±‚çš„ Netty æœåŠ¡å™¨ï¼Œç»‘å®šç«¯å£ã€‚</li>
                        <li><strong>è·¯ç”±ç®¡ç†</strong>: æä¾› API ä¾›ç”¨æˆ·æ³¨å†Œè·¯ç”±ï¼ˆå¦‚ <code>.get()</code>, <code>.post()</code>ï¼‰ã€‚</li>
                        <li><strong>ä¸­é—´ä»¶ç®¡ç†</strong>: æä¾› API ä¾›ç”¨æˆ·æ³¨å†Œå…¨å±€ä¸­é—´ä»¶ï¼ˆå¦‚ <code>.use()</code>ï¼‰ã€‚</li>
                        <li><strong>è¯·æ±‚åˆ†å‘</strong>: å°†åº•å±‚çš„ç½‘ç»œäº‹ä»¶è½¬åŒ–ä¸º HTTP è¯·æ±‚ï¼Œå¹¶äº¤ç»™ <code>HttpHandler</code> å¤„ç†ã€‚</li>
                    </ul>
                    <p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œ<code>Engine</code> æ˜¯ä»–ä»¬ä¸æ¡†æ¶äº¤äº’çš„ä¸»è¦ç•Œé¢ã€‚</p>
                    <pre><code class="language-java">Engine engine = new Engine();
engine.use(loggerMiddleware);
engine.get("/hello", ctx -> ctx.status(200).body("Hello"));
engine.start(); // å¯åŠ¨æœåŠ¡å™¨</code></pre>

                    <h4>ç»è¿‡å‰ä¸‰ä¸ªé˜¶æ®µçš„å¼€å‘ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº† Web æ¡†æ¶çš„å‡ ä¸ªå…³é”®ç»„ä»¶ï¼š</h4>
                    <ul>
                        <li><strong>Router (è·¯ç”±å™¨)</strong>ï¼šè´Ÿè´£åƒåœ°å›¾ä¸€æ ·æŒ‡å¼•æ–¹å‘ï¼Œå°† URL æ˜ å°„åˆ°å¯¹åº”çš„å¤„ç†å™¨</li>
                        <li><strong>Context (ä¸Šä¸‹æ–‡)</strong>ï¼šè´Ÿè´£åƒåŒ…è£¹ä¸€æ ·å°è£…è¯·æ±‚å’Œå“åº”æ•°æ®ï¼Œåœ¨å„ä¸ªç¯èŠ‚é—´ä¼ é€’</li>
                        <li><strong>HttpHandler (å¤„ç†å™¨)</strong>ï¼šè´Ÿè´£åƒäº¤é€šæ¢çº½ä¸€æ ·è°ƒåº¦ä¸­é—´ä»¶å’Œä¸šåŠ¡é€»è¾‘ï¼Œå®Œæˆ HTTP è¯·æ±‚çš„å®Œæ•´å¤„ç†æµç¨‹</li>
                    </ul>
                    <p>ç„¶è€Œï¼Œç›®å‰è¿™äº›ç»„ä»¶è¿˜æ˜¯ä¸€å †é›¶æ•£çš„é›¶ä»¶ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¼ºæœ‰åŠ›çš„"å¿ƒè„"å°†å®ƒä»¬ç»„è£…èµ·æ¥ï¼Œå¹¶æä¾›åŠ¨åŠ›è®©æ•´ä¸ªç³»ç»Ÿè¿è½¬èµ·æ¥ã€‚è¿™å°±æ˜¯æœ¬é˜¶æ®µçš„ä»»åŠ¡â€”â€”å®ç° <code>Engine</code><b> (å¼•æ“)</b> ç±»ã€‚</p>
                    <img src="images/18-2-engine.png" alt="Engineæ¶æ„å›¾" class="engine-image" style="width: 80%;">
                </div>

                <div class="section">
                    <h3>Engine çš„èŒè´£</h3>
                    <p><code>Engine</code> ç±»æ˜¯æ¡†æ¶çš„å…¥å£ç‚¹å’Œæ§åˆ¶ä¸­å¿ƒã€‚å®ƒçš„èŒè´£æ˜¯ï¼š</p>
                    <ul>
                        <li><strong>å±è”½åº•å±‚ç»†èŠ‚</strong>ï¼šå°è£… Netty çš„å¯åŠ¨å’Œé…ç½®è¿‡ç¨‹ï¼Œè®©ç”¨æˆ·åªéœ€ä¸€è¡Œä»£ç  <code>engine.start()</code> å°±èƒ½å¯åŠ¨æœåŠ¡å™¨</li>
                        <li><strong>ç»„ä»¶ç»„è£…</strong>ï¼šå°† Routerã€Middleware å’Œ HttpHandler ä¸²è”èµ·æ¥</li>
                        <li><strong>æä¾› API</strong>ï¼šæä¾›ç®€æ´çš„æ¥å£ä¾›ç”¨æˆ·æ³¨å†Œè·¯ç”± (<code>get</code>, <code>post</code>) å’Œä¸­é—´ä»¶ (<code>use</code>)</li>
                    </ul>
                    <p>æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœ <code>Router</code> æ˜¯å¯¼èˆªä»ªï¼Œ<code>HttpHandler</code> æ˜¯ä¼ åŠ¨ç³»ç»Ÿï¼Œé‚£ä¹ˆ <code>Engine</code> å°±æ˜¯æ•´è¾†è½¦çš„<b>å‘åŠ¨æœºå’Œåº•ç›˜</b>ã€‚</p>
                </div>

                <div class="section">
                    <h3>2. ç›¸å…³çŸ¥è¯†</h3>
                    <p><code>Engine</code> çš„æ ¸å¿ƒä»»åŠ¡æ˜¯å¯åŠ¨ä¸€ä¸ª Netty HTTP æœåŠ¡å™¨ã€‚ä½ éœ€è¦äº†è§£ä»¥ä¸‹ Netty å¯åŠ¨è¾…åŠ©ç±»ï¼š</p>
                    <ul>
                        <li><strong>ServerBootstrap</strong>ï¼šNetty æœåŠ¡ç«¯çš„å¯åŠ¨è¾…åŠ©ç±»ï¼Œç”¨äºé…ç½®å’Œå¯åŠ¨æœåŠ¡å™¨</li>
                        <li><strong>EventLoopGroup</strong>ï¼šNetty çš„çº¿ç¨‹æ¨¡å‹
                            <ul>
                                <li><code>bossGroup</code>: è´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥ï¼ˆé€šå¸¸ 1 ä¸ªçº¿ç¨‹å³å¯ï¼‰</li>
                                <li><code>workerGroup</code>: è´Ÿè´£å¤„ç†å·²å»ºç«‹è¿æ¥çš„ IO è¯»å†™ï¼ˆçº¿ç¨‹æ•°é€šå¸¸é»˜è®¤ä¸º CPU æ ¸å¿ƒæ•° * 2ï¼‰</li>
                            </ul>
                        </li>
                        <li><strong>ChannelInitializer</strong>ï¼šç”¨äºåˆå§‹åŒ–æ¯ä¸€ä¸ªæ–°è¿æ¥çš„ ChannelPipelineï¼ˆæµæ°´çº¿ï¼‰
                            <ul>
                                <li><code>HttpServerCodec</code>: HTTP ç¼–è§£ç å™¨</li>
                                <li><code>HttpObjectAggregator</code>: HTTP æ¶ˆæ¯èšåˆå™¨ï¼ˆå°†åˆ†å—çš„è¯·æ±‚èšåˆæˆå®Œæ•´çš„ <code>FullHttpRequest</code>ï¼‰</li>
                                <li><code>HttpHandler</code>: æˆ‘ä»¬è‡ªå·±å®ç°çš„è¯·æ±‚å¤„ç†å™¨ï¼ˆæ³¨æ„ï¼šè¿™é‡Œéœ€è¦å°† Engine å®ä¾‹ä¼ ç»™å®ƒï¼‰</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h3>3. è®¾è®¡éœ€æ±‚</h3>
                    <p>è¯·åœ¨ <code>com.jinitamy.core</code> åŒ…ä¸‹å®ç° <code>Engine</code> ç±»ã€‚</p>

                    <h4>ç±»ç»“æ„</h4>
                    <pre><code class="language-java">package com.jinitamy.core;

import io.netty.bootstrap.ServerBootstrap;
import io.netty.channel.ChannelInitializer;
import io.netty.channel.ChannelOption;
import io.netty.channel.EventLoopGroup;
import io.netty.channel.nio.NioEventLoopGroup;
import io.netty.channel.socket.SocketChannel;
import io.netty.channel.socket.nio.NioServerSocketChannel;
import io.netty.handler.codec.http.HttpMethod;
import io.netty.handler.codec.http.HttpObjectAggregator;
import io.netty.handler.codec.http.HttpServerCodec;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.ArrayList;
import java.util.List;

/**
 * Webå¼•æ“æ ¸å¿ƒç±»
 */
public class Engine {
    private static final Logger logger = LoggerFactory.getLogger(Engine.class);

    private final Router router;
    private final List&lt;Middleware&gt; middlewares;
    private int port = 8080;

    private EventLoopGroup bossGroup;
    private EventLoopGroup workerGroup;
    private volatile boolean running = false;

    public Engine() {
        // TODO
    }

    // --- é…ç½®æ–¹æ³• ---

    public void setPort(int port) {
        // TODO
    }

    // --- æ³¨å†Œæ–¹æ³• ---

    /**
     * æ·»åŠ ä¸­é—´ä»¶
     */
    public void use(Middleware middleware) {
        // TODO
    }

    /**
     * æ³¨å†Œ GET è·¯ç”±
     */
    public void get(String pattern, Handler handler) {
        // TODO
    }

    /**
     * æ³¨å†Œ POST è·¯ç”±
     */
    public void post(String pattern, Handler handler) {
        // TODO
    }

    // --- æ ¸å¿ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³• ---

    /**
     * å¯åŠ¨æœåŠ¡å™¨
     */
    public void start() throws Exception {
        if (running) {
            throw new IllegalStateException("Server is already running");
        }

        // TODO: å®ç°æœåŠ¡å™¨å¯åŠ¨é€»è¾‘
        // 1. åˆå§‹åŒ– bossGroup (NioEventLoopGroup, çº¿ç¨‹æ•°1)
        // 2. åˆå§‹åŒ– workerGroup (NioEventLoopGroup)
        // 3. åˆ›å»º ServerBootstrap
        // 4. é…ç½® bootstrap:
        //    - group(bossGroup, workerGroup)
        //    - channel(NioServerSocketChannel.class)
        //    - childHandler(new ChannelInitializer...)
        //      åœ¨ initChannel ä¸­ä¾æ¬¡æ·»åŠ :
        //      1. HttpServerCodec
        //      2. HttpObjectAggregator (maxContentLength è®¾ä¸º 65536)
        //      3. HttpHandler (ä¼ å…¥ this)
        // 5. ç»‘å®šç«¯å£ b.bind(port).sync()
        // 6. è®¾ç½® running = true å¹¶æ‰“å°æ—¥å¿—
        // 7. å¼‚å¸¸å¤„ç†ï¼šå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè°ƒç”¨ shutdownGracefully å¹¶æŠ›å‡ºå¼‚å¸¸
    }

    /**
     * åœæ­¢æœåŠ¡å™¨
     */
    public void stop() {
        if (!running) {
            return;
        }

        // TODO: å®ç°æœåŠ¡å™¨åœæ­¢é€»è¾‘
        // 1. è°ƒç”¨ bossGroup.shutdownGracefully().sync()
        // 2. è°ƒç”¨ workerGroup.shutdownGracefully().sync()
        // 3. è®¾ç½® running = false
        // 4. æ•è· InterruptedException
    }

    // --- Getters ---

    public Router getRouter() {
        // TODO
    }

    public List&lt;Middleware&gt; getMiddlewares() {
        // TODO
    }
}</code></pre>
                </div>

                <div class="section">
                    <h3>4. åŠŸèƒ½æè¿°</h3>
                    <h4>åŠŸèƒ½æè¿°</h4>
                    <ol>
                        <li><strong>è·¯ç”±ä¸ä¸­é—´ä»¶ç®¡ç†</strong>: <code>Engine</code> å†…éƒ¨æŒæœ‰ <code>Router</code> å’Œ <code>middlewares</code> åˆ—è¡¨ã€‚<code>get()</code>, <code>post()</code>, <code>use()</code> æ–¹æ³•æ˜¯å¯¹è¿™äº›å†…éƒ¨ç»„ä»¶æ“ä½œçš„å°è£…ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚</li>
                        <li><strong>start()</strong>: è¿™æ˜¯æœ€å…³é”®çš„æ–¹æ³•ã€‚å®ƒéœ€è¦ç»„è£… Netty çš„å„ä¸ªç»„ä»¶ã€‚
                            <ul>
                                <li><strong>Pipeline é¡ºåºè‡³å…³é‡è¦</strong>: å¿…é¡»å…ˆè§£ç  (<code>HttpServerCodec</code>)ï¼Œå†èšåˆ (<code>HttpObjectAggregator</code>)ï¼Œæœ€åæ‰æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡å¤„ç† (<code>HttpHandler</code>)ã€‚</li>
                                <li><strong>HttpHandler</strong>: å®ä¾‹åŒ– <code>HttpHandler</code> æ—¶ï¼Œéœ€è¦å°† <code>Engine</code> è‡ªèº« (<code>this</code>) ä¼ é€’è¿›å»ï¼Œè¿™æ · <code>HttpHandler</code> æ‰èƒ½è®¿é—®åˆ° <code>Engine</code> ä¸­çš„ <code>Router</code> å’Œ <code>middlewares</code>ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>stop()</strong>: ä¼˜é›…åœæœºã€‚è°ƒç”¨ Netty çº¿ç¨‹ç»„çš„ <code>shutdownGracefully()</code> æ–¹æ³•ï¼Œç¡®ä¿æ‰€æœ‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚å®Œæˆåå†å…³é—­èµ„æºã€‚</li>
                    </ol>

                    <h4>start() æ–¹æ³•å®ç°è¦ç‚¹</h4>
                    <ol>
                        <li><strong>åˆå§‹åŒ–çº¿ç¨‹ç»„</strong>ï¼š
                            <ul>
                                <li>åˆ›å»º bossGroup (NioEventLoopGroup, çº¿ç¨‹æ•°1)</li>
                                <li>åˆ›å»º workerGroup (NioEventLoopGroup)</li>
                            </ul>
                        </li>
                        <li><strong>é…ç½® ServerBootstrap</strong>ï¼š
                            <ul>
                                <li>group(bossGroup, workerGroup)</li>
                                <li>channel(NioServerSocketChannel.class)</li>
                                <li>childHandler è®¾ç½® ChannelInitializer</li>
                            </ul>
                        </li>
                        <li><strong>é…ç½® Pipeline</strong>ï¼š
                            <ul>
                                <li>HttpServerCodec</li>
                                <li>HttpObjectAggregator (maxContentLength è®¾ä¸º 65536)</li>
                                <li>HttpHandler (ä¼ å…¥ this)</li>
                            </ul>
                        </li>
                        <li><strong>ç»‘å®šç«¯å£</strong>ï¼šb.bind(port).sync()</li>
                        <li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè°ƒç”¨ shutdownGracefully å¹¶æŠ›å‡ºå¼‚å¸¸</li>
                    </ol>

                    <h4>stop() æ–¹æ³•å®ç°è¦ç‚¹</h4>
                    <ul>
                        <li>è°ƒç”¨ bossGroup.shutdownGracefully().sync()</li>
                        <li>è°ƒç”¨ workerGroup.shutdownGracefully().sync()</li>
                        <li>è®¾ç½® running = false</li>
                        <li>æ•è· InterruptedException</li>
                    </ul>

                    <h4>å…¶ä»–æ–¹æ³•</h4>
                    <ul>
                        <li><strong>è·¯ç”±ä¸ä¸­é—´ä»¶ç®¡ç†</strong>ï¼š<code>Engine</code> å†…éƒ¨æŒæœ‰ <code>Router</code> å’Œ <code>middlewares</code> åˆ—è¡¨ï¼Œ<code>get()</code>, <code>post()</code>, <code>use()</code> æ–¹æ³•æ˜¯å¯¹è¿™äº›å†…éƒ¨ç»„ä»¶æ“ä½œçš„å°è£…</li>
                        <li><strong>Pipeline é¡ºåº</strong>ï¼šå¿…é¡»å…ˆè§£ç  (HttpServerCodec)ï¼Œå†èšåˆ (HttpObjectAggregator)ï¼Œæœ€åæ‰æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡å¤„ç† (HttpHandler)</li>
                        <li><strong>HttpHandler å®ä¾‹åŒ–</strong>ï¼šéœ€è¦å°† <code>Engine</code> è‡ªèº« (<code>this</code>) ä¼ é€’è¿›å»ï¼Œè¿™æ · <code>HttpHandler</code> æ‰èƒ½è®¿é—®åˆ° <code>Engine</code> ä¸­çš„ <code>Router</code> å’Œ <code>middlewares</code></li>
                    </ul>
                </div>

                <div class="section">
                    <h3>5. æµ‹è¯•ä¸éªŒè¯</h3>
                    <p>è¯·åˆ›å»ºä¸€ä¸ªæ¼”ç¤ºåº”ç”¨ <code>EngineApp</code> (æˆ–è€…ç›´æ¥åœ¨ <code>test</code> ç›®å½•ä¸‹åˆ›å»º <code>EngineTest</code>) æ¥éªŒè¯ä½ çš„ <code>Engine</code>ã€‚</p>

                    <h4>App.java</h4>
                    <pre><code class="language-java">package com.jinitamy.demo;

import com.jinitamy.core.Engine;

public class EngineApp {
    public static void main(String[] args) throws Exception {
        Engine engine = new Engine();
        engine.setPort(8080);

        // 1. æ³¨å†Œä¸­é—´ä»¶
        engine.use((ctx, next) -> {
            System.out.println("LOG: Request " + ctx.getPath());
            next.handle(ctx);
        });

        // 2. æ³¨å†Œè·¯ç”±
        engine.get("/", ctx -> ctx.getResponse().content().writeBytes("Hello Engine!".getBytes()));

        engine.get("/user/:name", ctx -> {
            String name = ctx.getParam("name").orElse("Unknown");
            ctx.getResponse().content().writeBytes(("Hello " + name).getBytes());
        });

        // 3. å¯åŠ¨æœåŠ¡å™¨
        System.out.println("Starting server on port 8080...");
        engine.start();
    }
}</code></pre>

                    <h4>éªŒè¯æ­¥éª¤</h4>
                    <ol>
                        <li>è¿è¡Œ <code>main()</code>ã€‚</li>
                        <li>ä½¿ç”¨æµè§ˆå™¨æˆ– <code>curl</code> è®¿é—®ï¼š
                            <ul>
                                <li><code>http://localhost:8080/</code> -> åº”è¿”å› "Hello Engine!" ä¸”æ§åˆ¶å°æ‰“å°æ—¥å¿—ã€‚</li>
                                <li><code>http://localhost:8080/user/Tom</code> -> åº”è¿”å› "Hello Tom"ã€‚</li>
                            </ul>
                        </li>
                    </ol>
                </div>

                <div class="section">
                    <h3>6. è¯„åˆ†æ ‡å‡†</h3>
                    <ul>
                        <li><strong>å¯åŠ¨é€»è¾‘æ­£ç¡®æ€§ (50%)</strong>:
                            <ul>
                                <li>èƒ½å¤ŸæˆåŠŸå¯åŠ¨ Netty æœåŠ¡å™¨å¹¶ç»‘å®šæŒ‡å®šç«¯å£ã€‚</li>
                                <li>ChannelPipeline é…ç½®æ­£ç¡®ï¼ˆCodec, Aggregator, HttpHandlerï¼‰ã€‚</li>
                            </ul>
                        </li>
                        <li><strong>åŠŸèƒ½å®Œæ•´æ€§ (30%)</strong>:
                            <ul>
                                <li><code>get</code>, <code>post</code>, <code>use</code> ç­‰è¾…åŠ©æ–¹æ³•å®ç°æ­£ç¡®ã€‚</li>
                                <li><code>HttpHandler</code> èƒ½å¤Ÿæ­£ç¡®è·å–åˆ° Router å’Œ Middlewareã€‚</li>
                            </ul>
                        </li>
                        <li><strong>ä»£ç è§„èŒƒä¸å¥å£®æ€§ (20%)</strong>:
                            <ul>
                                <li>åŒ…å«ä¼˜é›…åœæœº (<code>stop</code>) é€»è¾‘ã€‚</li>
                                <li>å¼‚å¸¸å¤„ç†å¾—å½“ã€‚</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Slide 7: Part 5 - æ¨¡æ¿å¼•æ“ -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šPart 5: æ¨¡æ¿å¼•æ“</h2>
                <div class="section">
                    <h3>1. æŠ€æœ¯èƒŒæ™¯</h3>
                    <p>åœ¨ä¹‹å‰çš„ä½œä¸šä¸­ï¼Œæˆ‘ä»¬çš„ <code>Handler</code> è¿”å›çš„å“åº”å†…å®¹é€šå¸¸æ˜¯ç¡¬ç¼–ç çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ <code>"Hello World"</code>ï¼‰ã€‚ä½†åœ¨å®é™…çš„ Web åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è¿”å›å¤æ‚çš„ HTML é¡µé¢ï¼Œå¹¶ä¸”è¿™äº›é¡µé¢ä¸­åŒ…å«åŠ¨æ€çš„æ•°æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åã€å•†å“åˆ—è¡¨ç­‰ï¼‰ã€‚</p>
                    <p>å¦‚æœç›´æ¥åœ¨ Java ä»£ç ä¸­æ‹¼æ¥ HTML å­—ç¬¦ä¸²ï¼Œä»£ç ä¼šå˜å¾—æå…¶æ··ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚<b>æ¨¡æ¿å¼•æ“ (Template Engine)</b> çš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†é¡µé¢ç»“æ„ï¼ˆHTMLï¼‰å’Œä¸šåŠ¡æ•°æ®ï¼ˆJava å¯¹è±¡ï¼‰åˆ†ç¦»ã€‚</p>
                </div>

                <div class="section">
                    <h3>æ¨¡æ¿å¼•æ“æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <ul>
                        <li><strong>æ¨¡æ¿ (Template)</strong>ï¼šåŒ…å«é™æ€ HTML å’Œå ä½ç¬¦çš„æ–‡ä»¶ï¼ˆå¦‚ <code>.ftl</code>ï¼‰</li>
                        <li><strong>æ•°æ® (Model)</strong>ï¼šåŒ…å«åŠ¨æ€æ•°æ®çš„ Map æˆ–å¯¹è±¡</li>
                        <li><strong>æ¸²æŸ“ (Render)</strong>ï¼šæ¨¡æ¿å¼•æ“å°†æ•°æ®å¡«å……åˆ°æ¨¡æ¿çš„å ä½ç¬¦ä¸­ï¼Œç”Ÿæˆæœ€ç»ˆçš„ HTML å­—ç¬¦ä¸²</li>
                    </ul>
                    <p>æœ¬é¡¹ç›®é€‰ç”¨ <a href="https://freemarker.apache.org/index.html">FreeMarker</a> ä½œä¸ºæ¨¡æ¿å¼•æ“ï¼ˆè¯·æŸ¥é˜…é“¾æ¥ï¼Œé˜…è¯»ä½¿ç”¨æ‰‹å†Œï¼‰ã€‚</p>
                </div>

                <div class="section">
                    <h3>2. ç›¸å…³çŸ¥è¯†</h3>
                    <p>FreeMarker æ˜¯ä¸€ä¸ªæˆç†Ÿçš„ Java æ¨¡æ¿å¼•æ“ã€‚ä½ éœ€è¦äº†è§£ä»¥ä¸‹åŸºæœ¬æ¦‚å¿µï¼š</p>
                    <ul>
                        <li><strong>Configuration</strong>ï¼šFreeMarker çš„å…¨å±€é…ç½®å¯¹è±¡ï¼Œç”¨äºè®¾ç½®æ¨¡æ¿åŠ è½½è·¯å¾„ã€å­—ç¬¦é›†ç­‰</li>
                        <li><strong>Template</strong>ï¼šä»£è¡¨ä¸€ä¸ªè§£æåçš„æ¨¡æ¿æ–‡ä»¶</li>
                        <li><strong>Data Model</strong>ï¼šä¼ ç»™æ¨¡æ¿çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª <code>Map&lt;String, Object&gt;</code></li>
                    </ul>
                </div>

                <div class="section">
                    <h3>3. è®¾è®¡éœ€æ±‚</h3>
                    <h4>3.1 ç›®å½•ç»“æ„</h4>
                    <pre><code class="language-bash">src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â””â”€â”€ com/
â”‚   â”‚       â””â”€â”€ jinitamy/
â”‚   â”‚           â””â”€â”€ core/
â”‚   â”‚               â””â”€â”€ template/
â”‚   â”‚                   â””â”€â”€ TemplateEngine.java
â”‚   â””â”€â”€ resources/
â”‚       â””â”€â”€ templates/
â”‚           â””â”€â”€ index.ftl
â””â”€â”€ test/</code></pre>

                    <h4>3.2 æ¨¡æ¿æ–‡ä»¶ (index.ftl)</h4>
                    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;${title}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;æ¬¢è¿, ${name}!&lt;/h1&gt;
    &lt;p&gt;å½“å‰æ—¶é—´: ${time}&lt;/p&gt;
    &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç”± FreeMarker æ¸²æŸ“çš„é¡µé¢ã€‚&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <p>åœ¨è¿™ä¸ªæ¨¡æ¿ä¸­ï¼Œ<code>${title}</code>, <code>${name}</code>, <code>${time}</code> æ˜¯ç­‰å¾…æ›¿æ¢çš„å˜é‡ã€‚</p>

                    <h4>3.3 æ¨¡æ¿å¼•æ“ç±» (TemplateEngine.java)</h4>
                    <pre><code class="language-java">package com.jinitamy.core.template;

import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateExceptionHandler;

import java.io.StringWriter;
import java.util.Map;

/**
 * æ¨¡æ¿å¼•æ“å°è£…ç±»
 */
public class TemplateEngine {
    private final Configuration configuration;

    public TemplateEngine() {
        // TODO: åˆå§‹åŒ– FreeMarker é…ç½®
        // 1. åˆ›å»º Configuration å®ä¾‹ (ç‰ˆæœ¬ 2.3.32)
        // 2. è®¾ç½®æ¨¡æ¿åŠ è½½è·¯å¾„ (ä½¿ç”¨ setClassLoaderForTemplateLoading)
        //    è·¯å¾„åº”æŒ‡å‘ "templates" ç›®å½•
        // 3. è®¾ç½®é»˜è®¤ç¼–ç ä¸º UTF-8
        // 4. è®¾ç½®æ¨¡æ¿å¼‚å¸¸å¤„ç† (TemplateExceptionHandler.RETHROW_HANDLER)
    }

    /**
     * æ¸²æŸ“æ¨¡æ¿
     *
     * @param viewName æ¨¡æ¿æ–‡ä»¶å (ä¾‹å¦‚ "index.ftl")
     * @param model æ•°æ®æ¨¡å‹
     * @return æ¸²æŸ“åçš„ HTML å­—ç¬¦ä¸²
     */
    public String render(String viewName, Map&lt;String, Object&gt; model) {
        // TODO: å®ç°æ¸²æŸ“é€»è¾‘
        // 1. è·å–æ¨¡æ¿å¯¹è±¡: configuration.getTemplate(viewName)
        // 2. åˆ›å»º StringWriter ç”¨äºæ¥æ”¶è¾“å‡º
        // 3. è°ƒç”¨ template.process(model, writer)
        // 4. è¿”å› writer.toString()
        // æ³¨æ„å¤„ç†å¼‚å¸¸ (å¯ä»¥ä½¿ç”¨ try-catch åŒ…è£…ä¸º RuntimeException)
        return null;
    }
}</code></pre>
                </div>

                <div class="section">
                    <h3>4. æµ‹è¯•ä¸éªŒè¯</h3>
                    <p>ä¸ºäº†éªŒè¯æ¨¡æ¿å¼•æ“æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªç®€å•çš„æµ‹è¯•ã€‚<strong>æ³¨æ„ï¼šæœ¬æ¬¡æµ‹è¯•ä¸éœ€è¦å¯åŠ¨ Netty æœåŠ¡å™¨ã€‚</strong></p>

                    <p>è¯·åœ¨ <code>src/test/java/com/jinitamy/core/template</code> ç›®å½•ä¸‹åˆ›å»º <code>TemplateEngineTest.java</code>ã€‚</p>

                    <h4>TemplateEngineTest</h4>
                    <pre><code class="language-java">package com.jinitamy.core.template;

import org.junit.jupiter.api.Test;
import java.util.HashMap;
import java.util.Map;
import static org.junit.jupiter.api.Assertions.*;

class TemplateEngineTest {

    @Test
    void testRender() {
        TemplateEngine engine = new TemplateEngine();

        Map&lt;String, Object&gt; model = new HashMap&lt;&gt;();
        model.put("title", "Jinitamy æµ‹è¯•");
        model.put("name", "å­¦å‘˜");
        model.put("time", "2025-12-03");

        String result = engine.render("index.ftl", model);

        System.out.println("æ¸²æŸ“ç»“æœ:\n" + result);

        assertNotNull(result);
        assertTrue(result.contains("&lt;title&gt;Jinitamy æµ‹è¯•&lt;/title&gt;"));
        assertTrue(result.contains("æ¬¢è¿, å­¦å‘˜!"));
        assertTrue(result.contains("2025-12-03"));
    }
}</code></pre>

                    <h4>éªŒè¯æ­¥éª¤</h4>
                    <ol>
                        <li>ç¡®ä¿ <code>index.ftl</code> ä½äº <code>src/main/resources/templates/</code>ã€‚</li>
                        <li>è¿è¡Œ <code>TemplateEngineTest</code> ä¸­çš„ <code>testRender</code> æµ‹è¯•æ–¹æ³•ã€‚</li>
                        <li>è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œç¡®è®¤ <code>${name}</code> ç­‰å˜é‡å·²è¢«æ­£ç¡®æ›¿æ¢ã€‚</li>
                        <li>å¦‚æœæµ‹è¯•é€šè¿‡ï¼ˆç»¿æ¡ï¼‰ï¼Œè¯´æ˜æ¨¡æ¿å¼•æ“å®ç°æˆåŠŸã€‚</li>
                    </ol>
                </div>

                <div class="section">
                    <h3>5. è¯„åˆ†æ ‡å‡†</h3>
                    <ul>
                        <li><strong>é…ç½®æ­£ç¡®æ€§ (40%)</strong>ï¼šèƒ½å¤Ÿæ­£ç¡®åŠ è½½ resources ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶</li>
                        <li><strong>æ¸²æŸ“åŠŸèƒ½ (40%)</strong>ï¼šrender æ–¹æ³•èƒ½å¤Ÿæ­£ç¡®å°† Map ä¸­çš„æ•°æ®å¡«å……åˆ° ftl æ¨¡æ¿ä¸­</li>
                        <li><strong>ä»£ç è§„èŒƒ (20%)</strong>ï¼šå¼‚å¸¸å¤„ç†å¾—å½“ï¼Œä»£ç ç»“æ„æ¸…æ™°</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Slide 8: ç»¼åˆé¡¹ç›® - åšå®¢ç«™ -->
        <section class="slide">
            <div class="slide-content">
                <h2>å¤§ä½œä¸šç»¼åˆï¼šåŸºäº Jinitamy çš„åšå®¢ç«™</h2>
                <div class="section">
                    <h3>1. ä»»åŠ¡èƒŒæ™¯ä¸ç›®æ ‡</h3>
                    <p><strong>æ­å–œä½ ï¼</strong></p>
                    <p>ç»è¿‡å‰äº”ä¸ªé˜¶æ®µçš„è‰°è‹¦å¥‹æ–—ï¼Œä½ å·²ç»äº²æ‰‹æ„å»ºäº†ä¸€ä¸ªéº»é›€è™½å°ã€äº”è„ä¿±å…¨çš„ Java Web æ¡†æ¶ â€”â€” <b>Jinitamy</b>ã€‚</p>
                    <ul>
                        <li><strong>Router (è·¯ç”±å™¨)</strong>ï¼šä½ å®ç°äº†é«˜æ•ˆçš„è·¯ç”±åˆ†å‘ï¼Œè®©è¯·æ±‚èƒ½æ‰¾åˆ°å½’å®¿</li>
                        <li><strong>Context (ä¸Šä¸‹æ–‡)</strong>ï¼šä½ å°è£…äº†è¯·æ±‚ä¸å“åº”ï¼Œè®©æ•°æ®ä¼ é€’å˜å¾—ä¼˜é›…</li>
                        <li><strong>HttpHandler (æ ¸å¿ƒå¤„ç†å™¨)</strong>ï¼šä½ æ­å»ºäº†è´£ä»»é“¾æ¨¡å¼çš„ä¸­é—´ä»¶æœºåˆ¶ï¼Œè®©ä¸šåŠ¡é€»è¾‘ä¸æ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»</li>
                        <li><strong>Engine (å¼•æ“)</strong>ï¼šä½ å±è”½äº† Netty çš„åº•å±‚å¤æ‚æ€§ï¼Œå®ç°äº†ä¸€é”®å¯åŠ¨</li>
                        <li><strong>TemplateEngine (æ¨¡æ¿å¼•æ“)</strong>ï¼šä½ å¼•å…¥äº† FreeMarkerï¼Œå®ç°äº†åŠ¨é™åˆ†ç¦»çš„é¡µé¢æ¸²æŸ“</li>
                    </ul>
                    <p><strong>ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ£€éªŒä½ çš„"æ­¦å™¨"äº†ï¼</strong></p>
                    <p>æœ¬æ¬¡ä½œä¸šä¸å†æ˜¯å®ç°æ¡†æ¶çš„æŸä¸ªç»„ä»¶ï¼Œè€Œæ˜¯<b>ä½œä¸ºæ¡†æ¶çš„ä½¿ç”¨è€…</b>ï¼Œåˆ©ç”¨ä½ åˆšåˆšå†™å¥½çš„ <code>Jinitamy</code> æ¡†æ¶ï¼Œå¼€å‘ä¸€ä¸ªçœŸå®çš„ Web åº”ç”¨ â€”â€” <b>ç®€æ˜“ä¸ªäººåšå®¢ç³»ç»Ÿ</b>ã€‚è¿™å°†æ˜¯ä¸€æ¬¡å®Œæ•´çš„å…¨æ ˆä½“éªŒï¼šä»æ•°æ®è¯»å–ã€åˆ°ä¸šåŠ¡é€»è¾‘å¤„ç†ã€å†åˆ°å‰ç«¯é¡µé¢å±•ç¤ºã€‚</p>
                </div>

                <div class="section">
                    <h3>2. ä¸šåŠ¡éœ€æ±‚æè¿°</h3>
                    <p>è¯·åˆ›å»ºä¸€ä¸ªåä¸º <code>com.jinitamy.example.BlogApp</code> çš„åº”ç”¨ï¼Œå®ç°ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>

                    <h4>2.1 æ•°æ®æºç®¡ç† (Model)</h4>
                    <p>æˆ‘ä»¬æš‚æ—¶ä¸è¿æ¥å¤æ‚çš„æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰ï¼Œè€Œæ˜¯é‡‡ç”¨<b>æœ¬åœ°æ–‡ä»¶</b>ä½œä¸ºæ•°æ®æºã€‚</p>
                    <ul>
                        <li>åœ¨ <code>src/main/resources</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ <code>articles.txt</code></li>
                        <li>æ–‡ä»¶å­˜å‚¨åšå®¢æ–‡ç« æ•°æ®ï¼Œæ ¼å¼è‡ªå®šï¼ˆå»ºè®®ä½¿ç”¨ <code>|</code> æˆ– <code>,</code> åˆ†éš”ï¼‰ã€‚ä¾‹å¦‚ï¼š
                            <pre>1|Jinitamyæ¡†æ¶å‘å¸ƒäº†|è¿™æ˜¯æˆ‘å†™çš„ç¬¬ä¸€ä¸ªWebæ¡†æ¶...
2|å­¦ä¹ Nettyçš„å¿ƒå¾—|Nettyçš„EventLoopæœºåˆ¶éå¸¸...</pre>
                        </li>
                        <li><strong>è¦æ±‚</strong>ï¼šç¨‹åºå¯åŠ¨æ—¶ï¼Œèƒ½å¤Ÿè¯»å–è¯¥æ–‡ä»¶ï¼Œå¹¶å°†å…¶è§£æä¸º Java å¯¹è±¡ï¼ˆå¦‚ <code>Article</code> ç±»ï¼‰å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆå¦‚ <code>List&lt;Article&gt;</code>ï¼‰</li>
                    </ul>

                    <h4>2.2 é¡µé¢å±•ç¤º (View)</h4>
                    <p>ä½ éœ€è¦è®¾è®¡ä¸¤ä¸ª HTML é¡µé¢æ¨¡æ¿ï¼Œæ”¾åœ¨ <code>src/main/resources/templates</code> ç›®å½•ä¸‹ï¼š</p>
                    <ul>
                        <li><strong>é¦–é¡µ (index.ftl)</strong>ï¼šå±•ç¤ºåšå®¢ç³»ç»Ÿçš„æ ‡é¢˜ï¼Œå±•ç¤º<b>æ–‡ç« åˆ—è¡¨</b>ï¼Œæ¯ç¯‡æ–‡ç« æ˜¾ç¤ºæ ‡é¢˜ï¼Œä¸”æ ‡é¢˜æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ï¼Œç‚¹å‡»å¯è·³è½¬åˆ°è¯¦æƒ…é¡µ</li>
                        <li><strong>æ–‡ç« è¯¦æƒ…é¡µ (article.ftl)</strong>ï¼šå±•ç¤ºæ–‡ç« çš„<b>å®Œæ•´æ ‡é¢˜</b>å’Œ<b>æ­£æ–‡å†…å®¹</b>ï¼Œæä¾›ä¸€ä¸ª"è¿”å›é¦–é¡µ"çš„é“¾æ¥</li>
                    </ul>

                    <h4>2.3 ä¸šåŠ¡æ§åˆ¶ (Controller)</h4>
                    <p>åœ¨ <code>BlogApp</code> ä¸­åˆ©ç”¨ <code>Engine</code> æ³¨å†Œè·¯ç”±å’Œä¸­é—´ä»¶ï¼š</p>
                    <ul>
                        <li><strong>å…¨å±€æ—¥å¿—ä¸­é—´ä»¶</strong>ï¼šè®°å½•æ¯ä¸€ä¸ªè¯·æ±‚çš„è·¯å¾„å’Œå¤„ç†è€—æ—¶ï¼Œæ‰“å°åœ¨æ§åˆ¶å°</li>
                        <li><strong>é¦–é¡µè·¯ç”± (GET /)</strong>ï¼šè·å–æ‰€æœ‰æ–‡ç« æ•°æ®ï¼Œå°†æ–‡ç« åˆ—è¡¨æ”¾å…¥æ•°æ®æ¨¡å‹ï¼Œè°ƒç”¨ <code>TemplateEngine</code> æ¸²æŸ“ <code>index.ftl</code>ï¼Œå°†æ¸²æŸ“åçš„ HTML è¿”å›ç»™æµè§ˆå™¨</li>
                        <li><strong>è¯¦æƒ…é¡µè·¯ç”± (GET /article/:id)</strong>ï¼šä»è·¯å¾„å‚æ•°ä¸­è·å– <code>id</code>ï¼Œæ ¹æ® <code>id</code> åœ¨å†…å­˜ä¸­æŸ¥æ‰¾å¯¹åº”çš„æ–‡ç« 
                            <ul>
                                <li>å¦‚æœæ‰¾åˆ°ï¼šå°†æ–‡ç« å¯¹è±¡æ”¾å…¥ Modelï¼Œæ¸²æŸ“ <code>article.ftl</code></li>
                                <li>å¦‚æœæœªæ‰¾åˆ°ï¼šè¿”å› 404 çŠ¶æ€ç å’Œé”™è¯¯æç¤º</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h3>3. å¼€å‘æŒ‡å¯¼</h3>
                    <h4>3.1 ç›®å½•ç»“æ„å»ºè®®</h4>
                    <pre><code class="language-bash">src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â””â”€â”€ com/
â”‚   â”‚       â””â”€â”€ jinitamy/
â”‚   â”‚           â””â”€â”€ example/
â”‚   â”‚               â”œâ”€â”€ BlogApp.java      # â† ä½ çš„ä¸»ç¨‹åº
â”‚   â”‚               â””â”€â”€ model/
â”‚   â”‚                   â””â”€â”€ Article.java    # â† æ–‡ç« å®ä½“ç±»
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ articles.txt        # â† æ•°æ®æ–‡ä»¶
â”‚       â””â”€â”€ templates/
â”‚           â”œâ”€â”€ index.ftl       # â† é¦–é¡µæ¨¡æ¿
â”‚           â””â”€â”€ article.ftl     # â† è¯¦æƒ…é¡µæ¨¡æ¿
â””â”€â”€ test/</code></pre>

                    <h4>3.2 å…³é”®ä»£ç æç¤º</h4>
                    <h5>å…³äºæ–‡ä»¶è¯»å–</h5>
                    <pre><code class="language-java">InputStream is = this.getClass().getClassLoader()
    .getResourceAsStream("articles.txt");</code></pre>

                    <h5>å…³äºæ¨¡æ¿æ¸²æŸ“</h5>
                    <p>åœ¨ Handler ä¸­ï¼Œä½ çš„ä»£ç é€»è¾‘é€šå¸¸æ˜¯ä¸‰æ¿æ–§ï¼š</p>
                    <ol>
                        <li><strong>å‡†å¤‡æ•°æ®</strong>ï¼š<code>Map&lt;String, Object&gt; model = ...</code></li>
                        <li><strong>æ¸²æŸ“é¡µé¢</strong>ï¼š<code>String html = TemplateEngine.render("...", model);</code></li>
                        <li><strong>å‘é€å“åº”</strong>ï¼š
                            <pre><code class="language-java">ctx.getResponse().headers()
    .set("Content-Type", "text/html; charset=utf-8");
ctx.getResponse().content()
    .writeBytes(html.getBytes(StandardCharsets.UTF_8));</code></pre>
                        </li>
                    </ol>

                    <h5>å…³äºåŠ¨æ€è·¯ç”±å‚æ•°</h5>
                    <pre><code class="language-java">String id = ctx.getParam("id").orElse(null);</code></pre>
                </div>

                <div class="section">
                    <h3>4. éªŒè¯ä¸æäº¤</h3>
                    <h4>éªŒè¯æ­¥éª¤</h4>
                    <ol>
                        <li>è¿è¡Œ <code>BlogApp</code> çš„ <code>main</code> æ–¹æ³•å¯åŠ¨æœåŠ¡å™¨</li>
                        <li>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://localhost:8080/</code>
                            <ul>
                                <li><strong>é¢„æœŸ</strong>ï¼šçœ‹åˆ°ä½  <code>articles.txt</code> ä¸­é…ç½®çš„æ–‡ç« åˆ—è¡¨</li>
                            </ul>
                        </li>
                        <li>ç‚¹å‡»å…¶ä¸­ä¸€ç¯‡æ–‡ç« 
                            <ul>
                                <li><strong>é¢„æœŸ</strong>ï¼šé¡µé¢è·³è½¬åˆ° <code>/article/xxx</code>ï¼Œå¹¶æ˜¾ç¤ºè¯¥æ–‡ç« çš„è¯¦ç»†å†…å®¹</li>
                            </ul>
                        </li>
                        <li>è§‚å¯Ÿ IDE æ§åˆ¶å°
                            <ul>
                                <li><strong>é¢„æœŸ</strong>ï¼šçœ‹åˆ°ä¸­é—´ä»¶æ‰“å°çš„è¯·æ±‚æ—¥å¿—ï¼Œä¾‹å¦‚ <code>[GET] /article/1 took 5ms</code></li>
                            </ul>
                        </li>
                    </ol>

                    <h4>æ€è€ƒé¢˜</h4>
                    <ul>
                        <li>å¦‚æœ <code>articles.txt</code> æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½ çš„ç¨‹åºä¼šå´©æºƒå—ï¼Ÿå¦‚ä½•ä¼˜é›…å¤„ç†ï¼Ÿ</li>
                        <li>å¦‚æœæˆ‘æƒ³æ·»åŠ "å‘å¸ƒæ–‡ç« "çš„åŠŸèƒ½ï¼ˆ<code>POST /article</code>ï¼‰ï¼Œç›®å‰çš„æ¶æ„éœ€è¦åšå“ªäº›è°ƒæ•´ï¼Ÿ</li>
                    </ul>
                </div>

                <div class="section">
                    <h3>5. è¯„åˆ†æ ‡å‡†</h3>
                    <ul>
                        <li><strong>å®Œæ•´æ€§ (40%)</strong>ï¼šèƒ½å¤Ÿè·‘é€š"åˆ—è¡¨é¡µ â†’ è¯¦æƒ…é¡µ"çš„å®Œæ•´æµç¨‹</li>
                        <li><strong>æ­£ç¡®æ€§ (30%)</strong>ï¼šèƒ½å¤Ÿæ­£ç¡®è¯»å–æœ¬åœ°æ–‡ä»¶æ•°æ®ï¼Œæ¨¡æ¿æ¸²æŸ“æ— ä¹±ç </li>
                        <li><strong>è§„èŒƒæ€§ (30%)</strong>ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œè·¯ç”±å®šä¹‰åˆç†ï¼Œèƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨è‡ªå·±ç¼–å†™çš„æ¡†æ¶ API</li>
                    </ul>
                </div>
            </div>
        </section>



        <!-- UI Elements -->
        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div class="controls">
            <button id="prevBtn">ä¸Šä¸€é¡µ</button>
            <span id="slide-counter">1 / X</span>
            <button id="nextBtn">ä¸‹ä¸€é¡µ</button>
        </div>
    </main>

    <script src="./js/animation.js"></script>
    <script src="./js/ppt.js"></script>
    <script src="../prism/prism.js"></script>
    <script src="../prism/prism-autoloader.min.js"></script>
    <script src="./js/nav.js"></script>
        <script src="./js/imgbed-replacer.js"></script>
    <script src="js/chat-with-ai.js"></script>
</body>

</html>