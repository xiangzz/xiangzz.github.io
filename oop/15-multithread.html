<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java å¤šçº¿ç¨‹åŸºç¡€</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="../prism/prism.css">
    <link rel="stylesheet" href="./css/multithread.css">
</head>
<body>

    <main id="presentation">
        <section class="slide title-slide active">
            <h1>å¤šçº¿ç¨‹åŸºç¡€</h1>
            <p>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆJavaï¼‰</p>
            <strong>æŒæ¡çº¿ç¨‹åˆ›å»ºã€çŠ¶æ€ä¸åŒæ­¥ï¼Œç†è§£å¹¶å‘ä¸‰è¦ç´ </strong>
        </section>



        <section class="slide">
            <div class="slide-content">
                <h2>å‰ç½®çŸ¥è¯†ï¼šè¿›ç¨‹ä¸çº¿ç¨‹</h2>
                <div class="media-block">
                    <div class="media-block__text">
                        <h3>è¿›ç¨‹ = "ç‹¬ç«‹çš„å·¥å‚"</h3>
                        <ul>
                            <li>æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ ˆã€ä»£ç æ®µï¼‰</li>
                            <li>è¿›ç¨‹é—´é€šä¿¡éœ€è¦ IPCï¼ˆç®¡é“ã€å…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li>
                            <li>åˆ›å»ºè¿›ç¨‹å¼€é”€å¤§ï¼šéœ€è¦åˆ†é…å†…å­˜ã€å¤åˆ¶èµ„æº</li>
                            <li>ä¾‹å­ï¼šæ‰“å¼€æµè§ˆå™¨ã€å¯åŠ¨ IDEã€è¿è¡ŒéŸ³ä¹æ’­æ”¾å™¨ï¼Œå„æ˜¯ä¸€ä¸ªè¿›ç¨‹</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <h3>çº¿ç¨‹ = "å·¥å‚é‡Œçš„å·¥äºº"</h3>
                        <ul>
                            <li>çº¿ç¨‹å±äºæŸä¸ªè¿›ç¨‹ï¼Œå…±äº«è¯¥è¿›ç¨‹çš„å†…å­˜ç©ºé—´</li>
                            <li>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„æ ˆï¼ˆå±€éƒ¨å˜é‡ï¼‰å’Œç¨‹åºè®¡æ•°å™¨</li>
                            <li>çº¿ç¨‹é—´é€šä¿¡ç®€å•ï¼šç›´æ¥è¯»å†™å…±äº«å˜é‡</li>
                            <li>ä¾‹å­ï¼šæµè§ˆå™¨åŒæ—¶ä¸‹è½½æ–‡ä»¶ã€æ¸²æŸ“é¡µé¢ã€å“åº”ç”¨æˆ·è¾“å…¥ï¼Œå„æ˜¯çº¿ç¨‹</li>
                        </ul>
                    </div>
                </div>
                <div class="highlight-box">
                    <strong>ç±»æ¯”è®°å¿†</strong>
                    <ul>
                        <li>è¿›ç¨‹å°±åƒ"å…¬å¸"ï¼šç‹¬ç«‹çš„åŠå…¬å¤§æ¥¼ã€ç‹¬ç«‹çš„è´¢åŠ¡ç³»ç»Ÿã€ç‹¬ç«‹çš„äººå‘˜ç®¡ç†</li>
                        <li>çº¿ç¨‹å°±åƒ"å‘˜å·¥"ï¼šå…±äº«å…¬å¸çš„èµ„æºï¼ˆä¼šè®®å®¤ã€æ‰“å°æœºï¼‰ï¼Œåä½œå®Œæˆä»»åŠ¡</li>
                        <li>å¤šè¿›ç¨‹ = å¼€å¤šä¸ªå…¬å¸ï¼Œå„å¹²å„çš„ï¼Œåä½œæˆæœ¬é«˜ä½†äº’ä¸å½±å“</li>
                        <li>å¤šçº¿ç¨‹ = ä¸€ä¸ªå…¬å¸å¤šä¸ªå‘˜å·¥ï¼Œåä½œæ•ˆç‡é«˜ä½†éœ€è¦åè°ƒï¼ˆåŒæ­¥ï¼‰é¿å…å†²çª</li>
                    </ul>
                </div>
                <p class="conclusion">Java ç¨‹åºé»˜è®¤æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼ˆmainï¼‰ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºæ–°çº¿ç¨‹å®ç°å¹¶å‘æ‰§è¡Œã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹</h2>
                <p class="problem-intro">ä½ ç‚¹äº†ä¸€ä¸‹â€œå¯¼å‡ºæŠ¥è¡¨â€æŒ‰é’®ï¼Œæ•´ä¸ªçª—å£ç¬é—´å¡ä½ï¼Œè¿›åº¦æ¡ä¸€åŠ¨ä¸åŠ¨ã€‚5ç§’åç•Œé¢æ‰æ¢å¤â€”â€”<strong>å•çº¿ç¨‹çš„ä»£ä»·</strong>ã€‚</p>
                <div class="media-block">
                    <div class="media-block__text">
                        <h3>é—®é¢˜ï¼šGUIå¡æ­»</h3>
                        <ul>
                            <li>ä¸»çº¿ç¨‹æ—¢è¦å“åº”ç•Œé¢ï¼Œåˆè¦æ‰§è¡Œè€—æ—¶ä»»åŠ¡</li>
                            <li>è€—æ—¶ä»»åŠ¡é˜»å¡äº‹ä»¶æ´¾å‘çº¿ç¨‹ï¼Œç•Œé¢å¤±å»å“åº”</li>
                            <li>æŠŠä»»åŠ¡æ¬å‡ºä¸»çº¿ç¨‹ï¼Œçª—å£å³å¯ç»§ç»­æµç•…æ“ä½œ</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <h3>çº¿ç¨‹=â€œä¸å¡â€çš„ä»£ä»·</h3>
                        <ul>
                            <li>çº¿ç¨‹åˆ‡æ¢å¼€é”€è¿œå°äºè¿›ç¨‹ï¼Œé€‚åˆå¹¶å‘ä¸å“åº”å¼åœºæ™¯</li>
                            <li>åŒè¿›ç¨‹å†…çº¿ç¨‹å…±äº«å †ä¸æ–¹æ³•åŒºï¼Œé€šä¿¡é›¶æ‹·è´</li>
                            <li>ä½†å…±äº«å¯å˜æ•°æ®å¿…é¡»æ­£ç¡®åŒæ­¥ï¼Œå¦åˆ™ç»“æœé”™ä¹±</li>
                        </ul>
                    </div>
                </div>
                <p class="conclusion">å…ˆè§£å†³â€œå¡â€ï¼Œå†è§£å†³â€œä¹±â€â€”â€”å¤šçº¿ç¨‹å…ˆè®©ç¨‹åºä¸å¡ï¼Œå†ç”¨åŒæ­¥ä¿è¯ä¸ä¹±ã€‚</p>
                <div class="demo-card" style="margin-top:16px;">
                    <div>
                        <button id="blockBtn" style="padding:6px 12px;">æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ï¼ˆä¼šå¡ï¼‰</button>
                        <button id="threadBtn" style="padding:6px 12px;">æ”¾çº¿ç¨‹æ‰§è¡Œï¼ˆä¸å¡ï¼‰</button>
                        <div id="status" style="margin-top:8px;font-weight:700;">å‡†å¤‡å°±ç»ª</div>
                    </div>
                    <div>
                        <div class="bar-wrap"><div id="progress" class="bar"></div></div>
                        <div style="margin-top:4px;font-size:12px;color:#666;">è¿›åº¦æ¡åªåœ¨å³ä¾§æµç•…æ›´æ–°</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>åˆ›å»ºçº¿ç¨‹ï¼šç»§æ‰¿ Thread</h2>
                <pre><code class="language-java">class MyThread extends Thread {
    public void run() {
        for (int i = 0; i &lt; 3; i++) {
            System.out.println("å·¥ä½œ: " + i + " - " + Thread.currentThread().getName());
        }
    }
}

public class Main {
    public static void main(String[] args) {
        Thread t = new MyThread();
        t.start();
    }
}</code></pre>
                <p class="conclusion">ç»§æ‰¿æ–¹å¼ç®€å•ç›´æ¥ï¼Œä½†å—é™äºå•ç»§æ‰¿ï¼Œå¸¸ç”¨äºå¿«é€Ÿç¤ºä¾‹ã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>åˆ›å»ºçº¿ç¨‹ï¼šå®ç° Runnable</h2>
                <pre><code class="language-java">class Task implements Runnable {
    public void run() {
        for (int i = 0; i &lt; 3; i++) {
            System.out.println("ä»»åŠ¡: " + i + " - " + Thread.currentThread().getName());
        }
    }
}

public class Main {
    public static void main(String[] args) {
        Runnable task = new Task();
        Thread t1 = new Thread(task, "T-1");
        Thread t2 = new Thread(task, "T-2");
        t1.start();
        t2.start();
    }
}</code></pre>
                <p class="conclusion">æ¨èä½¿ç”¨ Runnableï¼Œä¾¿äºå…±äº«ä»»åŠ¡é€»è¾‘ä¸è§£è€¦çº¿ç¨‹æ‰§è¡Œã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>åˆ›å»ºçº¿ç¨‹ï¼šCallable + FutureTask</h2>
                <pre><code class="language-java">import java.util.concurrent.Callable;
import java.util.concurrent.FutureTask;

public class Main {
    public static void main(String[] args) throws Exception {
        Callable&lt;Integer&gt; work = () -&gt; {
            int sum = 0;
            for (int i = 1; i &lt;= 100; i++) sum += i;
            return sum;
        };
        FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(work);
        new Thread(ft, "Worker").start();
        Integer result = ft.get();
        System.out.println(result);
    }
}</code></pre>
                <p class="conclusion">Callableæ”¯æŒè¿”å›ç»“æœä¸æŠ›å‡ºå¼‚å¸¸ï¼Œé…åˆFutureTaskè·å–æ‰§è¡Œç»“æœã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€</h2>
                <div class="media-block">
                    <div class="media-block__text">
                    <table style="width:100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background:#f8f9fa;">
                                    <th style="border:1px solid #ddd; padding:.5rem;">çŠ¶æ€</th>
                                    <th style="border:1px solid #ddd; padding:.5rem;">å«ä¹‰</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">NEW</td><td style="border:1px solid #ddd; padding:.5rem;">æ–°å»ºæœªå¯åŠ¨</td></tr>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">RUNNABLE</td><td style="border:1px solid #ddd; padding:.5rem;">å°±ç»ªæˆ–è¿è¡Œä¸­</td></tr>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">BLOCKED</td><td style="border:1px solid #ddd; padding:.5rem;">ç­‰å¾…é”è¿›å…¥ä¸´ç•ŒåŒº</td></tr>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">WAITING</td><td style="border:1px solid #ddd; padding:.5rem;">æ— é™æœŸç­‰å¾…é€šçŸ¥</td></tr>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">TIMED_WAITING</td><td style="border:1px solid #ddd; padding:.5rem;">é™æ—¶ç­‰å¾…</td></tr>
                                <tr><td style="border:1px solid #ddd; padding:.5rem;">TERMINATED</td><td style="border:1px solid #ddd; padding:.5rem;">æ‰§è¡Œå®Œæ¯•</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">public class StateDemo {
    static final Object lock = new Object();
    public static void main(String[] args) throws Exception {
        Thread t = new Thread(() -&gt; {
            synchronized (lock) {
                try { Thread.sleep(500); } catch (InterruptedException e) {}
            }
        }, "T");
        System.out.println(t.getState());
        t.start();
        System.out.println(t.getState());
        synchronized (lock) {
            Thread.sleep(1000);
        }
        System.out.println(t.getState());
        t.join();
        System.out.println(t.getState());
    }
}</code></pre>
                        <p class="conclusion">é€šè¿‡åŒæ­¥ä¸ä¼‘çœ è§‚å¯ŸçŠ¶æ€å˜åŒ–ï¼Œç†è§£è°ƒåº¦ä¸é”ç«äº‰ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å¯åŠ¨ä¸åŸºæœ¬æ§åˆ¶</h2>
                <div class="media-block">
                    <div class="media-block__text">
                        <ul>
                            <li>start å¯åŠ¨æ–°çº¿ç¨‹å¹¶å¼‚æ­¥è°ƒç”¨ run</li>
                            <li>sleep è®©å‡ºCPUä¸€æ®µæ—¶é—´</li>
                            <li>yield è®©å‡ºæ‰§è¡Œæœºä¼šä½†ä¸ä¿è¯åˆ‡æ¢</li>
                            <li>join ç­‰å¾…ç›®æ ‡çº¿ç¨‹ç»“æŸ</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">public class ControlDemo {
    public static void main(String[] args) throws Exception {
        Thread t = new Thread(() -&gt; {
            for (int i = 0; i &lt; 3; i++) {
                System.out.println("A" + i);
                try { Thread.sleep(100); } catch (InterruptedException e) {}
            }
        });
        t.start();
        t.join();
        System.out.println("done");
    }
}</code></pre>
                        <p class="conclusion">ä¸è¦ç›´æ¥è°ƒç”¨ runï¼Œå¦åˆ™ä¸ä¼šåˆ›å»ºå¹¶å‘æ‰§è¡Œã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å¹¶å‘é—®é¢˜ï¼šåŸå­æ€§ä¸å¯è§æ€§</h2>
                <p class="problem-intro">ä¸¤ä¸ªçº¿ç¨‹å„ç»™è®¡æ•°å™¨åŠ 100000ï¼Œç»“æœåº”è¯¥200000ï¼Œå´å¸¸å¸¸åªæœ‰180000â€”â€”<strong>ä¸­é—´çš„20000æ¬¡æ›´æ–°å‡­ç©ºæ¶ˆå¤±</strong>ã€‚</p>
                <div class="media-block">
                    <div class="media-block__text">
                        <div class="highlight-box">
                            <strong>æ¡ˆå‘ç°åœºï¼š20000æ¬¡æ›´æ–°å»å“ªäº†ï¼Ÿ</strong>
                            <ul>
                                <li>i++åœ¨å­—èŠ‚ç é‡Œæ˜¯â€œå–å€¼â†’+1â†’å†™å›â€ä¸‰æ­¥</li>
                                <li>çº¿ç¨‹Aå†™å›å‰ï¼Œçº¿ç¨‹Bä¹Ÿè¯»åˆ°æ—§å€¼ï¼Œ+1åè¦†ç›–Açš„ç»“æœ</li>
                                <li>ä¸€æ¬¡è‡ªå¢ä¸¢å¤±ï¼Œç´¯åŠ å°±æ˜¯â€œå°‘â€</li>
                            </ul>
                        </div>
                        <p>åŸå­æ€§=â€œä¸­é—´çŠ¶æ€å¤–äººçœ‹ä¸è§â€ï¼Œé”èƒ½æŠŠä¸‰æ­¥æ‰“åŒ…æˆä¸€æ­¥ã€‚</p>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">public class RaceCounter {
    static int counter = 0;
    public static void main(String[] args) throws Exception {
        Runnable r = () -&gt; {
            for (int i = 0; i &lt; 100000; i++) counter++;
        };
        Thread t1 = new Thread(r);
        Thread t2 = new Thread(r);
        t1.start(); t2.start();
        t1.join(); t2.join();
        System.out.println(counter);
    }
}</code></pre>
                        <p class="conclusion">ç»™â€œè¯»-æ”¹-å†™â€åŠ é”ï¼Œä¸‰æ­¥å˜ä¸€æ­¥ï¼Œ200000æ¬¡æ›´æ–°ä¸å†ä¸¢å¤±ã€‚</p>
                        <div class="demo-card" style="margin-top:12px;">
                            <div>
                                <button id="raceBtn" style="padding:6px 12px;">æ— é”ç«é€Ÿ</button>
                                <button id="safeBtn" style="padding:6px 12px;">åŠ é”ç«é€Ÿ</button>
                                <div style="margin-top:8px;font-size:12px;">é¢„è®¡200000ï¼Œå½“å‰ï¼š<span id="raceRes" class="result-bad">æœªå¼€å§‹</span></div>
                            </div>
                            <div style="display:flex;gap:8px;">
                                <div style="flex:1;">çº¿ç¨‹1<br><div class="bar-wrap"><div id="r1" class="bar"></div></div></div>
                                <div style="flex:1;">çº¿ç¨‹2<br><div class="bar-wrap"><div id="r2" class="bar"></div></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>synchronizedï¼šäº’æ–¥ä¸å¯é‡å…¥</h2>
                <div class="media-block">
                    <div class="media-block__text">
                        <ul>
                            <li>å¯¹è±¡ç›‘è§†å™¨äº’æ–¥è¿›å…¥ä¸´ç•ŒåŒº</li>
                            <li>æ–¹æ³•ä¸ä»£ç å—ä¸¤ç§å†™æ³•</li>
                            <li>åŒä¸€çº¿ç¨‹å¯é‡å…¥åŒä¸€é”</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">class SafeCounter {
    private int value;
    private final Object lock = new Object();
    public void inc() {
        synchronized (lock) { value++; }
    }
    public synchronized int get() { return value; }
}

public class Main {
    public static void main(String[] args) throws Exception {
        SafeCounter c = new SafeCounter();
        Runnable r = () -&gt; { for (int i = 0; i &lt; 100000; i++) c.inc(); };
        Thread t1 = new Thread(r); Thread t2 = new Thread(r);
        t1.start(); t2.start(); t1.join(); t2.join();
        System.out.println(c.get());
    }
}</code></pre>
                        <p class="conclusion">é€‰æ‹©ç¨³å®šçš„é”å¯¹è±¡ï¼Œé¿å…å°†é”æš´éœ²ç»™å¤–éƒ¨ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å¯¹è±¡ç›‘è§†å™¨ï¼šwait/notify</h2>
                <p class="problem-intro">ç”Ÿäº§è€…é€Ÿåº¦ç¿»å€ï¼Œä»“åº“ç¬é—´çˆ†ä»“OOMï¼›æ¶ˆè´¹è€…é€Ÿåº¦ç¿»å€ï¼ŒCPUç©ºè½¬é£™é«˜â€”â€”<strong>å¿«æ…¢ä¸åè°ƒï¼Œèµ„æºå…¨æµªè´¹</strong>ã€‚</p>
                <div class="media-block">
                    <div class="media-block__text">
                        <div class="highlight-box">
                            <strong>æ¡ˆå‘ç°åœºï¼šçˆ†ä»“ä¸ç©ºè½¬</strong>
                            <ul>
                                <li>while(size==cap) ç©ºè½¬sleepâ†’CPUç‹‚é£™</li>
                                <li>while(size==0) ç©ºè½¬sleepâ†’å†…å­˜æš´æ¶¨</li>
                                <li>å¿«çš„ä¸€æ–¹éœ€è¦â€œç¡â€ï¼Œæ…¢çš„ä¸€æ–¹è´Ÿè´£â€œå«é†’â€</li>
                            </ul>
                        </div>
                        <p>waitè®©çº¿ç¨‹ç¡å¹¶æ”¾é”ï¼›notify/notifyAllç²¾å‡†å«é†’ç­‰å¾…è€…ã€‚</p>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">import java.util.LinkedList;

class BoundedQueue&lt;T&gt; {
    private final LinkedList&lt;T&gt; q = new LinkedList&lt;&gt;();
    private final int cap;
    public BoundedQueue(int cap) { this.cap = cap; }
    public synchronized void put(T x) throws InterruptedException {
        while (q.size() == cap) wait();
        q.add(x);
        notifyAll();
    }
    public synchronized T take() throws InterruptedException {
        while (q.isEmpty()) wait();
        T x = q.removeFirst();
        notifyAll();
        return x;
    }
}</code></pre>
                        <p class="conclusion">ç”¨wait/notifyæŠŠâ€œç©ºè½¬â€å˜â€œç¡çœ â€ï¼Œä»“åº“ä¸å†çˆ†ä»“ï¼ŒCPUä¸å†ç©ºè½¬ã€‚</p>
                        <div class="demo-card" style="margin-top:12px;">
                            <div>
                                <label>ç”Ÿäº§è€…é€Ÿåº¦ï¼š<input type="range" id="prodSpeed" min="1" max="10" value="5"></label><br>
                                <label>æ¶ˆè´¹è€…é€Ÿåº¦ï¼š<input type="range" id="consSpeed" min="1" max="10" value="5"></label>
                                <div style="margin-top:8px;">ä»“åº“å®¹é‡ï¼š<span id="cap">0</span>/10 <span id="warn"></span></div>
                            </div>
                            <div style="display:flex;gap:4px;height:20px;" id="boxes"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>volatileï¼šå¯è§æ€§ä¸æœ‰åºæ€§</h2>
                <div class="media-block">
                    <div class="media-block__text">
                        <ul>
                            <li>ä¿è¯å†™å¯¹å…¶ä»–çº¿ç¨‹å¯è§</li>
                            <li>ç¦æ­¢ç‰¹å®šæŒ‡ä»¤é‡æ’åº</li>
                            <li>ä¸æä¾›å¤åˆæ“ä½œåŸå­æ€§</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">public class VolatileStop {
    static volatile boolean running = true;
    public static void main(String[] args) throws Exception {
        Thread t = new Thread(() -&gt; {
            long i = 0;
            while (running) { i++; }
            System.out.println(i);
        });
        t.start();
        Thread.sleep(200);
        running = false;
        t.join();
    }
}</code></pre>
                        <p class="conclusion">é€‚ç”¨äºçŠ¶æ€æ ‡å¿—ç­‰åœºæ™¯ï¼Œå¤åˆæ›´æ–°éœ€é…åˆåŒæ­¥æˆ–åŸå­ç±»ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>ThreadLocalï¼šæ¯çº¿ç¨‹ç‹¬ç«‹å˜é‡</h2>
                <div class="media-block">
                    <div class="media-block__text">
                        <ul>
                            <li>é¿å…å…±äº«å¯å˜çŠ¶æ€</li>
                            <li>é€‚åˆæ ¼å¼åŒ–å™¨ã€ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
                            <li>æ³¨æ„æ˜¾å¼æ¸…ç†é¿å…æ³„æ¼</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <pre><code class="language-java">import java.text.SimpleDateFormat;

public class TL {
    static final ThreadLocal&lt;SimpleDateFormat&gt; fmt = ThreadLocal.withInitial(() -&gt; new SimpleDateFormat("yyyy-MM-dd"));
    public static void main(String[] args) throws Exception {
        Runnable r = () -&gt; {
            String s = fmt.get().format(new java.util.Date());
            System.out.println(Thread.currentThread().getName() + " - " + s);
            fmt.remove();
        };
        new Thread(r, "T1").start();
        new Thread(r, "T2").start();
    }
}</code></pre>
                        <p class="conclusion">ä½¿ç”¨removeåœ¨ä»»åŠ¡ç»“æŸåæ¸…ç†ï¼Œé¿å…çº¿ç¨‹æ± ä¸­çš„è·¨ä»»åŠ¡æ±¡æŸ“ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å¸¸è§é™·é˜±ä¸é¿å…</h2>
                <div class="columns-3">
                    <div class="highlight-box">
                        <strong>æ­»é”</strong>
                        <pre><code class="language-java">class Dead { Object a = new Object(); Object b = new Object();
    void f1() { synchronized(a) { synchronized(b) {} } }
    void f2() { synchronized(b) { synchronized(a) {} } }
}</code></pre>
                        <ul>
                            <li>ç»Ÿä¸€åŠ é”é¡ºåº</li>
                            <li>å‡å°‘æŒé”æ—¶é—´</li>
                        </ul>
                    </div>
                    <div class="highlight-box">
                        <strong>æ´»é”/é¥¥é¥¿</strong>
                        <ul>
                            <li>è¿‡åº¦è®©æ­¥å¯¼è‡´æ— è¿›å±•</li>
                            <li>é«˜ä¼˜å…ˆçº§é•¿æœŸå ç”¨</li>
                        </ul>
                    </div>
                    <div class="highlight-box">
                        <strong>é”™è¯¯åè°ƒ</strong>
                        <ul>
                            <li>ç”¨sleepä»£æ›¿é€šçŸ¥</li>
                            <li>æ¡ä»¶åˆ¤æ–­æœªç”¨while</li>
                        </ul>
                    </div>
                </div>
                <p class="conclusion">é‡‡ç”¨å›ºå®šé”åºä¸æ¡ä»¶å¾ªç¯ï¼Œä½¿ç”¨é€šçŸ¥æœºåˆ¶è¿›è¡Œæ­£ç¡®åä½œã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>è¯¾å ‚ç»ƒä¹ </h2>
                <ul>
                    <li>å®ç°å¤šçº¿ç¨‹å”®ç¥¨ç³»ç»Ÿï¼Œæ¯”è¾ƒéåŒæ­¥ä¸åŒæ­¥è¾“å‡ºå·®å¼‚</li>
                    <li>ç¼–å†™ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œæ§åˆ¶é˜Ÿåˆ—å®¹é‡ä¸åå</li>
                    <li>ä½¿ç”¨volatileå®ç°åœæ­¢ä¿¡å·ï¼Œä¸synchronizedç‰ˆæœ¬å¯¹æ¯”</li>
                </ul>
                <p class="conclusion">æäº¤å¯è¿è¡Œä»£ç ä¸ç»“æœæˆªå›¾ï¼Œæ ‡æ³¨å…³é”®åŒæ­¥ç‚¹ä¸åŸå› ã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å›åˆ°æœ€åˆé—®é¢˜ï¼šæˆ‘ä»¬è§£å†³äº†ä»€ä¹ˆï¼Ÿ</h2>
                <div class="columns-3">
                    <div class="highlight-box">
                        <strong>1. ç•Œé¢å¡æ­»</strong><br>
                        <span style="color:#2e7d32;">âœ… è€—æ—¶ä»»åŠ¡æ”¾çº¿ç¨‹ï¼Œçª—å£ä¾æ—§æµç•…</span>
                    </div>
                    <div class="highlight-box">
                        <strong>2. 200000æ¬¡è‡ªå¢å°‘äº†</strong><br>
                        <span style="color:#2e7d32;">âœ… ç»™"è¯»-æ”¹-å†™"åŠ é”ï¼Œä¸‰æ­¥å˜ä¸€æ­¥</span>
                    </div>
                    <div class="highlight-box">
                        <strong>3. ä»“åº“çˆ†ä»“/ç©ºè½¬</strong><br>
                        <span style="color:#2e7d32;">âœ… wait/notifyè®©å¿«çš„äººç¡ï¼Œæ…¢çš„äººå«</span>
                    </div>
                </div>
                <p class="conclusion">å¤šçº¿ç¨‹å…ˆè§£å†³"å¡"ï¼Œå†è§£å†³"ä¹±"ï¼›é”ã€ä¿¡å·é‡ã€é˜»å¡é˜Ÿåˆ—éƒ½æ˜¯è®©"ä¸ä¹±"çš„å·¥å…·ã€‚</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>ä¸‹ä¸€æ­¥ï¼šè¿›å…¥ JUC é«˜å¹¶å‘ç¼–ç¨‹</h2>
                <p>æŒæ¡äº†åŸºç¡€å¤šçº¿ç¨‹åï¼Œæˆ‘ä»¬å‘ç°åœ¨å®é™…å¼€å‘ä¸­ä»ç„¶é¢ä¸´è®¸å¤šæŒ‘æˆ˜ï¼š</p>

                <div class="media-block">
                    <div class="media-block__text">
                        <h3>ğŸ¤” åŸºç¡€å¤šçº¿ç¨‹çš„å±€é™</h3>
                        <ul>
                            <li><strong>çº¿ç¨‹ç®¡ç†å¤æ‚ï¼š</strong>æ‰‹åŠ¨åˆ›å»ºé”€æ¯çº¿ç¨‹ï¼Œèµ„æºç®¡ç†å›°éš¾</li>
                            <li><strong>å¹¶å‘æ§åˆ¶æœ‰é™ï¼š</strong>synchronized æ€§èƒ½æœ‰é™ï¼ŒåŠŸèƒ½å•ä¸€</li>
                            <li><strong>å·¥å…·ç¼ºä¹ï¼š</strong>ç¼ºä¹ä¸°å¯Œçš„å¹¶å‘å·¥å…·å’Œå®¹å™¨</li>
                            <li><strong>å¼‚æ­¥ç¼–ç¨‹å›°éš¾ï¼š</strong>Future ä½¿ç”¨ç¹çï¼Œæ— æ³•é“¾å¼è°ƒç”¨</li>
                            <li><strong>æ€§èƒ½ä¼˜åŒ–éš¾ï¼š</strong>ç¼ºä¹é«˜æ€§èƒ½çš„æ— é”æ•°æ®ç»“æ„</li>
                        </ul>
                    </div>
                    <div class="media-block__visual">
                        <h3>ğŸš€ JUC å¸¦æ¥çš„çªç ´</h3>
                        <ul>
                            <li><strong>çº¿ç¨‹æ± æ¡†æ¶ï¼š</strong>ThreadPoolExecutor è‡ªåŠ¨ç®¡ç†çº¿ç¨‹</li>
                            <li><strong>é«˜çº§é”æœºåˆ¶ï¼š</strong>ReentrantLockã€ReadWriteLock æä¾›æ›´çµæ´»æ§åˆ¶</li>
                            <li><strong>ä¸°å¯ŒåŒæ­¥å·¥å…·ï¼š</strong>CountDownLatchã€CyclicBarrierã€Semaphore</li>
                            <li><strong>é«˜æ€§èƒ½å¹¶å‘é›†åˆï¼š</strong>ConcurrentHashMapã€BlockingQueue</li>
                            <li><strong>åŸå­æ“ä½œç±»ï¼š</strong>AtomicIntegerã€AtomicReference å®ç°æ— é”ç¼–ç¨‹</li>
                            <li><strong>å¼‚æ­¥ç¼–ç¨‹é©å‘½ï¼š</strong>CompletableFuture æ”¯æŒé“¾å¼è°ƒç”¨</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸ“š å­¦ä¹ è·¯å¾„å»ºè®®</h3>
                <div class="highlight-box" style="background:#e3f2fd; border-left:4px solid #2196f3;">
                    <strong>ä¸‹ä¸€æ­¥å­¦ä¹ æ¨èé¡ºåºï¼š</strong>
                    <ol style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>16-juc.html - Javaå¹¶å‘ç¼–ç¨‹(JUC)</strong>ï¼šç³»ç»Ÿå­¦ä¹ JUCå·¥å…·åŒ…</li>
                        <li><strong>17-nio.html - NIOä¸ç½‘ç»œç¼–ç¨‹</strong>ï¼šå­¦ä¹ é«˜æ€§èƒ½IOç¼–ç¨‹</li>
                        <li><strong>å®æˆ˜é¡¹ç›®ç»ƒä¹ </strong>ï¼šç»“åˆå®é™…é¡¹ç›®å·©å›ºå¹¶å‘æŠ€èƒ½</li>
                    </ol>
                </div>

                <p class="conclusion">ä»åŸºç¡€å¤šçº¿ç¨‹åˆ°JUCï¼Œæ˜¯ä»"æ‰‹å·¥ä½œåŠ"åˆ°"å·¥ä¸šåŒ–ç”Ÿäº§"çš„é£è·ƒã€‚JUCè®©å¹¶å‘ç¼–ç¨‹å˜å¾—ç®€å•ã€é«˜æ•ˆã€å¯é ï¼</p>
            </div>
        </section>

        <section class="slide">
            <div class="slide-content">
                <h2>å¹¶å‘å¯è§†åŒ–æ¼”ç¤ºï¼šè®¡æ•°å™¨ç«æ€</h2>
                <div class="demo-card">
                    <div>
                        <div class="demo-controls">
                            <button id="startRace">å¼€å§‹æ— é”</button>
                            <button id="startSync">å¼€å§‹åŠ é”</button>
                            <button id="resetDemo">é‡ç½®</button>
                        </div>
                        <div style="margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:12px;">
                            <div>
                                <div class="metric">ç´¯è®¡æ“ä½œï¼š<span id="ops">0</span></div>
                                <div class="metric">å…±äº«è®¡æ•°ï¼š<span id="val">0</span></div>
                            </div>
                            <div>
                                <div class="metric">é¢„è®¡ç»“æœï¼š<span id="expect">0</span></div>
                                <div class="metric">æ­£ç¡®æ€§ï¼š<span id="ok" class="result-bad">æœªå¼€å§‹</span></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div>çº¿ç¨‹1è¿›åº¦</div>
                        <div class="bar-wrap"><div id="bar1" class="bar"></div></div>
                        <div style="margin-top:12px;">çº¿ç¨‹2è¿›åº¦</div>
                        <div class="bar-wrap"><div id="bar2" class="bar"></div></div>
                    </div>
                </div>
                <p class="conclusion">æ¯”è¾ƒæ— é”ä¸åŠ é”çš„è®¡æ•°ç»“æœï¼Œç›´è§‚æ„Ÿå—æ•°æ®ç«äº‰ä¸äº’æ–¥æ•ˆæœã€‚</p>
            </div>
        </section>


        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div class="controls">
            <button id="prevBtn">ä¸Šä¸€é¡µ</button>
            <span id="slide-counter">1 / X</span>
            <button id="nextBtn">ä¸‹ä¸€é¡µ</button>
        </div>
    </main>

    <script src="../prism/prism.js"></script>
    <script src="../prism/prism-autoloader.min.js"></script>
    <script src="./js/ppt.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/multithread.js"></script>
    <script src="./js/imgbed-replacer.js"></script>
    <script src="js/chat-with-ai.js"></script>
</body>
</html>