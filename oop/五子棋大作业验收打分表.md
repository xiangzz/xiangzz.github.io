# 五子棋大作业验收打分表（增强版 - 含代码定位检查）

## 基本信息

| 学号 | 姓名 | 日期 | 验收人 |
|------|------|------|--------|
|  |  |  |  |

---

## 一、提交物完整性检查（前置条件）

| 检查项 | 通过/不通过 | 备注 |
|--------|-------------|------|
| 源代码能编译通过（`mvn compile`） | ☐ 通过 ☐ 不通过 |  |
| 项目结构符合要求（client/server/common分包） | ☐ 通过 ☐ 不通过 |  |
| 设计文档完整（UML类图、时序图） | ☐ 通过 ☐ 不通过 |  |
| 用户手册完整（启动说明、操作指令） | ☐ 通过 ☐ 不通过 |  |
| 测试文档完整（单元测试代码） | ☐ 通过 ☐ 不通过 |  |
| 提交时间符合要求 | ☐ 通过 ☐ 不通过 |  |

**判定**: _____ 全部通过方可进入功能验收

---

## 二、功能评分 + 代码定位检查（95分）

> **说明**：每个Part包含功能评分和代码定位题，代码定位题用于验证学生是否熟悉自己编写的代码，防止抄袭。

### Part 1: 色彩与日志（5分 + 代码定位2分）

#### 功能评分（5分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 时间戳格式正确 `[yyyy-MM-dd HH:mm:ss]` | 1 |  |  |
| 颜色分级正确（INFO青色/绿色、ERROR红色、SUCCESS绿色） | 2 |  |  |
| 颜色不泄漏（使用RESET） | 2 |  |  |
| **功能小计** | **5** |  |  |

#### 代码定位题（2分）- 随机抽取1题

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题1**: 请找到ANSI颜色RESET常量的代码位置，解释其作用 | ☐ |  | 位置:_____<br>解释:_____ |
| **题2**: 请找到ERROR日志输出的代码，展示如何使用ANSI颜色 | ☐ |  | 位置:_____<br>解释:_____ |
| **题3**: 请找到时间戳格式化的代码，解释`DateTimeFormatter`模式 | ☐ |  | 位置:_____<br>解释:_____ |
| **代码定位小计** | **2** |  |  |

**Part 1 总分**: ______ / 7

---

### Part 2: 棋盘与核心算法（20分 + 代码定位3分）

#### 功能评分（20分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 边界处理：坐标(0,0)到(14,14)正常落子 | 1 |  |  |
| 边界处理：越界坐标被正确拒绝，不抛异常 | 2 |  |  |
| 边界处理：对角线边界不抛出IndexOutOfBoundsException | 1 |  |  |
| 胜负判定：水平方向五连珠正确 | 2 |  |  |
| 胜负判定：垂直方向五连珠正确 | 2 |  |  |
| 胜负判定：主对角线方向五连珠正确 | 2 |  |  |
| 胜负判定：副对角线方向五连珠正确 | 2 |  |  |
| 胜负判定：只在五连珠时返回true，不误判 | 1 |  |  |
| 防御性编程：重复落子被拒绝 | 1 |  |  |
| 防御性编程：非法坐标被拒绝 | 1 |  |  |
| 棋盘可视化：使用ANSI颜色显示黑白子 | 2 |  |  |
| 棋盘可视化：棋盘对齐美观 | 1 |  |  |
| (可选) 最后一步高亮显示 | +1 |  |  |
| **功能小计** | **20** |  |  |

#### 代码定位题（3分）- 随机抽取1-2题

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题4**: 请找到检查五子连珠的核心算法代码，解释如何检查对角线方向 | ☐ |  | 位置:_____<br>解释:_____ |
| **题5**: 请找到防止重复落子的代码逻辑，解释判断方法 | ☐ |  | 位置:_____<br>解释:_____ |
| **题6**: 请找到边界检查的代码，解释为什么需要检查 | ☐ |  | 位置:_____<br>解释:_____ |
| **题7**: 请找到`toString()`方法，说明如何打印黑色棋子 | ☐ |  | 位置:_____<br>解释:_____ |
| **代码定位小计** | **3** |  |  |

**Part 2 总分**: ______ / 23

---

### Part 3: 面向对象建模（15分 + 代码定位3分）

#### 功能评分（15分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 组合关系：GameRoom拥有GameBoard对象 | 1 |  |  |
| 组合关系：GameRoom包含Player对象 | 1 |  |  |
| 组合关系：Player类包含必要属性 | 1 |  |  |
| 状态管理：游戏未开始时不能落子 | 1 |  |  |
| 状态管理：游戏结束后不能继续落子 | 1 |  |  |
| 状态管理：使用布尔值或枚举管理状态 | 2 |  |  |
| 回合控制：严格实现"一人一步" | 2 |  |  |
| 回合控制：黑棋下完再次落子被拒绝 | 1 |  |  |
| 回合控制：回合正确切换（黑→白→黑） | 1 |  |  |
| 回合控制：胜负判定后切换回合停止 | 1 |  |  |
| 线程安全：addPlayer使用synchronized | 1 |  |  |
| 线程安全：makeMove使用synchronized | 1 |  |  |
| 线程安全：使用其他并发控制手段 | 1 |  |  |
| **功能小计** | **15** |  |  |

#### 代码定位题（3分）- 随机抽取1题

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题9**: 请找到GameRoom组合GameBoard的代码，解释为什么用组合 | ☐ |  | 位置:_____<br>解释:_____ |
| **题10**: 请找到回合控制的代码，解释`currentTurnColor`切换逻辑 | ☐ |  | 位置:_____<br>解释:_____ |
| **题11**: 请找到防止连下的代码，说明如何检查当前回合 | ☐ |  | 位置:_____<br>解释:_____ |
| **题12**: 请找到使用`synchronized`的代码，解释为什么需要加锁 | ☐ |  | 位置:_____<br>解释:_____ |
| **题13**: 请找到游戏状态管理代码，说明未开始时为何不能落子 | ☐ |  | 位置:_____<br>解释:_____ |
| **代码定位小计** | **3** |  |  |

**Part 3 总分**: ______ / 18

---

### Part 4: 资源管理（10分 + 代码定位2分）

#### 功能评分（10分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 数据结构选型：使用Map<Integer, GameRoom> | 1 |  |  |
| 数据结构选型：使用ConcurrentHashMap | 1 |  |  |
| 数据结构选型：查找复杂度为O(1) | 1 |  |  |
| ID生成唯一性：房间ID递增且唯一 | 1 |  |  |
| ID生成唯一性：使用AtomicInteger或synchronized | 1 |  |  |
| ID生成唯一性：不会出现重复ID | 1 |  |  |
| 核心方法：createRoom创建房间并加入Map | 1 |  |  |
| 核心方法：getRoom快速查找 | 1 |  |  |
| 核心方法：removeRoom正确删除 | 1 |  |  |
| 核心方法：getAllRooms返回所有房间 | 1 |  |  |
| **功能小计** | **10** |  |  |

#### 代码定位题（2分）- 随机抽取1题

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题14**: 请找到使用`ConcurrentHashMap`的代码，解释为什么不用ArrayList | ☐ |  | 位置:_____<br>解释:_____ |
| **题15**: 请找到生成唯一房间ID的代码，解释`getAndIncrement()`的作用 | ☐ |  | 位置:_____<br>解释:_____ |
| **题16**: 请找到创建房间并加入Map的代码，解释`put`操作的含义 | ☐ |  | 位置:_____<br>解释:_____ |
| **题17**: 请找到查找房间的代码，说明房间不存在时返回什么 | ☐ |  | 位置:_____<br>解释:_____ |
| **代码定位小计** | **2** |  |  |

**Part 4 总分**: ______ / 12

---

### Part 5: 网络编程（30分 + 代码定位5分）

#### 功能评分（30分）

##### 服务端（12分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 并发连接：同时接受多个客户端连接 | 1 |  |  |
| 并发连接：使用线程池ExecutorService | 2 |  |  |
| 并发连接：不同客户端互不阻塞 | 1 |  |  |
| 协议解析：正确解析ls rooms命令 | 1 |  |  |
| 协议解析：正确解析enter room <id>命令 | 1 |  |  |
| 协议解析：正确解析put <x> <y>命令 | 1 |  |  |
| 协议解析：错误命令有提示且不崩溃 | 1 |  |  |
| 状态同步：任一客户端落子，双方棋盘同步更新 | 1 |  |  |
| 状态同步：胜负判定后通知双方玩家 | 1 |  |  |
| 状态同步：断线后正确清理资源 | 1 |  |  |
| **服务端小计** | **12** |  |  |

##### 客户端（12分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 双线程架构：主线程读取用户输入 | 1 |  |  |
| 双线程架构：接收线程后台监听服务器消息 | 2 |  |  |
| 双线程架构：两个线程不相互阻塞 | 1 |  |  |
| 界面刷新：棋盘实时刷新显示 | 1 |  |  |
| 界面刷新：使用清屏控制符 | 1 |  |  |
| 界面刷新：能看到对手的落子 | 2 |  |  |
| 用户体验：连接成功有提示 | 1 |  |  |
| 用户体验：加入房间有提示 | 1 |  |  |
| 用户体验：轮到己方落子有提示 | 1 |  |  |
| 用户体验：游戏结束有胜负提示 | 1 |  |  |
| **客户端小计** | **12** |  |  |

##### 综合测试（6分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 完整对战流程：两个客户端能完成完整对局 | 1 |  |  |
| 完整对战流程：落子、胜负判定正常 | 1 |  |  |
| 完整对战流程：重新开始功能正常 | 1 |  |  |
| 异常处理：客户端异常断线，服务器不崩溃 | 1 |  |  |
| 异常处理：输入非法坐标有提示 | 1 |  |  |
| 异常处理：在房间外下棋被拒绝 | 1 |  |  |
| **综合测试小计** | **6** |  |  |

| **功能小计** | **30** |  |  |

#### 代码定位题（5分）- 随机抽取2题

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题18**: 请找到服务器接受连接的代码，解释`server.accept()`的作用 | ☐ |  | 位置:_____<br>解释:_____ |
| **题19**: 请找到解析`put x y`命令的代码，解释如何提取坐标 | ☐ |  | 位置:_____<br>解释:_____ |
| **题20**: 请找到客户端发送消息的代码，解释`PrintWriter`的使用 | ☐ |  | 位置:_____<br>解释:_____ |
| **题21**: 请找到客户端接收线程的代码，解释为什么需要单独线程 | ☐ |  | 位置:_____<br>解释:_____ |
| **题22**: 请找到广播棋盘更新的代码，解释如何让双方看到落子 | ☐ |  | 位置:_____<br>解释:_____ |
| **题23**: 请找到清屏刷新的代码，解释`\033[H\033[2J`的含义 | ☐ |  | 位置:_____<br>解释:_____ |
| **题24**: 请找到处理客户端断线的代码，解释捕获了什么异常 | ☐ |  | 位置:_____<br>解释:_____ |
| **题25**: 请找到线程池创建的代码，解释为什么使用`newCachedThreadPool` | ☐ |  | 位置:_____<br>解释:_____ |
| **代码定位小计** | **5** |  |  |

**Part 5 总分**: ______ / 35

---

## 三、代码质量评分（10分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 命名规范：类名使用PascalCase | 1 |  |  |
| 命名规范：方法名和变量名使用camelCase | 1 |  |  |
| 命名规范：常量全大写下划线分隔 | 0 |  |  |
| 代码格式：缩进统一、大括号位置一致 | 1 |  |  |
| 封装性：成员变量使用private | 1 |  |  |
| 封装性：合理使用getter/setter | 1 |  |  |
| 单一职责：类职责清晰，无过度耦合 | 1 |  |  |
| 代码复用：避免重复代码 | 1 |  |  |
| 异常处理：捕获网络异常IOException | 1 |  |  |
| 异常处理：验证用户输入，非法输入有提示 | 1 |  |  |
| **小计** | **10** |  |  |

---

## 四、文档质量评分（5分）

| 评分项 | 分值 | 得分 | 备注 |
|--------|------|------|------|
| 设计文档：UML类图完整（至少5个核心类） | 1.5 |  |  |
| 设计文档：时序图完整（至少2个） | 1.5 |  |  |
| 用户手册：启动步骤清晰 | 0.5 |  |  |
| 用户手册：命令列表完整 | 0.5 |  |  |
| 测试文档：有单元测试代码 | 1 |  |  |
| **小计** | **5** |  |  |

---

## 五、综合代码追踪题（可选，5分）

> **说明**：此部分为进阶题，用于深度检查学生对代码的理解程度。时间充裕时可使用。

| 题目 | 抽中 | 得分 | 验收记录 |
|------|------|------|----------|
| **题26**: 追踪"put 7 7"命令的完整执行路径，说明经过了哪些类的哪些方法 | ☐ |  | 路径:<br>1._____<br>2._____<br>3._____ |
| **题27**: 请找到所有Socket关闭的代码，解释资源清理的重要性 | ☐ |  | 位置:_____<br>解释:_____ |
| **题28**: (如果有AI) 请找到AI决策算法，解释如何选择落子位置 | ☐ |  | 位置:_____<br>解释:_____ |
| **题29**: 请找到处理非法输入的代码，说明输入"put abc def"会怎样 | ☐ |  | 位置:_____<br>解释:_____ |
| **题30**: 请找到分配颜色的代码，解释如何决定谁执黑棋 | ☐ |  | 位置:_____<br>解释:_____ |
| **综合小计** | **5** |  |  |

---

## 六、扩展功能评分（最多20分）

| 扩展功能 | 难度系数 | 完成度(0-5) | 得分 = 完成度×系数 | 代码定位检查 |
|---------|---------|-------------|------------------|-------------|
| 聊天系统 | 1.0 |  |  | 请找到聊天消息发送的代码:_____ |
| AI对战 | 1.5 |  |  | 请找到AI决策的代码:_____ |
| 自动匹配 | 1.2 |  |  | 请找到匹配逻辑的代码:_____ |
| 积分系统 | 1.2 |  |  | 请找到积分更新的代码:_____ |
| 其他：_____________ |  |  |  |  |
| **小计** |  |  |  |  |

---

## 七、评分汇总

| 项目 | 分值 | 得分 |
|------|------|------|
| 功能评分（五个Part） | 80 |  |
| 代码定位题（防抄袭检查） | 15 |  |
| 代码质量评分 | 10 |  |
| 文档质量评分 | 5 |  |
| 综合代码追踪题（可选） | 5 |  |
| 扩展功能评分 | 最多20 |  |
| **总分** | **115+20** |  |

### 等级评定

| 分数范围 | 等级 | 抄袭风险判断 |
|---------|------|-------------|
| 100-135分 | ☐ 优秀 (A) | 低 - 代码定位题答得好 |
| 90-99分 | ☐ 良好 (B) | 低 - 代码定位题答得好 |
| 80-89分 | ☐ 中等 (C) | 中 - 需结合代码定位题判断 |
| 70-79分 | ☐ 及格 (D) | 高 - 代码定位题得分低 |
| <70分 | ☐ 不及格 (F) | 极高 - 功能和代码定位都差 |

**最终等级**: ___________

**抄袭风险评估**: ☐ 低 ☐ 中 ☐ 高

---

## 八、验收意见

### 优点：
1.
2.
3.

### 需要改进的地方：
1.
2.
3.

### 代码熟悉度评估：
- 能快速定位代码（10秒内）: ☐ 是 ☐ 否
- 能准确解释代码逻辑: ☐ 是 ☐ 否
- 能回答深层原因: ☐ 是 ☐ 否
- **综合判断**: ☐ 自己完成 ☐ 参考完成 ☐ 高度抄袭

### 其他备注：


---

## 九、验收人签字

**验收人**: ____________________
**日期**: ____________________
**学生签字**: ____________________ (可选)

---

## 十、代码定位题评分标准参考

| 评分等级 | 定位速度 | 解释质量 | 得分比例 | 抄袭风险 |
|---------|---------|---------|---------|---------|
| 优秀 | <10秒 | 准确完整，能解释设计原因 | 100% | 无 |
| 良好 | <20秒 | 准确，但解释不够深入 | 80% | 低 |
| 一般 | <30秒 | 基本正确，有些细节不清 | 60% | 中 |
| 困难 | >30秒 | 找到了但解释不清 | 40% | 高 |
| 不会 | 找不到 | 完全不会解释 | 0% | 极高 |

### 使用建议

1. **快速验收模式**（5分钟/组）:
   - 从Part 2和Part 5各选1道代码定位题
   - 例如：题6（边界检查）+ 题19（命令解析）

2. **标准验收模式**（10分钟/组）:
   - 每个Part选1道代码定位题
   - 共5道题，总分15分

3. **深度验收模式**（15分钟/组）:
   - 每个Part选1道代码定位题
   - 加上综合追踪题（题26-30）
   - 共6-7道题，总分20分

4. **防抄袭策略**:
   - **随机抽题**: 每个学生抽不同的题目
   - **追问细节**: "为什么要这样写？"
   - **现场修改**: "请把XXX提示改成YYY"
   - **代码一致**: 如果多个学生代码完全一致（包括变量名、注释），且代码定位题答得差，可判定为抄袭

---

## 附录：快速验收简化版

如果时间非常紧张，可使用此简化版（不含代码定位题）：

| 验收项 | 分值 | 得分 | 快速检查要点 |
|--------|------|------|-------------|
| 启动测试 | 5 |  | Server和Client能否正常启动 |
| 对战演示 | 50 |  | 完成一局对战，核心功能正常 |
| 代码抽查（随机选1个类提问） | 10 |  | 随机查看代码并让学生解释 |
| 文档检查 | 5 |  | UML图和用户手册是否完整 |
| **快速验收总分** | **70** |  |  |
| 扩展功能 | 最多20 |  |  |
| **总分** | **90** |  |  |

---

**使用说明**:
1. 本表格融合了功能验收和代码定位检查
2. 代码定位题在每个Part的评分后，验收时可根据时间灵活选择
3. 所有代码定位题都是开放式的，需要学生现场找到代码并解释
4. 抄袭风险综合评估：功能分高但代码定位分低 = 高度怀疑抄袭
5. 复选框 ☐ 可用鼠标点击勾选（在支持的Markdown编辑器中）

**文档版本**: v2.0 - 增强版（含代码定位检查）
**最后更新**: 2025年
**适用课程**: 面向对象程序设计（Java）
